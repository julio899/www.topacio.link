import{cm as D,ce as U,p,i as d}from"./index-C07ASOjs.js";const S="https://api.binance.com",b=new d,R=D("chart",()=>{const t=U({symbols:"BTCUSDT",temporality:"15m",exchange:"binance",pairs:[],indicators:{divergences:!1,adx:!1,macd:!1,stochastic:!1,heikinAshi:!1,cci:!1,rsi:!1,bb:!1,hma10:!1,hma20:!1,hma55:!1,hma89:!1,hma233:!1,ema10:!1,ema20:!1,ema55:!1,ema89:!1,ema100:!1,ema200:!1,ema233:!1,sma10:!1,sma20:!1,sma55:!1,sma89:!1,sma100:!1,sma200:!1,sma233:!1,psar:!1,kernelChannel:!1,srDinamic:!1},data:[],menuOpen:!1,customOption:!1}),v=p(()=>t.indicators),F=p(()=>t.symbols),k=p(()=>t.temporality),I=p(()=>t.exchange),T=p(()=>t.data),x=p(()=>t.menuOpen);function M(i){t.symbols=new String(i).trim()}async function $({symbol:i,temporality:l,cci:r}){const h=`${S}/api/v3/klines?symbol=${i}&interval=${l}`,C=await fetch(`${S}/api/v3/uiKlines?symbol=${i}&interval=${l}`).then(async a=>(await a.json()).flatMap(s=>({time:s[0],open:parseFloat(s[1]),high:parseFloat(s[2]),low:parseFloat(s[3]),close:parseFloat(s[4]),volume:parseFloat(s[5]),timeEnd:s[6],trades:s[7]}))).then(async a=>{if(a.length<r)return a;const u=a.flatMap(c=>c.close);let s=[],f=b.calcularCCI(a,r);return await b.calculoRSI(u).then(async c=>{var m,y;let n=f.length-1;for(var e=a.length-1;e>=0;e--){if(f[n]&&((m=a[e])!=null&&m.time)){if(a[e].cci=f[n],a[e].cci>100){const o="#00f5d4";a[e].color=o,a[e].borderColor=o,a[e].wickColor=o}if(a[e].cci<-100){const o="#ff006e";a[e].color=o,a[e].borderColor=o,a[e].wickColor=o}}if(c[n]&&((y=a[e])!=null&&y.time))a[e].rsi=c[n],s.push(a[e]);else break;n--}return await s.sort((o,g)=>o.time-g.time),s}),s});let w=C.length>0?C:[];return C.length===0&&(w=await fetch(h).then(async a=>(await a.json()).flatMap(s=>({time:s[0],open:parseFloat(s[1]),high:parseFloat(s[2]),low:parseFloat(s[3]),close:parseFloat(s[4]),volume:parseFloat(s[5]),timeEnd:s[6],trades:s[7]}))).then(async a=>{const u=a.flatMap(c=>c.close);let s=[],f=b.calcularCCI(a,r);return await b.calculoRSI(u).then(async c=>{var m,y;let n=f.length-1;for(var e=a.length-1;e>=0;e--){if(f[n]&&((m=a[e])!=null&&m.time)){if(a[e].cci=f[n],a[e].cci>100){const o="#00f5d4";a[e].color=o,a[e].borderColor=o,a[e].wickColor=o}if(a[e].cci<-100){const o="#ff006e";a[e].color=o,a[e].borderColor=o,a[e].wickColor=o}}if(c[n]&&((y=a[e])!=null&&y.time))a[e].rsi=c[n],s.push(a[e]);else break;n--}return await s.sort((o,g)=>o.time-g.time),s}),s})),w}async function j(){const l=await fetch("https://api.binance.com/api/v3/exchangeInfo").then(r=>r.json());return t.pairs=l.symbols,t.pairs}async function E(){const l=await fetch("https://fapi.binance.com/fapi/v1/exchangeInfo").then(r=>r.json());return t.pairs=l.symbols,t.pairs}async function B(i="BTCUSDT"){const l=new Headers;l.append("Content-Type","application/json");const r={method:"GET",headers:l};return await fetch(`https://fapi.binance.com/fapi/v1/depth?symbol=${i}`,r).then(h=>h.json()).catch(h=>console.log("error",h))}return{isOpenMenu:x,chart:t,getIndicators:v,getData:T,getSymbol:F,setSymbol:M,getTemporality:k,getExchange:I,searchSymbolsFutures:E,searchSymbolsSpot:j,searchDataOrderBook:B,searchClandlesSpot:$}});export{R as u};
