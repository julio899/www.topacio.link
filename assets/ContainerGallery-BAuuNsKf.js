import{_ as ie,s as ve,r as p,u as Q,q as fe,o as ue,a as v,b as m,d as o,e as Y,t as C,f as $,v as ge,x as me,y as P,S as X,z as pe,A as we,W as _e,j as ye,B as G,h as V,l as M,w as D,k as S,F as q,g as ce,n as be,M as U,m as he,c as ke,i as Te}from"./index-D0zx4FVo.js";import{_ as Ce}from"./Tmine2-DhPnLw4a.js";import{e as B}from"./Paginator.vue_vue_type_style_index_0_lang-DVIccOQK.js";import{_ as le}from"./Paginator.vue_vue_type_script_setup_true_lang-D3sAggbD.js";const Se="/img/astarOnlyLogo.svg",xe="/img/update-meta.svg",Ne="/img/fly-svgrepo-com.svg",Ie="/img/claim_.svg",Le={name:"SendNFT",props:["show","idtarget"],emits:["closeModalSend"],setup(E,{emit:r}){const{show:x,idtarget:l}=ve(E),f=p(!1),c=p(""),_=Q();fe(()=>{c.value="",f.value=!1}),ue(()=>{f.value=!1,c.value=""});const d=()=>{c.value="",f.value=!1,r("closeModalSend",!0)};return{store:_,show:x,closeModal:d,confirmSend:async()=>{f.value=!0;const I=c.value.toString().trim().replaceAll("	",""),h=X.mixin({toast:!0,position:"top-end",showConfirmButton:!1,timer:3e3,timerProgressBar:!0,didOpen:b=>{b.addEventListener("mouseenter",X.stopTimer),b.addEventListener("mouseleave",X.resumeTimer)}});if(!pe(I))return f.value=!1,d(),h.fire({icon:"error",title:"Wallet is no valid"});const y=l.value;r("transferNFT",{w:I,id:y})},loading:f,wallet:c}}},Fe={class:"modal-container"},Me={class:"Cabecera"},Pe={class:"Contenido"},$e={key:0,class:"loader-interno"},Ae={key:1,class:"group"},Be={class:"Bootonera"};function Ee(E,r,x,l,f,c){return v(),m("section",{class:P({"modal-t":!0,"show-modal":l.show,"hide-modal":!l.show})},[o("div",Fe,[o("div",Me,[Y(" SEND NFT ðŸ”– "+C(x.idtarget)+" ",1),o("button",{class:"close",onClick:r[0]||(r[0]=(..._)=>l.closeModal&&l.closeModal(..._))},"âœ–")]),o("div",Pe,[l.loading?(v(),m("div",$e)):$("",!0),l.loading?$("",!0):(v(),m("div",Ae,[ge(o("input",{type:"text","onUpdate:modelValue":r[1]||(r[1]=_=>l.wallet=_),required:""},null,512),[[me,l.wallet]]),r[3]||(r[3]=o("span",{class:"highlight"},null,-1)),r[4]||(r[4]=o("span",{class:"bar"},null,-1)),r[5]||(r[5]=o("label",null,"Wallet destine",-1))]))]),o("div",Be,[l.loading?$("",!0):(v(),m("span",{key:0,class:"btn-send",onClick:r[2]||(r[2]=(..._)=>l.confirmSend&&l.confirmSend(..._))},"CONFIRM"))])])],2)}const Re=ie(Le,[["render",Ee],["__scopeId","data-v-a1755a0e"]]),We={class:"header-card"},Oe=["href"],ze={class:"content-card-item-galery"},De={key:0,class:"title-gem"},Ge={key:1,class:"footer-card"},Ue={key:2,class:"snippet","data-title":"dot-flashing"},re={__name:"nftItemGallery",props:["nftId","grid","target","k"],setup(E,{expose:r}){const{proxy:x}=he(),{t:l}=we(),f=new _e,c="https://shibuya.blockscout.com",_="0x7E375Febac53d9B854e24019d7bc3bA6dFFCBc3E",d=t=>x.$MultiWalletWeb3.getDataNFT(t),N=()=>f.syncBalance(),I=t=>`${c}/token/${_}/instance/${t}`,h=()=>{},y=()=>{},b=()=>{var t=1,e=confetti.shapeFromText({text:"ðŸ’Ž",scalar:t});confetti({particleCount:100,spread:180,shapes:[e],scalar:t})},H=async t=>{await U.claimReward(t)===!0&&(b(),await d(t),J())},J=()=>U.refreshTokens(),k=E;console.log({props:k});const s=p(k.nftId),T=p(!1),a=p(null),R=p(null),g=p(!1),A=p(!1),W=p(!1),i=Q(),de=ye.useToast(),Z=G(()=>a.value&&a.value.metadata&&a.value.metadata.attributes?a.value.metadata.attributes.flatMap(t=>({type:t.trait_type,value:t.value})):[]),j=G(()=>{var t,e,n;return(t=a==null?void 0:a.value)!=null&&t.metadata&&((n=(e=a==null?void 0:a.value)==null?void 0:e.metadata)!=null&&n.name)&&a.value.metadata.name.length>25?a.value.metadata.name.replace("Fragment ",""):a.value.metadata.name}),ee=()=>{W.value=!0},te=async({w:t,id:e})=>{console.log("toTransferNFT",{w:t,id:e});let n=null;console.time("transfer");try{if(n=await U.transferNFT(t,e),n!=null&&n.hash){U.refreshTokens();const u=new String(n.hash),F="***"+u.substring(u.length-10);de.open({message:l("general.success.transfer_complete_hash_number",{hash:F}),type:"success",position:"top-right"})}console.log("transferNFT * ",{resp:n})}catch(u){console.log({e:u,resp:n})}console.timeEnd("transfer"),await N(),await y(),await J(),console.log({modalSend:R,resp:n}),W.value=!1},ae=async()=>{T.value=!0;const t=parseInt(s.value),e=await d(t);e!=null&&e.id&&e.id===s.value&&(a.value=e,i.web3.nftLoad[t]=e),await N(),await y(),setTimeout(()=>{T.value=!1},1e3)},L=G(()=>{const t=parseInt(s.value);return i.web3.nftLoad[t]!==void 0}),ne=async()=>{const t=parseInt(s.value);if(await H(t)===!0){await N(),await y(),console.log("* toClaim ok");const n=await d(t);n.id&&n.id===s.value&&t&&(a.value=n,i.web3.nftLoad[t]=n)}},se=G(()=>{var u,F,O,z,w,K;const t=parseInt(s.value),e="cover";console.log({metadata:a}),(F=(u=a==null?void 0:a.value)==null?void 0:u.metadata)!=null&&F.image&&console.log("* img",a.value.metadata.image);const n=(z=(O=a==null?void 0:a.value)==null?void 0:O.metadata)==null?void 0:z.image;return i.web3.nftLoad[t]!==void 0&&((K=(w=a==null?void 0:a.value)==null?void 0:w.metadata)!=null&&K.image)?`
	--crt:#fff;
    background-image: url(${n});
    background-position: center;
    background-repeat: no-repeat;
    background-size: ${e};`:""}),oe=t=>{const e=t.target,n=t.pageX-e.offsetLeft,u=t.pageY-e.offsetTop;e.style.setProperty("--x",n+"px"),e.style.setProperty("--y",u+"px")};return V(L,async t=>{if(t&&(console.log(t,"*existInLoad",i.web3.nftLoad[s.value]!==void 0,s.value,a.value),t&&!a.value)){const e=parseInt(s.value),n=await d(e);n.id&&n.id===s.value&&(a.value=n),console.log({resp:n})}}),V(()=>i.web3.blockNumber,async function(t){A.value=!0;const e=parseInt(s.value),n=await d(e);n!=null&&n.id&&n.id===s.value&&(a.value=n,i.web3.nftLoad[e]=n),A.value=!1}),V(()=>k.nftId,async function(t){var e;if(s.value=t,a.value=null,console.log("w",t,L.value,i.web3.nftLoad[t]),!L.value&&!i.web3.nftLoad[t]){const n=parseInt(s.value);console.log("*startSearch");const u=await d(n);u.id&&u.id===s.value&&(a.value=u,i.web3.nftLoad[n]=u),console.log("* meta",a.value,{data:u})}i.web3.nftLoad[t],((e=i.web3.nftLoad[t])==null?void 0:e.id)===t&&(a.value=i.web3.nftLoad[t])}),ue(async()=>{const t=parseInt(s.value),e=await d(t);console.log({resp:e,idAuxiliar:t},s.value),e&&s&&e.id&&e.id===s.value&&i.web3.nftLoad[t]&&(a.value=e,i.web3.nftLoad[t]=e),e&&!i.web3.nftLoad[s.value]&&(a.value=e,i.web3.nftLoad[s.value]=e)}),r({upReward:A,nftId:s,existInLoad:L,mainStore:i,getBgNft:se,getLinkNftScan:I,moseMoveInCard:oe,toClaim:ne,loadRedresh:T,toRefresh:ae,showModalSedNft:W,toSend:ee,toTransferNFT:te,Popper:B,toVault:h,showDetails:g,getProperties:Z,titleFormat:j}),(t,e)=>{var n,u,F,O,z;return v(),m(q,null,[o("div",{class:P({"nft-item":!0,"loader-bg":!L.value}),style:be(se.value),onMousemove:oe},[o("div",We,[o("a",{href:I(s.value),target:"_blank"},[Y("# "+C(s.value)+" ",1),M(S(B),{content:"Testnet shibuya",arrow:!0,hover:!0},{default:D(()=>e[6]||(e[6]=[o("img",{class:"img-link-polygon",src:Se,alt:"logo Astar"},null,-1)])),_:1})],8,Oe),M(S(B),{content:t.$t("general.titles.nft_attributes"),arrow:!0,hover:!0},{default:D(()=>[o("i",{class:"fa-solid fa-circle-info icon-info",onClick:e[0]||(e[0]=w=>g.value=!g.value)})]),_:1},8,["content"]),M(S(B),{content:t.$t("general.titles.update_metadata"),arrow:!0,hover:!0},{default:D(()=>[o("img",{src:xe,class:P({"icon-update-meta":!0,"loading-refresh":T.value}),onClick:ae},null,2)]),_:1},8,["content"])]),o("div",{class:P({"details-attributes":!0,active:g.value}),onClick:e[4]||(e[4]=w=>g.value=!g.value)},[o("ul",{onClick:e[3]||(e[3]=w=>g.value=!g.value)},[(v(!0),m(q,null,ce(Z.value,w=>(v(),m("li",{onClick:e[1]||(e[1]=K=>g.value=!g.value),class:P({colorEpic:w.type=="Staking"&&w.value>=4,colorEpicRarity:w.value=="epic"})},C(w.type)+" : "+C(w.value),3))),256)),a.value&&((u=(n=a.value)==null?void 0:n.metadata)!=null&&u.name)?(v(),m("li",{key:0,onClick:e[2]||(e[2]=w=>g.value=!g.value)},C(j.value),1)):$("",!0)])],2),o("div",ze,[M(S(B),{content:t.$t("general.titles.send_nft"),arrow:!0,hover:!0,placement:"top"},{default:D(()=>[o("img",{src:Ne,onClick:ee})]),_:1},8,["content"])]),a.value&&((O=(F=a.value)==null?void 0:F.metadata)!=null&&O.name)&&!g.value?(v(),m("div",De,C(j.value),1)):$("",!0),(z=a.value)!=null&&z.reward&&L.value&&!T.value?(v(),m("div",Ge,[o("label",{class:P({"nft-number nft-reward-tmine":!0,blink_me:A.value})},[e[7]||(e[7]=o("img",{src:Ce,alt:"tmine logo",class:"img-logo-tmine"},null,-1)),Y(" "+C(a.value.reward)+" TMINE ",1)],2),M(S(B),{content:t.$t("general.titles.claim_tmine"),hover:!0},{default:D(()=>[o("img",{src:Ie,onClick:ne,class:"icon-reward-claim"})]),_:1},8,["content"])])):$("",!0),!L.value||T.value?(v(),m("div",Ue,e[8]||(e[8]=[o("div",{class:"stage"},[o("div",{class:"dot-flashing"})],-1)]))):$("",!0)],38),M(Re,{show:W.value,idtarget:s.value,onCloseModalSend:e[5]||(e[5]=w=>W.value=!1),onTransferNFT:te,ref_key:"modalSend",ref:R},null,8,["show","idtarget"])],64)}}},Ve={key:0,class:"paginator"},qe={class:"info-floating"},He={key:1,class:"paginator"},Je={__name:"ContainerGallery",setup(E,{expose:r}){const x=new Te,l=Q(),f=p(1),c=p(!1),_=p(null),d=p(5),N=k=>{f.value=k,y()},I=()=>{c.value=!c.value,c.value?d.value=10:d.value=5,b.value=y()},h=G(()=>y().elementosPagina),y=()=>{const k=JSON.parse(JSON.stringify(l.web3.nftTokensIds)),s=x.arrayPaginator(k,d.value,f.value);return _.value=s.totalPaginas,s},b=p(y()),H=()=>{f.value<_.value&&(f.value++,b.value=y()),console.log("nextPage",f.value)};return V(()=>l.web3.nftTokensIds,k=>{k&&(b.value=y())}),r({data:[],mainStore:l,currentPage:b,nextPage:H,nftItemGallery:re,getCurrentTarget:h,multiGrid14:c,changeToMultigrid:I,Paginator:le,updatePage:N,amountPerPage:d}),(k,s)=>{var T,a,R;return v(),m(q,null,[o("section",{class:P({content:!0,"multi-grid-14":c.value,lessMinimal:h.value&&((T=h.value)==null?void 0:T.length)&&((a=h.value)==null?void 0:a.length)<=4,"minimal-size":c.value&&((R=h.value)==null?void 0:R.length)<=3})},[(v(!0),m(q,null,ce(h.value,(g,A)=>(v(),ke(re,{grid:c.value,target:h.value,"nft-id":g,k:A},null,8,["grid","target","nft-id","k"]))),256))],2),b.value&&b.value.paginaActual?(v(),m("section",Ve,[M(le,{currentPage:b.value,total:S(l).web3.nftTokensIds.length,amountPerPage:d.value,onUpdate:N,class:"body-paginator"},null,8,["currentPage","total","amountPerPage"]),o("section",qe,[o("div",null,"Holders: "+C(S(l).web3.holdersCount),1),o("div",null,"Nft balance: "+C(S(l).web3.nftBalance),1)])])):(v(),m("section",He))],64)}}},Qe=ie(Je,[["__scopeId","data-v-64a32df1"]]);export{Qe as C};
