import{_ as Y,j as T,q as Q,r as v,u as O,s as Z,o as K,a as f,g as p,d as r,e as z,t as G,l as F,v as ee,x as ae,y as B,S as E,z as te,p as ne,b as se,A as R,f as D,k as N,m as I,w as $,B as oe,F as V,C as le,h as re,c as ie}from"./index-4f2c0142.js";import{e as M,_ as ce,a as H}from"./Paginator.vue_vue_type_style_index_0_lang-b1c61c10.js";const de="/img/update-meta.svg",ue="/img/fly-svgrepo-com.svg",ve="/img/Tmine2.svg",fe="/img/claim_.svg";const ge={name:"SendNFT",props:["show","idtarget"],emits:["closeModalSend"],setup(h,{emit:u}){const g=T("transferNFT"),{show:o,idtarget:_}=Q(h),i=v(!1),c=v(""),y=O();Z(()=>{c.value="",i.value=!1}),K(()=>{i.value=!1,c.value="",console.log({transferNFT:g})});const k=()=>{c.value="",i.value=!1,u("closeModalSend",!0)};return{store:y,show:o,closeModal:k,confirmSend:async()=>{i.value=!0;const a=c.value.toString().trim().replaceAll("	",""),d=E.mixin({toast:!0,position:"top-end",showConfirmButton:!1,timer:3e3,timerProgressBar:!0,didOpen:b=>{b.addEventListener("mouseenter",E.stopTimer),b.addEventListener("mouseleave",E.resumeTimer)}});if(!te(a))return i.value=!1,k(),d.fire({icon:"error",title:"Wallet is no valid"});const t=_.value;u("transferNFT",{w:a,id:t})},loading:i,wallet:c}}},U=h=>(ne("data-v-bf79e1a0"),h=h(),se(),h),_e={class:"modal-container"},me={class:"Cabecera"},pe={class:"Contenido"},we={key:0,class:"loader-interno"},he={key:1,class:"group"},ye=U(()=>r("span",{class:"highlight"},null,-1)),be=U(()=>r("span",{class:"bar"},null,-1)),Te=U(()=>r("label",null,"Wallet destine",-1)),ke={class:"Bootonera"};function xe(h,u,g,o,_,i){return f(),p("section",{class:B({"modal-t":!0,"show-modal":o.show,"hide-modal":!o.show})},[r("div",_e,[r("div",me,[z(" SEND NFT ðŸ”– "+G(g.idtarget)+" ",1),r("button",{class:"close",onClick:u[0]||(u[0]=(...c)=>o.closeModal&&o.closeModal(...c))},"âœ–")]),r("div",pe,[o.loading?(f(),p("div",we)):F("",!0),o.loading?F("",!0):(f(),p("div",he,[ee(r("input",{type:"text","onUpdate:modelValue":u[1]||(u[1]=c=>o.wallet=c),required:""},null,512),[[ae,o.wallet]]),ye,be,Te]))]),r("div",ke,[o.loading?F("",!0):(f(),p("span",{key:0,class:"btn-send",onClick:u[2]||(u[2]=(...c)=>o.confirmSend&&o.confirmSend(...c))},"CONFIRM"))])])],2)}const Se=Y(ge,[["render",xe],["__scopeId","data-v-bf79e1a0"]]);const Ne={class:"header-card"},Ie=["href"],Ce=r("img",{class:"img-link-polygon",src:ce,alt:"logo matic"},null,-1),Le={class:"content-card"},Pe={key:0,class:"footer-card"},Me={class:"nft-number nft-reward-tmine"},Fe=r("img",{src:ve,alt:"tmine logo",class:"img-logo-tmine"},null,-1),Be={key:1,class:"snippet","data-title":"dot-flashing"},Ae=r("div",{class:"stage"},[r("div",{class:"dot-flashing"})],-1),$e=[Ae],X={__name:"nftItemGallery",props:["nftId","grid","target"],setup(h,{expose:u}){const g=h,o=T("getDataNFT"),_=T("getLinkNftScan"),i=T("syncBalance"),c=T("syncTmineBalance"),y=T("claimReward"),k=T("transferNFT"),C=T("refreshTokens"),a=v(g.nftId),d=v(!1),t=v(null),b=v(null),x=v(!1),l=O(),S=()=>{x.value=!0},L=async({w:e,id:n})=>{console.log("toTransferNFT",{w:e,id:n});const s=await k(e,n);await i(),await c(),await C(),console.log({modalSend:b,resp:s}),!(s!=null&&s.blockNumber)||s===null?b.value.loading=!1:x.value=!1},P=async()=>{d.value=!0;const e=parseInt(a.value),n=await o(e);n.id&&n.id===a.value&&(t.value=n,l.web3.nftLoad[e]=n),await i(),await c(),setTimeout(()=>{d.value=!1},2e3)},w=R(()=>{const e=parseInt(a.value);return l.web3.nftLoad[e]!==void 0}),A=async()=>{const e=parseInt(a.value);if(await y(e)===!0){await i(),await c(),console.log("* toClaim ok");const s=await o(e);s.id&&s.id===a.value&&e&&(t.value=s,l.web3.nftLoad[e]=s)}},j=R(()=>{var s,m,J,W;const e=parseInt(a.value),n=g.grid&&g.grid&&g.target.length>7?"cover":"150% 100%";return(m=(s=t==null?void 0:t.value)==null?void 0:s.metadata)!=null&&m.image&&console.log("* img",t.value.metadata.image),l.web3.nftLoad[e]!==void 0&&((W=(J=t==null?void 0:t.value)==null?void 0:J.metadata)!=null&&W.image)?`
	--crt:#fff;
    background-image: url(${t.value.metadata.image});
    background-position: center;
    background-repeat: no-repeat;
    background-size: ${n};`:""}),q=e=>{const n=e.target,s=e.pageX-n.offsetLeft,m=e.pageY-n.offsetTop;n.style.setProperty("--x",s+"px"),n.style.setProperty("--y",m+"px")};return D(w,async e=>{if(e&&(console.log(e,"*existInLoad",l.web3.nftLoad[a.value]!==void 0,a.value,t.value),e&&!t.value)){const n=parseInt(a.value),s=await o(n);s.id&&s.id===a.value&&(t.value=s),console.log({resp:s})}}),D(()=>g.nftId,async function(e){var n;if(a.value=e,t.value=null,console.log("w",e,w.value,l.web3.nftLoad[e]),!w.value&&!l.web3.nftLoad[e]){const s=parseInt(a.value);console.log("*startSearch");const m=await o(s);m.id&&m.id===a.value&&(t.value=m,l.web3.nftLoad[s]=m),console.log("* meta",t.value,{data:m})}l.web3.nftLoad[e],((n=l.web3.nftLoad[e])==null?void 0:n.id)===e&&(t.value=l.web3.nftLoad[e])}),K(async()=>{const e=parseInt(a.value),n=await o(e);n.id&&n.id===a.value&&l.web3.nftLoad[e]&&(t.value=n,l.web3.nftLoad[e]=n),n&&!l.web3.nftLoad[a.value]&&(t.value=n,l.web3.nftLoad[a.value]=n)}),u({nftId:a,existInLoad:w,mainStore:l,getBgNft:j,getLinkNftScan:_,moseMoveInCard:q,toClaim:A,loadRedresh:d,toRefresh:P,showModalSedNft:x,toSend:S,toTransferNFT:L,Popper:M}),(e,n)=>{var s;return f(),p(V,null,[r("div",{class:B({"nft-item":!0,"loader-bg":!w.value}),style:oe(j.value),onMousemove:q},[r("div",Ne,[r("a",{href:N(_)(a.value),target:"_blank"},[z("# "+G(a.value)+" ",1),I(N(M),{content:"Examinar en Polygonscan",arrow:!0,hover:!0},{default:$(()=>[Ce]),_:1})],8,Ie),I(N(M),{content:"Actualizar Metadata",arrow:!0,hover:!0},{default:$(()=>[r("img",{src:de,class:B({"icon-update-meta":!0,"loading-refresh":d.value}),onClick:P},null,2)]),_:1})]),r("div",Le,[I(N(M),{content:"Enviar NFT",arrow:!0,hover:!0,placement:"top"},{default:$(()=>[r("img",{src:ue,onClick:S})]),_:1})]),(s=t.value)!=null&&s.reward&&w.value&&!d.value?(f(),p("div",Pe,[r("label",Me,[Fe,z(" "+G(t.value.reward)+" TMINE ",1)]),I(N(M),{content:"Hacer Claim de TMINE",hover:!0},{default:$(()=>[r("img",{src:fe,onClick:A,class:"icon-reward-claim"})]),_:1})])):F("",!0),!w.value||d.value?(f(),p("div",Be,$e)):F("",!0)],38),I(Se,{show:x.value,idtarget:a.value,onCloseModalSend:n[0]||(n[0]=m=>x.value=!1),onTransferNFT:L,ref_key:"modalSend",ref:b},null,8,["show","idtarget"])],64)}}};const Ee={key:0,class:"paginator"},ze={class:"slot-btn btn-grid"},Ge={key:1,class:"paginator"},Re={__name:"ContainerGallery",setup(h,{expose:u}){const g=new re,o=O(),_=v(1),i=v(!1),c=v(null),y=v(5),k=l=>{_.value=l,d()},C=()=>{i.value=!i.value,i.value?y.value=10:y.value=5,t.value=d()},a=R(()=>d().elementosPagina),d=()=>{const l=JSON.parse(JSON.stringify(o.web3.nftTokensIds)),S=g.arrayPaginator(l,y.value,_.value);return c.value=S.totalPaginas,S},t=v(d()),b=()=>{_.value<c.value&&(_.value++,t.value=d()),console.log("nextPage",_.value)};return D(()=>o.web3.nftTokensIds,l=>{l&&(t.value=d())}),u({data:[],mainStore:o,currentPage:t,nextPage:b,nftItemGallery:X,getCurrentTarget:a,multiGrid14:i,changeToMultigrid:C,Paginator:H,updatePage:k,amountPerPage:y}),(l,S)=>{var L,P,w;return f(),p(V,null,[r("section",{class:B({content:!0,"multi-grid-14":i.value,lessMinimal:a.value&&((L=a.value)==null?void 0:L.length)&&((P=a.value)==null?void 0:P.length)<=4,"minimal-size":i.value&&((w=a.value)==null?void 0:w.length)<=3})},[(f(!0),p(V,null,le(a.value,A=>(f(),ie(X,{grid:i.value,target:a.value,"nft-id":A},null,8,["grid","target","nft-id"]))),256))],2),t.value&&t.value.paginaActual?(f(),p("section",Ee,[r("span",ze,[r("i",{class:B({"fas fa-th icon-grid":!0,active:i.value}),style:{color:"#ffffff"},onClick:C},null,2)]),I(H,{currentPage:t.value,total:N(o).web3.nftTokensIds.length,amountPerPage:y.value,onUpdate:k},null,8,["currentPage","total","amountPerPage"])])):(f(),p("section",Ge))],64)}}},Oe=Y(Re,[["__scopeId","data-v-755e7290"]]);export{Oe as C,ve as _};
