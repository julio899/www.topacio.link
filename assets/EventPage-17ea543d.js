import{_ as G,j as f,r as p,u as U,A as j,f as J,o as H,N as pe,a as m,g as N,d,k as C,e as y,t as k,m as W,w as z,c as K,l as F,y as le,p as ie,b as re,E as ge,F as ee,C as fe,h as ce,i as ve,n as ue}from"./index-669debc8.js";import{e as te,_ as _e,a as me}from"./Paginator.vue_vue_type_style_index_0_lang-08316e67.js";import{_ as ae,a as V,b as ne}from"./ScrollAreaComponent.vue_vue_type_style_index_0_lang-91649526.js";const we=T=>(ie("data-v-88745e82"),T=T(),re(),T),he={class:"header-card p-start"},be=["href"],ye=we(()=>d("img",{class:"img-link-polygon",src:_e,alt:"logo matic"},null,-1)),Te=["src"],Ie={class:"content info"},Se={class:"content info"},ke={__name:"nftItemEvent",props:["nftId","grid","target","k","w","h"],setup(T,{expose:R}){const _=T,w=f("getDataNFT"),B=f("getLinkNftScan"),x=f("syncBalance"),I=f("syncTmineBalance"),S=f("claimReward"),o=f("transferNFT"),M=f("refreshTokens"),s=p(_.nftId),g=p(_.w),P=p(_.k),$=p(!1),n=p(null),h=p(null),b=p(!1),l=U(),A=e=>{const a=parseInt(String(e)+"999");return new Date(a).toLocaleDateString()+" "+new Date(a).toLocaleTimeString()},u=e=>e.substring(0,7)+"    ......    "+e.slice(-7),i=()=>{b.value=!0},r=async({w:e,id:a})=>{console.log("toTransferNFT",{w:e,id:a});const t=await o(e,a);await x(),await I(),await M(),console.log({modalSend:h,resp:t}),!(t!=null&&t.blockNumber)||t===null?h.value.loading=!1:b.value=!1},E=async()=>{$.value=!0;const e=parseInt(s.value),a=await w(e);a.id&&a.id===s.value&&(n.value=a,l.web3.nftLoad[e]=a),await x(),await I(),setTimeout(()=>{$.value=!1},2e3)},L=j(()=>{const e=parseInt(s.value);return l.web3.nftLoad[e]!==void 0}),D=async()=>{const e=parseInt(s.value);if(await S(e)===!0){await x(),await I(),console.log("* toClaim ok");const t=await w(e);t.id&&t.id===s.value&&e&&(n.value=t,l.web3.nftLoad[e]=t)}},c=e=>{const t=X().filter(v=>v.prop==e);return t[0]&&t[0].value?t[0].value:null},X=()=>{var e,a;return(a=(e=n==null?void 0:n.value)==null?void 0:e.metadata)!=null&&a.attributes?n.value.metadata.attributes.flatMap(t=>({prop:t!=null&&t.trait_type?t==null?void 0:t.trait_type:null,value:t.value})):[]},de=j(()=>{var t,v;const e=parseInt(s.value),a=_.grid&&_.grid&&_.target.length>7?"cover":"150% 100%";return l.web3.nftLoad[e]!==void 0&&((v=(t=n==null?void 0:n.value)==null?void 0:t.metadata)!=null&&v.image)?`
	--crt:#fff;
    background-image: url(${n.value.metadata.image});
    background-position: center;
    background-repeat: no-repeat;
    background-size: ${a};`:""}),Y=e=>{const a=e.target,t=e.pageX-a.offsetLeft,v=e.pageY-a.offsetTop;a.style.setProperty("--x",t+"px"),a.style.setProperty("--y",v+"px")};return J(L,async e=>{if(e&&(console.log(e,"*existInLoad",l.web3.nftLoad[s.value]!==void 0,s.value,n.value),e&&!n.value)){const a=parseInt(s.value),t=await w(a);t.id&&t.id===s.value&&(n.value=t),console.log({resp:t})}}),J(()=>_.nftId,async function(e){var a;if(s.value=e,n.value=null,console.log("w",e,L.value,l.web3.nftLoad[e]),!L.value&&!l.web3.nftLoad[e]){const t=parseInt(s.value);console.log("*startSearch");const v=await w(t);v.id&&v.id===s.value&&(n.value=v,l.web3.nftLoad[t]=v),console.log("* meta",n.value,{data:v})}l.web3.nftLoad[e],((a=l.web3.nftLoad[e])==null?void 0:a.id)===e&&(n.value=l.web3.nftLoad[e])}),H(async()=>{const e=parseInt(s.value),a=await w(e);a.id&&a.id===s.value&&l.web3.nftLoad[e]&&(n.value=a,l.web3.nftLoad[e]=a),a&&!l.web3.nftLoad[s.value]&&(n.value=a,l.web3.nftLoad[s.value]=a)}),R({nftId:s,existInLoad:L,mainStore:l,getBgNft:de,getLinkNftScan:B,moseMoveInCard:Y,toClaim:D,loadRedresh:$,toRefresh:E,showModalSedNft:b,toSend:i,toTransferNFT:r,Popper:te,key:P,formatDateTime:A,winnerWallet:g,formatWallet:u,getNftAtributes:X,getProp:c}),(e,a)=>{var v,q,Q,Z;const t=pe("spam");return(v=n.value)!=null&&v.metadata?(m(),N("div",{key:0,class:le({"nft-item-event":!0}),onMousemove:Y},[d("div",he,[d("a",{href:C(B)(s.value),target:"_blank"},[y("# "+k(s.value)+" ",1),W(C(te),{content:"Examinar en Polygonscan",arrow:!0,hover:!0},{default:z(()=>[ye]),_:1})],8,be),W(t,{class:"fecha-sorteo"},{default:z(()=>[y(k(A(P.value)),1)]),_:1}),(q=n.value)!=null&&q.metadata?(m(),K(t,{key:0,class:"legend"},{default:z(()=>[y(k(n.value.metadata.name)+" ",1),d("p",null,"Winner: "+k(u(g.value)),1)]),_:1})):F("",!0),(Z=(Q=n.value)==null?void 0:Q.metadata)!=null&&Z.image?(m(),N("img",{key:1,src:n.value.metadata.image,alt:"img nft",class:"image-nft"},null,8,Te)):F("",!0)]),d("div",Ie," Type: "+k(c("Type"))+" Luck: "+k(c("Luck")),1),d("div",Se," Staking: "+k(c("Staking")),1)],32)):F("",!0)}}},se=G(ke,[["__scopeId","data-v-88745e82"]]);const xe={key:1,class:"paginator"},Pe={key:2,class:"paginator"},Le={__name:"ContainerEventList",setup(T,{expose:R}){const _=f("searchLastSorteo"),w=f("searchWinnerInSorteo"),B=new ce,x=U(),I=p(1);p(null);const S=p(null),o=p(!1),M=p(null),s=p(9),g=ge({winners:[],loading:!0}),P=u=>{I.value=u,h()},$=()=>{o.value=!o.value,o.value?s.value=10:s.value=5,b.value=h()},n=j(()=>g.winners&&g.winners.length==0?[]:g.winners.flatMap(u=>u.id)),h=()=>{const u=JSON.parse(JSON.stringify(x.web3.nftTokensIds)),i=B.arrayPaginator(u,s.value,I.value);return M.value=i.totalPaginas,i},b=p(h()),l=()=>{I.value<M.value&&(I.value++,b.value=h()),console.log("nextPage",I.value)};J(()=>x.web3.nftTokensIds,u=>{u&&(b.value=h())});const A=[];return H(async()=>{S.value=await _();let u=await w(S.value);for(;(u==null?void 0:u.hash)==="";)S.value--,u=await w(S.value);for(var i=S.value;g.winners.length<s.value;i--){const r=await w(i);r.hash&&r.hash!=""&&g.winners.push(r)}console.log({last_sorteo:S,winnerLast:u,winnersTarget:g}),g.loading=!1}),R({data:A,mainStore:x,currentPage:b,nextPage:l,nftItemEvent:se,getCurrentTarget:n,multiGrid14:o,changeToMultigrid:$,Paginator:me,updatePage:P,amountPerPage:s,last_sorteo:S}),(u,i)=>{var r,E,L;return m(),N(ee,null,[g.loading?F("",!0):(m(),N("section",{key:0,class:le({content:!0,"multi-grid-14":o.value,lessMinimal:n.value&&((r=n.value)==null?void 0:r.length)&&((E=n.value)==null?void 0:E.length)<=4,"minimal-size":o.value&&((L=n.value)==null?void 0:L.length)<=3})},[(m(!0),N(ee,null,fe(n.value,(D,c)=>(m(),K(se,{grid:o.value,target:n.value,"nft-id":D,h:g.winners[c].hash,k:g.winners[c].timestamp,w:g.winners[c].wallet},null,8,["grid","target","nft-id","h","k","w"]))),256))],2)),b.value&&b.value.paginaActual?(m(),N("section",xe)):(m(),N("section",Pe))],64)}}},oe=G(Le,[["__scopeId","data-v-a2f950ee"]]);const O=T=>(ie("data-v-a8bb3882"),T=T(),re(),T),Ce={class:"event"},Ne={key:0,class:"title"},Me=O(()=>d("span",{class:"title-left-section"}," Evento de Sorteo Diario ",-1)),$e={class:"sidebar"},Ae={key:0,id:"list-options"},Ee={class:"lbl-left"},Fe=O(()=>d("img",{src:ue,alt:"matic-logo-banance",class:"matic-logo-banance"},null,-1)),Be={class:"lbl-left"},De=O(()=>d("img",{src:ue,alt:"matic-logo-banance",class:"matic-logo-banance"},null,-1)),We={class:"in-col p-1 li-sort"},Re=O(()=>d("span",null,"Proximo Sorteo",-1)),ze={class:"p-1-lr"},Je={__name:"EventPage",setup(T,{expose:R}){const _=ve.useToast(),w=f("syncTmineTotalSupply"),B=f("addTmineToMetamask");f("executeSelectWinner"),f("resetTimeEventDaily"),f("selectWinnerSorteo");const x=f("getCostoInSorteo"),I=f("addMeToSorteo"),S=new ce,o=U(),M=p(1),s=p(null),g=p(10),P=p(null),$=()=>{var i=1,r=confetti.shapeFromText({text:"ðŸ’Ž",scalar:i});confetti({particleCount:100,spread:180,shapes:[r]})},n=async()=>{var i,r,E,L,D;try{const c=await I();_.open({message:"Registro procesado satisfactoriamente.",type:"success",position:"top-right"})}catch(c){console.log({e:c}),c!=null&&c.reason?_.open({message:c.reason,type:"error",position:"top-right"}):(E=(r=(i=c==null?void 0:c.info)==null?void 0:i.error)==null?void 0:r.data)!=null&&E.message&&((D=(L=c==null?void 0:c.info)==null?void 0:L.error)==null?void 0:D.code)==-32603&&_.open({message:"Gas insuficiente",type:"error",position:"top-right"})}},h=()=>{if(o.web3.nftTokensIds.length==0)return{elementosPagina:[],totalPaginas:1,paginaActual:1};const i=JSON.parse(JSON.stringify(o.web3.nftTokensIds)),r=S.arrayPaginator(i,g.value,M.value);return s.value=r.totalPaginas,console.log({dataFormat:r}),r},b=()=>{M.value<s.value&&(M.value++,l.value=h()),console.log("nextPage",M.value)},l=p(h()),A=()=>{var i;return(i=o==null?void 0:o.web3)!=null&&i.participantsInSorteo&&o.web3.participantsInSorteo.length==0?[]:o.web3.participantsInSorteo?o.web3.participantsInSorteo.flatMap(r=>r.substring(0,7)+"    ......    "+r.slice(-7)):[]};J(()=>o.web3.nftTokensIds,async i=>{i&&(h(),w(),P.value=await x())});const u=[];return H(async()=>{P.value=await x(),console.log({costoSorteo:P}),w()}),R({data:u,mainStore:o,currentPage:l,nextPage:b,ContainerEventList:oe,addTmineToMetamask:B,shooterConfetti:$,CountdownComponent:ae,ButtomComponent:V,registerInSorteo:n,ScrollAreaComponent:ne,formatWallets:A,costoSorteo:P}),(i,r)=>(m(),N("main",Ce,[C(o).connected&&C(o).web3?(m(),N("h1",Ne,[Me,y(" Topacio Nft's Listado de Fargmentos Liberados ðŸ’Ž / Holders actuales: "+k(C(o).web3.holdersCount),1)])):F("",!0),d("section",$e,[C(o).connected?(m(),N("ul",Ae,[d("li",null,[d("label",Ee,[y(" Mi Balance "),d("span",null,[y(k(C(o).web3.balanceFormat)+" ",1),Fe,y(" MATIC ")])])]),d("li",null,[d("label",Be,[y(" PATICIPACIÃ“N "),d("span",null,[y(k(P.value)+" ",1),De,y(" MATIC ")])])]),d("li",We,[Re,W(ae,{dateTarget:C(o).web3.dateNextSorteo},null,8,["dateTarget"]),W(V,{class:"bnt1",onClick:n},{default:z(()=>[y("Participar")]),_:1}),W(V,{class:"btn3 p-1 no-cursor"},{default:z(()=>[y("Participantes en dia: "+k(C(o).web3.participantsInSorteo.length),1)]),_:1})]),d("li",ze,[W(ne,{title:"Participando para sorteo",items:A(),showKey:!0},null,8,["items"])])])):F("",!0)]),C(o).connected?(m(),K(oe,{key:1})):F("",!0)]))}},Ge=G(Je,[["__scopeId","data-v-a8bb3882"]]);export{Ge as default};
