import{_ as ee,q as ne,r as p,u as q,s as oe,o as ae,a as v,g as m,d as s,e as U,t as I,l as A,v as se,x as le,y as P,S as O,z as re,p as ie,b as ce,j as S,A as G,f as j,k as C,m as L,w as z,F as D,B as te,C as ue,c as de,h as ve}from"./index-a4fe991c.js";import{e as F,_ as fe}from"./Paginator.vue_vue_type_style_index_0_lang-934527d9.js";import{_ as me}from"./Tmine2-25d51798.js";import{_ as Q}from"./Paginator.vue_vue_type_script_setup_true_lang-20abfb30.js";const ge="/img/update-meta.svg",_e="/img/fly-svgrepo-com.svg",pe="/img/claim_.svg";const we={name:"SendNFT",props:["show","idtarget"],emits:["closeModalSend"],setup(k,{emit:g}){const{show:h,idtarget:l}=ne(k),u=p(!1),i=p(""),f=q();oe(()=>{i.value="",u.value=!1}),ae(()=>{u.value=!1,i.value=""});const w=()=>{i.value="",u.value=!1,g("closeModalSend",!0)};return{store:f,show:h,closeModal:w,confirmSend:async()=>{u.value=!0;const x=i.value.toString().trim().replaceAll("	",""),y=O.mixin({toast:!0,position:"top-end",showConfirmButton:!1,timer:3e3,timerProgressBar:!0,didOpen:c=>{c.addEventListener("mouseenter",O.stopTimer),c.addEventListener("mouseleave",O.resumeTimer)}});if(!re(x))return u.value=!1,w(),y.fire({icon:"error",title:"Wallet is no valid"});const n=l.value;g("transferNFT",{w:x,id:n})},loading:u,wallet:i}}},J=k=>(ie("data-v-5e478752"),k=k(),ce(),k),he={class:"modal-container"},ye={class:"Cabecera"},be={class:"Contenido"},ke={key:0,class:"loader-interno"},Te={key:1,class:"group"},Se=J(()=>s("span",{class:"highlight"},null,-1)),xe=J(()=>s("span",{class:"bar"},null,-1)),Ne=J(()=>s("label",null,"Wallet destine",-1)),Ie={class:"Bootonera"};function Ce(k,g,h,l,u,i){return v(),m("section",{class:P({"modal-t":!0,"show-modal":l.show,"hide-modal":!l.show})},[s("div",he,[s("div",ye,[U(" SEND NFT ðŸ”– "+I(h.idtarget)+" ",1),s("button",{class:"close",onClick:g[0]||(g[0]=(...f)=>l.closeModal&&l.closeModal(...f))},"âœ–")]),s("div",be,[l.loading?(v(),m("div",ke)):A("",!0),l.loading?A("",!0):(v(),m("div",Te,[se(s("input",{type:"text","onUpdate:modelValue":g[1]||(g[1]=f=>l.wallet=f),required:""},null,512),[[le,l.wallet]]),Se,xe,Ne]))]),s("div",Ie,[l.loading?A("",!0):(v(),m("span",{key:0,class:"btn-send",onClick:g[2]||(g[2]=(...f)=>l.confirmSend&&l.confirmSend(...f))},"CONFIRM"))])])],2)}const Le=ee(we,[["render",Ce],["__scopeId","data-v-5e478752"]]);const Pe={class:"header-card"},Me=["href"],Fe=s("img",{class:"img-link-polygon",src:fe,alt:"logo matic"},null,-1),Ae={class:"content-card"},Be={key:0,class:"title-gem"},$e={key:1,class:"footer-card"},Ee={class:"nft-number nft-reward-tmine"},ze=s("img",{src:me,alt:"tmine logo",class:"img-logo-tmine"},null,-1),Ge={key:2,class:"snippet","data-title":"dot-flashing"},Re=s("div",{class:"stage"},[s("div",{class:"dot-flashing"})],-1),Ve=[Re],Z={__name:"nftItemGallery",props:["nftId","grid","target"],setup(k,{expose:g}){const h=k,l=S("getDataNFT"),u=S("getLinkNftScan"),i=S("toVault"),f=S("syncBalance"),w=S("syncTmineBalance"),B=S("claimReward"),x=S("transferNFT"),y=S("refreshTokens"),n=p(h.nftId),c=p(!1),a=p(null),R=p(null),_=p(!1),T=p(!1),r=q(),$=G(()=>a.value&&a.value.metadata&&a.value.metadata.attributes?a.value.metadata.attributes.flatMap(e=>({type:e.trait_type,value:e.value})):[]),M=G(()=>a.value.metadata&&a.value.metadata.name&&a.value.metadata.name.length>25?a.value.metadata.name.replace("Fragment ",""):a.value.metadata.name),V=()=>{T.value=!0},W=async({w:e,id:t})=>{console.log("toTransferNFT",{w:e,id:t});let o=null;console.time("transfer");try{o=await x(e,t)}catch(d){console.log({e:d,resp:o})}console.timeEnd("transfer"),console.log("transferNFT * ",{resp:o}),await f(),await w(),await y(),console.log({modalSend:R,resp:o}),!(o!=null&&o.blockNumber)||o===null?R.value.loading=!1:T.value=!1},H=async()=>{c.value=!0;const e=parseInt(n.value),t=await l(e);t.id&&t.id===n.value&&(a.value=t,r.web3.nftLoad[e]=t),await f(),await w(),setTimeout(()=>{c.value=!1},2e3)},N=G(()=>{const e=parseInt(n.value);return r.web3.nftLoad[e]!==void 0}),X=async()=>{const e=parseInt(n.value);if(await B(e)===!0){await f(),await w(),console.log("* toClaim ok");const o=await l(e);o.id&&o.id===n.value&&e&&(a.value=o,r.web3.nftLoad[e]=o)}},Y=G(()=>{var o,d,E,b;const e=parseInt(n.value),t=h.grid&&h.grid&&h.target.length>7?"cover":"150% 100%";return(d=(o=a==null?void 0:a.value)==null?void 0:o.metadata)!=null&&d.image&&console.log("* img",a.value.metadata.image),r.web3.nftLoad[e]!==void 0&&((b=(E=a==null?void 0:a.value)==null?void 0:E.metadata)!=null&&b.image)?`
	--crt:#fff;
    background-image: url(${a.value.metadata.image});
    background-position: center;
    background-repeat: no-repeat;
    background-size: ${t};`:""}),K=e=>{const t=e.target,o=e.pageX-t.offsetLeft,d=e.pageY-t.offsetTop;t.style.setProperty("--x",o+"px"),t.style.setProperty("--y",d+"px")};return j(N,async e=>{if(e&&(console.log(e,"*existInLoad",r.web3.nftLoad[n.value]!==void 0,n.value,a.value),e&&!a.value)){const t=parseInt(n.value),o=await l(t);o.id&&o.id===n.value&&(a.value=o),console.log({resp:o})}}),j(()=>h.nftId,async function(e){var t;if(n.value=e,a.value=null,console.log("w",e,N.value,r.web3.nftLoad[e]),!N.value&&!r.web3.nftLoad[e]){const o=parseInt(n.value);console.log("*startSearch");const d=await l(o);d.id&&d.id===n.value&&(a.value=d,r.web3.nftLoad[o]=d),console.log("* meta",a.value,{data:d})}r.web3.nftLoad[e],((t=r.web3.nftLoad[e])==null?void 0:t.id)===e&&(a.value=r.web3.nftLoad[e])}),ae(async()=>{const e=parseInt(n.value),t=await l(e);t.id&&t.id===n.value&&r.web3.nftLoad[e]&&(a.value=t,r.web3.nftLoad[e]=t),t&&!r.web3.nftLoad[n.value]&&(a.value=t,r.web3.nftLoad[n.value]=t)}),g({nftId:n,existInLoad:N,mainStore:r,getBgNft:Y,getLinkNftScan:u,moseMoveInCard:K,toClaim:X,loadRedresh:c,toRefresh:H,showModalSedNft:T,toSend:V,toTransferNFT:W,Popper:F,toVault:i,showDetails:_,getProperties:$,titleFormat:M}),(e,t)=>{var o,d,E;return v(),m(D,null,[s("div",{class:P({"nft-item":!0,"loader-bg":!N.value}),style:ue(Y.value),onMousemove:K},[s("div",Pe,[s("a",{href:C(u)(n.value),target:"_blank"},[U("# "+I(n.value)+" ",1),L(C(F),{content:"Examinar en Polygonscan",arrow:!0,hover:!0},{default:z(()=>[Fe]),_:1})],8,Me),L(C(F),{content:"Atributos de Nft",arrow:!0,hover:!0},{default:z(()=>[s("i",{class:"fa-solid fa-circle-info icon-info",onClick:t[0]||(t[0]=b=>_.value=!_.value)})]),_:1}),L(C(F),{content:"Actualizar Metadata",arrow:!0,hover:!0},{default:z(()=>[s("img",{src:ge,class:P({"icon-update-meta":!0,"loading-refresh":c.value}),onClick:H},null,2)]),_:1})]),s("div",{class:P({"details-attributes":!0,active:_.value})},[s("ul",null,[(v(!0),m(D,null,te($.value,b=>(v(),m("li",{class:P({colorEpic:b.type=="Staking"&&b.value>=4,colorEpicRarity:b.value=="epic"})},I(b.type)+" : "+I(b.value),3))),256)),s("li",null,I(M.value),1)])],2),s("div",Ae,[L(C(F),{content:"Enviar NFT",arrow:!0,hover:!0,placement:"top"},{default:z(()=>[s("img",{src:_e,onClick:V})]),_:1})]),(d=(o=a.value)==null?void 0:o.metadata)!=null&&d.name&&!_.value?(v(),m("div",Be,I(M.value),1)):A("",!0),(E=a.value)!=null&&E.reward&&N.value&&!c.value?(v(),m("div",$e,[s("label",Ee,[ze,U(" "+I(a.value.reward)+" TMINE ",1)]),L(C(F),{content:"Hacer Claim de TMINE",hover:!0},{default:z(()=>[s("img",{src:pe,onClick:X,class:"icon-reward-claim"})]),_:1})])):A("",!0),!N.value||c.value?(v(),m("div",Ge,Ve)):A("",!0)],38),L(Le,{show:T.value,idtarget:n.value,onCloseModalSend:t[1]||(t[1]=b=>T.value=!1),onTransferNFT:W,ref_key:"modalSend",ref:R},null,8,["show","idtarget"])],64)}}};const De={key:0,class:"paginator"},Oe={class:"slot-btn btn-grid"},Ue={key:1,class:"paginator"},je={__name:"ContainerGallery",setup(k,{expose:g}){const h=new ve,l=q(),u=p(1),i=p(!1),f=p(null),w=p(5),B=_=>{u.value=_,n()},x=()=>{i.value=!i.value,i.value?w.value=10:w.value=5,c.value=n()},y=G(()=>n().elementosPagina),n=()=>{const _=JSON.parse(JSON.stringify(l.web3.nftTokensIds)),T=h.arrayPaginator(_,w.value,u.value);return f.value=T.totalPaginas,T},c=p(n()),a=()=>{u.value<f.value&&(u.value++,c.value=n()),console.log("nextPage",u.value)};return j(()=>l.web3.nftTokensIds,_=>{_&&(c.value=n())}),g({data:[],mainStore:l,currentPage:c,nextPage:a,nftItemGallery:Z,getCurrentTarget:y,multiGrid14:i,changeToMultigrid:x,Paginator:Q,updatePage:B,amountPerPage:w}),(_,T)=>{var r,$,M;return v(),m(D,null,[s("section",{class:P({content:!0,"multi-grid-14":i.value,lessMinimal:y.value&&((r=y.value)==null?void 0:r.length)&&(($=y.value)==null?void 0:$.length)<=4,"minimal-size":i.value&&((M=y.value)==null?void 0:M.length)<=3})},[(v(!0),m(D,null,te(y.value,V=>(v(),de(Z,{grid:i.value,target:y.value,"nft-id":V},null,8,["grid","target","nft-id"]))),256))],2),c.value&&c.value.paginaActual?(v(),m("section",De,[s("span",Oe,[s("i",{class:P({"fas fa-th icon-grid":!0,active:i.value}),style:{color:"#ffffff"},onClick:x},null,2)]),L(Q,{currentPage:c.value,total:C(l).web3.nftTokensIds.length,amountPerPage:w.value,onUpdate:B},null,8,["currentPage","total","amountPerPage"])])):(v(),m("section",Ue))],64)}}},Xe=ee(je,[["__scopeId","data-v-755e7290"]]);export{Xe as C};
