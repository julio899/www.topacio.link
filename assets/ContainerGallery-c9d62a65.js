import{_ as ne,s as se,r as p,u as W,k as re,o as oe,a as d,g as m,d as l,e as J,t as L,m as F,v as ie,x as ue,y as N,S as j,z as ce,p as de,b as ve,j as S,A as V,f as O,l as P,n as M,w as G,F as U,B as le,C as fe,c as ge,h as me}from"./index-5f8dab36.js";import{e as $,_ as _e}from"./Paginator.vue_vue_type_style_index_0_lang-cce54337.js";import{_ as pe}from"./Tmine2-25d51798.js";import{_ as ae}from"./Paginator.vue_vue_type_script_setup_true_lang-309fb4a0.js";const we="/img/update-meta.svg",ye="/img/fly-svgrepo-com.svg",he="/img/claim_.svg";const be={name:"SendNFT",props:["show","idtarget"],emits:["closeModalSend"],setup(k,{emit:w}){const{show:y,idtarget:s}=se(k),v=p(!1),u=p(""),_=W();re(()=>{u.value="",v.value=!1}),oe(()=>{v.value=!1,u.value=""});const h=()=>{u.value="",v.value=!1,w("closeModalSend",!0)};return{store:_,show:y,closeModal:h,confirmSend:async()=>{v.value=!0;const C=u.value.toString().trim().replaceAll("	",""),f=j.mixin({toast:!0,position:"top-end",showConfirmButton:!1,timer:3e3,timerProgressBar:!0,didOpen:c=>{c.addEventListener("mouseenter",j.stopTimer),c.addEventListener("mouseleave",j.resumeTimer)}});if(!ce(C))return v.value=!1,h(),f.fire({icon:"error",title:"Wallet is no valid"});const o=s.value;w("transferNFT",{w:C,id:o})},loading:v,wallet:u}}},q=k=>(de("data-v-5e478752"),k=k(),ve(),k),ke={class:"modal-container"},Te={class:"Cabecera"},xe={class:"Contenido"},Se={key:0,class:"loader-interno"},Ne={key:1,class:"group"},Ce=q(()=>l("span",{class:"highlight"},null,-1)),Ie=q(()=>l("span",{class:"bar"},null,-1)),Le=q(()=>l("label",null,"Wallet destine",-1)),Pe={class:"Bootonera"};function Me(k,w,y,s,v,u){return d(),m("section",{class:N({"modal-t":!0,"show-modal":s.show,"hide-modal":!s.show})},[l("div",ke,[l("div",Te,[J(" SEND NFT ðŸ”– "+L(y.idtarget)+" ",1),l("button",{class:"close",onClick:w[0]||(w[0]=(..._)=>s.closeModal&&s.closeModal(..._))},"âœ–")]),l("div",xe,[s.loading?(d(),m("div",Se)):F("",!0),s.loading?F("",!0):(d(),m("div",Ne,[ie(l("input",{type:"text","onUpdate:modelValue":w[1]||(w[1]=_=>s.wallet=_),required:""},null,512),[[ue,s.wallet]]),Ce,Ie,Le]))]),l("div",Pe,[s.loading?F("",!0):(d(),m("span",{key:0,class:"btn-send",onClick:w[2]||(w[2]=(..._)=>s.confirmSend&&s.confirmSend(..._))},"CONFIRM"))])])],2)}const Fe=ne(be,[["render",Me],["__scopeId","data-v-5e478752"]]);const $e={class:"header-card"},Ae=["href"],Be=l("img",{class:"img-link-polygon",src:_e,alt:"logo matic"},null,-1),Ee={class:"content-card-item-galery"},Re={key:0,class:"title-gem"},ze={key:1,class:"footer-card"},Ge=l("img",{src:pe,alt:"tmine logo",class:"img-logo-tmine"},null,-1),Ve={key:2,class:"snippet","data-title":"dot-flashing"},De=l("div",{class:"stage"},[l("div",{class:"dot-flashing"})],-1),Oe=[De],te={__name:"nftItemGallery",props:["nftId","grid","target"],setup(k,{expose:w}){const y=S("getDataNFT"),s=S("getLinkNftScan"),v=S("toVault"),u=S("syncBalance"),_=S("syncTmineBalance"),h=S("claimReward"),A=S("transferNFT"),C=S("refreshTokens"),f=k,o=p(f.nftId),c=p(!1),t=p(null),D=p(null),r=p(!1),T=p(!1),x=p(!1),i=W(),B=V(()=>t.value&&t.value.metadata&&t.value.metadata.attributes?t.value.metadata.attributes.flatMap(a=>({type:a.trait_type,value:a.value})):[]),E=V(()=>{var a,e,n;return(a=t==null?void 0:t.value)!=null&&a.metadata&&((n=(e=t==null?void 0:t.value)==null?void 0:e.metadata)!=null&&n.name)&&t.value.metadata.name.length>25?t.value.metadata.name.replace("Fragment ",""):t.value.metadata.name}),H=()=>{x.value=!0},X=async({w:a,id:e})=>{console.log("toTransferNFT",{w:a,id:e});let n=null;console.time("transfer");try{n=await A(a,e)}catch(g){console.log({e:g,resp:n})}console.timeEnd("transfer"),console.log("transferNFT * ",{resp:n}),await u(),await _(),await C(),console.log({modalSend:D,resp:n}),!(n!=null&&n.blockNumber)||n===null?D.value.loading=!1:x.value=!1},Y=async()=>{c.value=!0;const a=parseInt(o.value),e=await y(a);e!=null&&e.id&&e.id===o.value&&(t.value=e,i.web3.nftLoad[a]=e),await u(),await _(),setTimeout(()=>{c.value=!1},2e3)},I=V(()=>{const a=parseInt(o.value);return i.web3.nftLoad[a]!==void 0}),K=async()=>{const a=parseInt(o.value);if(await h(a)===!0){await u(),await _(),console.log("* toClaim ok");const n=await y(a);n.id&&n.id===o.value&&a&&(t.value=n,i.web3.nftLoad[a]=n)}},Q=V(()=>{var n,g,R,z;const a=parseInt(o.value),e=f.grid&&f.grid&&f.target.length>7?"cover":"190% 100%";return(g=(n=t==null?void 0:t.value)==null?void 0:n.metadata)!=null&&g.image&&console.log("* img",t.value.metadata.image),i.web3.nftLoad[a]!==void 0&&((z=(R=t==null?void 0:t.value)==null?void 0:R.metadata)!=null&&z.image)?`
	--crt:#fff;
    background-image: url(${t.value.metadata.image});
    background-position: center;
    background-repeat: no-repeat;
    background-size: ${e};`:""}),Z=a=>{const e=a.target,n=a.pageX-e.offsetLeft,g=a.pageY-e.offsetTop;e.style.setProperty("--x",n+"px"),e.style.setProperty("--y",g+"px")};return O(I,async a=>{if(a&&(console.log(a,"*existInLoad",i.web3.nftLoad[o.value]!==void 0,o.value,t.value),a&&!t.value)){const e=parseInt(o.value),n=await y(e);n.id&&n.id===o.value&&(t.value=n),console.log({resp:n})}}),O(()=>i.web3.blockNumber,async function(a){T.value=!0;const e=parseInt(o.value),n=await y(e);n!=null&&n.id&&n.id===o.value&&(t.value=n,i.web3.nftLoad[e]=n),T.value=!1}),O(()=>f.nftId,async function(a){var e;if(o.value=a,t.value=null,console.log("w",a,I.value,i.web3.nftLoad[a]),!I.value&&!i.web3.nftLoad[a]){const n=parseInt(o.value);console.log("*startSearch");const g=await y(n);g.id&&g.id===o.value&&(t.value=g,i.web3.nftLoad[n]=g),console.log("* meta",t.value,{data:g})}i.web3.nftLoad[a],((e=i.web3.nftLoad[a])==null?void 0:e.id)===a&&(t.value=i.web3.nftLoad[a])}),oe(async()=>{const a=parseInt(o.value),e=await y(a);console.log({resp:e,idAuxiliar:a},o.value),e&&o&&e.id&&e.id===o.value&&i.web3.nftLoad[a]&&(t.value=e,i.web3.nftLoad[a]=e),e&&!i.web3.nftLoad[o.value]&&(t.value=e,i.web3.nftLoad[o.value]=e)}),w({upReward:T,nftId:o,existInLoad:I,mainStore:i,getBgNft:Q,getLinkNftScan:s,moseMoveInCard:Z,toClaim:K,loadRedresh:c,toRefresh:Y,showModalSedNft:x,toSend:H,toTransferNFT:X,Popper:$,toVault:v,showDetails:r,getProperties:B,titleFormat:E}),(a,e)=>{var n,g,R,z,ee;return d(),m(U,null,[l("div",{class:N({"nft-item":!0,"loader-bg":!I.value}),style:fe(Q.value),onMousemove:Z},[l("div",$e,[l("a",{href:P(s)(o.value),target:"_blank"},[J("# "+L(o.value)+" ",1),M(P($),{content:"Examinar en Polygonscan",arrow:!0,hover:!0},{default:G(()=>[Be]),_:1})],8,Ae),M(P($),{content:"Atributos de Nft",arrow:!0,hover:!0},{default:G(()=>[l("i",{class:"fa-solid fa-circle-info icon-info",onClick:e[0]||(e[0]=b=>r.value=!r.value)})]),_:1}),M(P($),{content:"Actualizar Metadata",arrow:!0,hover:!0},{default:G(()=>[l("img",{src:we,class:N({"icon-update-meta":!0,"loading-refresh":c.value}),onClick:Y},null,2)]),_:1})]),l("div",{class:N({"details-attributes":!0,active:r.value}),onClick:e[4]||(e[4]=b=>r.value=!r.value)},[l("ul",{onClick:e[3]||(e[3]=b=>r.value=!r.value)},[(d(!0),m(U,null,le(B.value,b=>(d(),m("li",{onClick:e[1]||(e[1]=qe=>r.value=!r.value),class:N({colorEpic:b.type=="Staking"&&b.value>=4,colorEpicRarity:b.value=="epic"})},L(b.type)+" : "+L(b.value),3))),256)),t.value&&((g=(n=t.value)==null?void 0:n.metadata)!=null&&g.name)?(d(),m("li",{key:0,onClick:e[2]||(e[2]=b=>r.value=!r.value)},L(E.value),1)):F("",!0)])],2),l("div",Ee,[M(P($),{content:"Enviar NFT",arrow:!0,hover:!0,placement:"top"},{default:G(()=>[l("img",{src:ye,onClick:H})]),_:1})]),t.value&&((z=(R=t.value)==null?void 0:R.metadata)!=null&&z.name)&&!r.value?(d(),m("div",Re,L(E.value),1)):F("",!0),(ee=t.value)!=null&&ee.reward&&I.value&&!c.value?(d(),m("div",ze,[l("label",{class:N({"nft-number nft-reward-tmine":!0,blink_me:T.value})},[Ge,J(" "+L(t.value.reward)+" TMINE ",1)],2),M(P($),{content:"Hacer Claim de TMINE",hover:!0},{default:G(()=>[l("img",{src:he,onClick:K,class:"icon-reward-claim"})]),_:1})])):F("",!0),!I.value||c.value?(d(),m("div",Ve,Oe)):F("",!0)],38),M(Fe,{show:x.value,idtarget:o.value,onCloseModalSend:e[5]||(e[5]=b=>x.value=!1),onTransferNFT:X,ref_key:"modalSend",ref:D},null,8,["show","idtarget"])],64)}}};const Ue={key:0,class:"paginator"},je={class:"slot-btn btn-grid"},Je={key:1,class:"paginator"},We={__name:"ContainerGallery",setup(k,{expose:w}){const y=new me,s=W(),v=p(1),u=p(!1),_=p(null),h=p(5),A=r=>{v.value=r,o()},C=()=>{u.value=!u.value,u.value?h.value=10:h.value=5,c.value=o()},f=V(()=>o().elementosPagina),o=()=>{const r=JSON.parse(JSON.stringify(s.web3.nftTokensIds)),T=y.arrayPaginator(r,h.value,v.value);return _.value=T.totalPaginas,T},c=p(o()),t=()=>{v.value<_.value&&(v.value++,c.value=o()),console.log("nextPage",v.value)};return O(()=>s.web3.nftTokensIds,r=>{r&&(c.value=o())}),w({data:[],mainStore:s,currentPage:c,nextPage:t,nftItemGallery:te,getCurrentTarget:f,multiGrid14:u,changeToMultigrid:C,Paginator:ae,updatePage:A,amountPerPage:h}),(r,T)=>{var x,i,B;return d(),m(U,null,[l("section",{class:N({content:!0,"multi-grid-14":u.value,lessMinimal:f.value&&((x=f.value)==null?void 0:x.length)&&((i=f.value)==null?void 0:i.length)<=4,"minimal-size":u.value&&((B=f.value)==null?void 0:B.length)<=3})},[(d(!0),m(U,null,le(f.value,E=>(d(),ge(te,{grid:u.value,target:f.value,"nft-id":E},null,8,["grid","target","nft-id"]))),256))],2),c.value&&c.value.paginaActual?(d(),m("section",Ue,[l("span",je,[l("i",{class:N({"fas fa-th icon-grid":!0,active:u.value}),style:{color:"#ffffff"},onClick:C},null,2)]),M(ae,{currentPage:c.value,total:P(s).web3.nftTokensIds.length,amountPerPage:h.value,onUpdate:A},null,8,["currentPage","total","amountPerPage"])])):(d(),m("section",Je))],64)}}},Qe=ne(We,[["__scopeId","data-v-2230249b"]]);export{Qe as C};
