import{e as k,_ as O}from"./Paginator.vue_vue_type_style_index_0_lang-e4bfe9d1.js";import{_ as W,j as l,r as w,u as G,A as T,f as z,o as H,a as d,g as m,d as u,k as c,e as C,t as b,m as E,w as F,F as X,C as Y,l as x,B as j,y as Q,p as q,b as J,c as D}from"./index-41a5e7fe.js";import{_ as U}from"./Tmine2-25d51798.js";const K=v=>(q("data-v-6e17f2bf"),v=v(),J(),v),Z={class:"header-card"},ee=["href"],te=K(()=>u("img",{class:"img-link-polygon",src:O,alt:"logo matic"},null,-1)),ae={key:0,class:"detaills-gem"},ne={key:1,class:"title-gem"},oe={key:0,class:"footer-card"},se={class:"nft-number nft-reward-tmine"},le={key:0,class:"snippet","data-title":"dot-flashing"},re=K(()=>u("div",{class:"stage"},[u("div",{class:"dot-flashing"})],-1)),ce=[re],ie={__name:"nftItemBoveda",props:["nftId","grid","target","h"],setup(v,{expose:A}){const i=v,g=l("getDataNFT"),B=l("getLinkNftScan"),h=l("toVault"),L=l("claimVault");l("syncBalance"),l("syncTmineBalance"),l("claimReward"),l("transferNFT"),l("refreshTokens");const N=l("getNFTVault");l("tmineAddAllowance");const n=w(i.nftId),f=w(!1),e=w(null);w(null);const _=w(null),s=G(),p=T(()=>{const t=parseInt(n.value);return s.web3.nftLoad[t]!==void 0}),S=T(()=>e.value.metadata&&e.value.metadata.attributes?e.value.metadata.attributes.flatMap(t=>({type:t.trait_type,value:t.value})):[]),M=T(()=>e.value.metadata&&e.value.metadata.name&&e.value.metadata.name.length>25?e.value.metadata.name.replace("Fragment ",""):e.value.metadata.name),V=T(()=>{var a,o,r,y;const t=parseInt(n.value);return(o=(a=e==null?void 0:e.value)==null?void 0:a.metadata)!=null&&o.image&&console.log("* img",e.value.metadata.image),s.web3.nftLoad[t]!==void 0&&((y=(r=e==null?void 0:e.value)==null?void 0:r.metadata)!=null&&y.image)?`
	--crt:#fff;
    background-image: url(${e.value.metadata.image});
    background-position: center;
    background-repeat: no-repeat;
    background-size: cover;
    display: flex;
    flex-flow: column;
    justify-content: space-between;
    `:""}),$=t=>{const a=t.target,o=t.pageX-a.offsetLeft,r=t.pageY-a.offsetTop;a.style.setProperty("--x",o+"px"),a.style.setProperty("--y",r+"px")};return z(p,async t=>{if(t&&(console.log(t,"*existInLoad",s.web3.nftLoad[n.value]!==void 0,n.value,e.value),t&&!e.value)){const a=parseInt(n.value),o=await g(a);o.id&&o.id===n.value&&(e.value=o),console.log({resp:o})}}),z(()=>i.nftId,async function(t){var a;if(n.value=t,e.value=null,console.log("w",t,p.value,s.web3.nftLoad[t]),!p.value&&!s.web3.nftLoad[t]){const o=parseInt(n.value);console.log("*startSearch");const r=await g(o);r.id&&r.id===n.value&&(e.value=r,s.web3.nftLoad[o]=r),console.log("* meta",e.value,{data:r})}s.web3.nftLoad[t],((a=s.web3.nftLoad[t])==null?void 0:a.id)===t&&(e.value=s.web3.nftLoad[t])}),H(async()=>{const t=parseInt(n.value),a=await g(t);_.value=await N(t),a.id&&a.id===n.value&&s.web3.nftLoad[t]&&(e.value=a,s.web3.nftLoad[t]=a),a&&!s.web3.nftLoad[n.value]&&(e.value=a,s.web3.nftLoad[n.value]=a)}),A({nftId:n,existInLoad:p,mainStore:s,getBgNft:V,getLinkNftScan:B,moseMoveInCard:$,loadRedresh:f,Popper:k,toVault:h,dataItem:_,claimVault:L,getProperties:S,titleFormat:M}),(t,a)=>{var o,r,y,P;return d(),m("div",{class:Q({"nft-item":!0,"loader-bg":!p.value}),style:j(`height: ${i.h}px;`),onMousemove:$},[u("div",{class:"content-card",style:j(V.value)},[u("div",Z,[u("a",{href:c(B)(n.value),target:"_blank"},[C("# "+b(n.value)+" ",1),E(c(k),{content:"Examinar en Polygonscan",arrow:!0,hover:!0},{default:F(()=>[te]),_:1})],8,ee)]),(r=(o=e.value)==null?void 0:o.metadata)!=null&&r.attributes?(d(),m("div",ae,[(d(!0),m(X,null,Y(S.value,I=>(d(),m("ul",null,[u("li",null,b(I.type)+" : "+b(I.value),1)]))),256))])):x("",!0),(P=(y=e.value)==null?void 0:y.metadata)!=null&&P.name?(d(),m("div",ne,b(M.value),1)):x("",!0),E(c(k),{content:"Exatraer Fragmento",arrow:!1,hover:!0,zIndex:"10000"},{default:F(()=>{var I;return[(I=_.value)!=null&&I.priceW&&p.value&&!f.value?(d(),m("div",oe,[u("label",se,[u("img",{class:"img-logo-tmine",src:U,alt:"tmine logo",onClick:a[0]||(a[0]=_e=>c(L)(n.value,_.value.priceW))}),C(" "+b(_.value.price)+" TMINE ",1)])])):x("",!0)]}),_:1})],4),!p.value||f.value?(d(),m("div",le,ce)):x("",!0)],38)}}},R=W(ie,[["__scopeId","data-v-6e17f2bf"]]);const de=v=>(q("data-v-81985064"),v=v(),J(),v),ue={class:"content container-items"},ve=de(()=>u("i",{class:"fa-solid fa-chevron-up icon-alloance"},null,-1)),fe={__name:"ContainerBoveda",setup(v,{expose:A}){const i=G(),g=w(!1),B=l("getNFTsBoveda");l("tmineCheckAllowanceBoveda");const h=l("incrementAllowanceInBoveda"),L=[];function N(f,e){return f=Math.ceil(f),e=Math.floor(e),Math.floor(Math.random()*(e-f+1))+f}const n=()=>N(280,500);return H(async()=>{await B(),console.log("tokens",i.web3.bovedaTokens)}),A({data:L,getHeight:n,nftItemBoveda:R,multiGrid14:g,Popper:k,incrementAllowanceInBoveda:h,mainStore:i}),(f,e)=>(d(),m("main",ue,[c(i).connected&&!c(i).web3.bovedaAlloance||c(i).web3.bovedaAlloance==0?(d(),D(c(k),{key:0,content:"Incrementar TMine permitido para Boveda",arrow:!1,hover:!0,zIndex:"10000"},{default:F(()=>[u("span",{class:"amountAlloance",onClick:e[0]||(e[0]=(..._)=>c(h)&&c(h)(..._))},[C(b(c(i).web3.bovedaAlloance),1),ve])]),_:1})):x("",!0),(d(!0),m(X,null,Y(c(i).web3.bovedaTokens,_=>(d(),D(R,{grid:g.value,target:c(i).web3.bovedaTokens,"nft-id":_,h:n()},null,8,["grid","target","nft-id","h"]))),256))]))}},we=W(fe,[["__scopeId","data-v-81985064"]]);export{we as default};
