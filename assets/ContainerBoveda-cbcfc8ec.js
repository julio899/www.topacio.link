import{e as k,_ as O}from"./Paginator.vue_vue_type_style_index_0_lang-76eae1d0.js";import{_ as W,j as r,r as w,u as G,A,f as z,o as H,a as i,g as m,d as u,k as c,e as C,t as h,m as E,w as S,F as X,C as Y,l as x,B as j,y as Q,p as q,b as J,c as D}from"./index-ba7f3d67.js";import{_ as U}from"./Tmine2-25d51798.js";const K=v=>(q("data-v-e9aedc5a"),v=v(),J(),v),Z={class:"header-card"},ee=["href"],ae=K(()=>u("img",{class:"img-link-polygon",src:O,alt:"logo matic"},null,-1)),te={key:0,class:"detaills-gem"},ne={key:1,class:"title-gem"},oe={key:0,class:"footer-card"},se={class:"nft-number nft-reward-tmine"},le={key:0,class:"snippet","data-title":"dot-flashing"},re=K(()=>u("div",{class:"stage"},[u("div",{class:"dot-flashing"})],-1)),ce=[re],de={__name:"nftItemBoveda",props:["nftId","grid","target","h"],setup(v,{expose:T}){const d=v,g=r("getDataNFT"),B=r("getLinkNftScan"),y=r("toVault"),L=r("claimVault");r("syncBalance"),r("syncTmineBalance"),r("claimReward"),r("refreshTokens");const N=r("getNFTVault");r("tmineAddAllowance");const n=w(d.nftId),_=w(!1),e=w(null);w(null);const f=w(null),s=G(),p=A(()=>{const a=parseInt(n.value);return s.web3.nftLoad[a]!==void 0}),F=A(()=>e.value.metadata&&e.value.metadata.attributes?e.value.metadata.attributes.flatMap(a=>({type:a.trait_type,value:a.value})):[]),M=A(()=>e.value.metadata&&e.value.metadata.name&&e.value.metadata.name.length>25?e.value.metadata.name.replace("Fragment ",""):e.value.metadata.name),V=A(()=>{var t,o,l,b;const a=parseInt(n.value);return(o=(t=e==null?void 0:e.value)==null?void 0:t.metadata)!=null&&o.image&&console.log("* img",e.value.metadata.image),s.web3.nftLoad[a]!==void 0&&((b=(l=e==null?void 0:e.value)==null?void 0:l.metadata)!=null&&b.image)?`
	--crt:#fff;
    background-image: url(${e.value.metadata.image});
    background-position: center;
    background-repeat: no-repeat;
    background-size: cover;
    display: flex;
    flex-flow: column;
    justify-content: space-between;
    `:""}),$=a=>{const t=a.target,o=a.pageX-t.offsetLeft,l=a.pageY-t.offsetTop;t.style.setProperty("--x",o+"px"),t.style.setProperty("--y",l+"px")};return z(p,async a=>{if(a&&(console.log(a,"*existInLoad",s.web3.nftLoad[n.value]!==void 0,n.value,e.value),a&&!e.value)){const t=parseInt(n.value),o=await g(t);o.id&&o.id===n.value&&(e.value=o),console.log({resp:o})}}),z(()=>d.nftId,async function(a){var t;if(n.value=a,e.value=null,console.log("w",a,p.value,s.web3.nftLoad[a]),!p.value&&!s.web3.nftLoad[a]){const o=parseInt(n.value);console.log("*startSearch");const l=await g(o);l.id&&l.id===n.value&&(e.value=l,s.web3.nftLoad[o]=l),console.log("* meta",e.value,{data:l})}s.web3.nftLoad[a],((t=s.web3.nftLoad[a])==null?void 0:t.id)===a&&(e.value=s.web3.nftLoad[a])}),H(async()=>{const a=parseInt(n.value),t=await g(a);f.value=await N(a),t.id&&t.id===n.value&&s.web3.nftLoad[a]&&(e.value=t,s.web3.nftLoad[a]=t),t&&!s.web3.nftLoad[n.value]&&(e.value=t,s.web3.nftLoad[n.value]=t)}),T({nftId:n,existInLoad:p,mainStore:s,getBgNft:V,getLinkNftScan:B,moseMoveInCard:$,loadRedresh:_,Popper:k,toVault:y,dataItem:f,claimVault:L,getProperties:F,titleFormat:M}),(a,t)=>{var o,l,b,P;return i(),m("div",{class:Q({"nft-item":!0,"loader-bg":!p.value}),style:j(`height: ${d.h}px;`),onMousemove:$},[u("div",{class:"content-card",style:j(V.value)},[u("div",Z,[u("a",{href:c(B)(n.value),target:"_blank"},[C("# "+h(n.value)+" ",1),E(c(k),{content:"Examinar en Polygonscan",arrow:!0,hover:!0},{default:S(()=>[ae]),_:1})],8,ee)]),(l=(o=e.value)==null?void 0:o.metadata)!=null&&l.attributes?(i(),m("div",te,[(i(!0),m(X,null,Y(F.value,I=>(i(),m("ul",null,[u("li",null,h(I.type)+" : "+h(I.value),1)]))),256))])):x("",!0),(P=(b=e.value)==null?void 0:b.metadata)!=null&&P.name?(i(),m("div",ne,h(M.value),1)):x("",!0),E(c(k),{content:"Exatraer Fragmento",arrow:!1,hover:!0,zIndex:"10000"},{default:S(()=>{var I;return[(I=f.value)!=null&&I.priceW&&p.value&&!_.value?(i(),m("div",oe,[u("label",se,[u("img",{class:"img-logo-tmine",src:U,alt:"tmine logo",onClick:t[0]||(t[0]=fe=>c(L)(n.value,f.value.priceW))}),C(" "+h(f.value.price)+" TMINE ",1)])])):x("",!0)]}),_:1})],4),!p.value||_.value?(i(),m("div",le,ce)):x("",!0)],38)}}},R=W(de,[["__scopeId","data-v-e9aedc5a"]]);const ie=v=>(q("data-v-81985064"),v=v(),J(),v),ue={class:"content container-items"},ve=ie(()=>u("i",{class:"fa-solid fa-chevron-up icon-alloance"},null,-1)),_e={__name:"ContainerBoveda",setup(v,{expose:T}){const d=G(),g=w(!1),B=r("getNFTsBoveda");r("tmineCheckAllowanceBoveda");const y=r("incrementAllowanceInBoveda"),L=[];function N(_,e){return _=Math.ceil(_),e=Math.floor(e),Math.floor(Math.random()*(e-_+1))+_}const n=()=>N(280,500);return H(async()=>{await B(),console.log("tokens",d.web3.bovedaTokens)}),T({data:L,getHeight:n,nftItemBoveda:R,multiGrid14:g,Popper:k,incrementAllowanceInBoveda:y,mainStore:d}),(_,e)=>(i(),m("main",ue,[c(d).connected&&!c(d).web3.bovedaAlloance||c(d).web3.bovedaAlloance==0?(i(),D(c(k),{key:0,content:"Incrementar TMine permitido para Boveda",arrow:!1,hover:!0,zIndex:"10000"},{default:S(()=>[u("span",{class:"amountAlloance",onClick:e[0]||(e[0]=(...f)=>c(y)&&c(y)(...f))},[C(h(c(d).web3.bovedaAlloance),1),ve])]),_:1})):x("",!0),(i(!0),m(X,null,Y(c(d).web3.bovedaTokens,f=>(i(),D(R,{grid:g.value,target:c(d).web3.bovedaTokens,"nft-id":f,h:n()},null,8,["grid","target","nft-id","h"]))),256))]))}},we=W(_e,[["__scopeId","data-v-81985064"]]);export{we as default};
