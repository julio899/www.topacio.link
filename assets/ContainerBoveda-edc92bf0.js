import{_ as D,j as r,r as g,u as R,A as T,f as A,o as W,a as c,g as i,d,k as m,e as P,t as b,m as $,w as z,F as G,C as H,l as L,B as E,y as Y,p as q,b as J,c as K}from"./index-15d4b111.js";import{e as S,_ as O}from"./Paginator.vue_vue_type_style_index_0_lang-c9deeff2.js";import{_ as Q}from"./Tmine2-25d51798.js";const X=f=>(q("data-v-c0a7017e"),f=f(),J(),f),U={class:"header-card"},Z=["href"],ee=X(()=>d("img",{class:"img-link-polygon",src:O,alt:"logo matic"},null,-1)),te={key:0,class:"detaills-gem"},ae={key:1,class:"title-gem"},oe={key:0,class:"footer-card"},ne={class:"nft-number nft-reward-tmine"},se={key:0,class:"snippet","data-title":"dot-flashing"},le=X(()=>d("div",{class:"stage"},[d("div",{class:"dot-flashing"})],-1)),re=[le],ce={__name:"nftItemBoveda",props:["nftId","grid","target","h"],setup(f,{expose:B}){const v=f,p=r("getDataNFT"),x=r("getLinkNftScan"),N=r("toVault"),I=r("claimVault");r("syncBalance"),r("syncTmineBalance"),r("claimReward"),r("transferNFT"),r("refreshTokens");const k=r("getNFTVault");r("tmineAddAllowance");const a=g(v.nftId),u=g(!1),t=g(null);g(null);const y=g(null),s=R(),_=T(()=>{const e=parseInt(a.value);return s.web3.nftLoad[e]!==void 0}),C=T(()=>t.value.metadata&&t.value.metadata.attributes?t.value.metadata.attributes.flatMap(e=>({type:e.trait_type,value:e.value})):[]),F=T(()=>{var o,n,l,h;const e=parseInt(a.value);return(n=(o=t==null?void 0:t.value)==null?void 0:o.metadata)!=null&&n.image&&console.log("* img",t.value.metadata.image),s.web3.nftLoad[e]!==void 0&&((h=(l=t==null?void 0:t.value)==null?void 0:l.metadata)!=null&&h.image)?`
	--crt:#fff;
    background-image: url(${t.value.metadata.image});
    background-position: center;
    background-repeat: no-repeat;
    background-size: cover;
    display: flex;
    flex-flow: column;
    justify-content: space-between;
    `:""}),M=e=>{const o=e.target,n=e.pageX-o.offsetLeft,l=e.pageY-o.offsetTop;o.style.setProperty("--x",n+"px"),o.style.setProperty("--y",l+"px")};return A(_,async e=>{if(e&&(console.log(e,"*existInLoad",s.web3.nftLoad[a.value]!==void 0,a.value,t.value),e&&!t.value)){const o=parseInt(a.value),n=await p(o);n.id&&n.id===a.value&&(t.value=n),console.log({resp:n})}}),A(()=>v.nftId,async function(e){var o;if(a.value=e,t.value=null,console.log("w",e,_.value,s.web3.nftLoad[e]),!_.value&&!s.web3.nftLoad[e]){const n=parseInt(a.value);console.log("*startSearch");const l=await p(n);l.id&&l.id===a.value&&(t.value=l,s.web3.nftLoad[n]=l),console.log("* meta",t.value,{data:l})}s.web3.nftLoad[e],((o=s.web3.nftLoad[e])==null?void 0:o.id)===e&&(t.value=s.web3.nftLoad[e])}),W(async()=>{const e=parseInt(a.value),o=await p(e);y.value=await k(e),o.id&&o.id===a.value&&s.web3.nftLoad[e]&&(t.value=o,s.web3.nftLoad[e]=o),o&&!s.web3.nftLoad[a.value]&&(t.value=o,s.web3.nftLoad[a.value]=o)}),B({nftId:a,existInLoad:_,mainStore:s,getBgNft:F,getLinkNftScan:x,moseMoveInCard:M,loadRedresh:u,Popper:S,toVault:N,dataItem:y,claimVault:I,getProperties:C}),(e,o)=>{var n,l,h,V;return c(),i("div",{class:Y({"nft-item":!0,"loader-bg":!_.value}),style:E(`height: ${v.h}px;`),onMousemove:M},[d("div",{class:"content-card",style:E(F.value)},[d("div",U,[d("a",{href:m(x)(a.value),target:"_blank"},[P("# "+b(a.value)+" ",1),$(m(S),{content:"Examinar en Polygonscan",arrow:!0,hover:!0},{default:z(()=>[ee]),_:1})],8,Z)]),(l=(n=t.value)==null?void 0:n.metadata)!=null&&l.attributes?(c(),i("div",te,[(c(!0),i(G,null,H(C.value,w=>(c(),i("ul",null,[d("li",null,b(w.type)+" : "+b(w.value),1)]))),256))])):L("",!0),(V=(h=t.value)==null?void 0:h.metadata)!=null&&V.name?(c(),i("div",ae,b(t.value.metadata.name),1)):L("",!0),$(m(S),{content:"Exatraer Fragmento",arrow:!1,hover:!0,zIndex:"10000"},{default:z(()=>{var w;return[(w=y.value)!=null&&w.priceW&&_.value&&!u.value?(c(),i("div",oe,[d("label",ne,[d("img",{class:"img-logo-tmine",src:Q,alt:"tmine logo",onClick:o[0]||(o[0]=ue=>m(I)(a.value,y.value.priceW))}),P(" "+b(y.value.price)+" TMINE ",1)])])):L("",!0)]}),_:1})],4),!_.value||u.value?(c(),i("div",se,re)):L("",!0)],38)}}},j=D(ce,[["__scopeId","data-v-c0a7017e"]]);const ie={class:"content container-items"},de={__name:"ContainerBoveda",setup(f,{expose:B}){const v=R(),p=g(!1),x=r("getNFTsBoveda"),N=[];function I(a,u){return a=Math.ceil(a),u=Math.floor(u),Math.floor(Math.random()*(u-a+1))+a}const k=()=>I(280,500);return W(async()=>{await x(),console.log("tokens",v.web3.bovedaTokens)}),B({data:N,getHeight:k,nftItemBoveda:j,multiGrid14:p}),(a,u)=>(c(),i("main",ie,[(c(!0),i(G,null,H(m(v).web3.bovedaTokens,t=>(c(),K(j,{grid:p.value,target:m(v).web3.bovedaTokens,"nft-id":t,h:k()},null,8,["grid","target","nft-id","h"]))),256))]))}},pe=D(de,[["__scopeId","data-v-65224e95"]]);export{pe as default};
