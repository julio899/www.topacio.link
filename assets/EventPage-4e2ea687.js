import{_ as H,j as f,r as d,u as K,A as G,f as J,o as X,a as y,g as M,d as r,l as k,e as N,t as P,n as R,w as U,m as D,y as se,C as ue,p as le,b as ie,I as de,F as Z,B as pe,c as q,h as re,i as fe,q as ce}from"./index-5ffa76a8.js";import{e as ee,_ as ge}from"./Paginator.vue_vue_type_style_index_0_lang-b41817a9.js";import{_ as ve}from"./Paginator.vue_vue_type_script_setup_true_lang-370d0410.js";import{_ as te,a as j,b as ae}from"./ScrollAreaComponent.vue_vue_type_style_index_0_lang-5af2a295.js";import"./iconify-034b95b4.js";import"./index-4923bae4.js";const Y=S=>(le("data-v-0c65f1ff"),S=S(),ie(),S),_e={class:"box-card"},me={class:"box-content"},he={class:"header-card p-start"},we=["href"],ye=Y(()=>r("img",{class:"img-link-polygon",src:ge,alt:"logo matic"},null,-1)),be=Y(()=>r("i",{class:"fa-solid fa-circle-info icon-info"},null,-1)),Ie={class:"fecha-sorteo"},Se={key:0,class:"legend"},Te={class:"content prop"},xe={class:"content prop"},ke=Y(()=>r("div",{class:"box-img"},null,-1)),Pe={class:"content info"},Le={__name:"nftItemEvent",props:["nftId","grid","target","k","w","h"],setup(S,{expose:z}){const T=f("getDataNFT"),A=f("getLinkNftScan"),E=f("syncBalance"),L=f("syncTmineBalance"),m=f("claimReward"),C=f("transferNFT"),s=f("refreshTokens"),g=S,o=d(g.nftId),p=d(g.w),$=d(g.k),F=d(!1),n=d(null),h=d(null),w=d(!1),u=K(),B=e=>{const a=parseInt(String(e)+"999");return new Date(a).toLocaleDateString()+" "+new Date(a).toLocaleTimeString()},W=e=>e.substring(0,7)+"    ......    "+e.slice(-7),l=()=>{w.value=!0},i=async({w:e,id:a})=>{console.log("toTransferNFT",{w:e,id:a});const t=await C(e,a);await E(),await L(),await s(),await _(),console.log({modalSend:h,resp:t}),!(t!=null&&t.blockNumber)||t===null?h.value.loading=!1:w.value=!1},_=async()=>{F.value=!0;const e=parseInt(o.value),a=await T(e);a.id&&a.id===o.value&&(n.value=a,u.web3.nftLoad[e]=a),await E(),await L(),setTimeout(()=>{F.value=!1},2e3)},b=G(()=>{const e=parseInt(o.value);return u.web3.nftLoad[e]!==void 0}),x=async()=>{const e=parseInt(o.value);if(await m(e)===!0){await E(),await L(),console.log("* toClaim ok");const t=await T(e);t.id&&t.id===o.value&&e&&(n.value=t,u.web3.nftLoad[e]=t)}},c=e=>{const t=I().filter(v=>v.prop==e);return t[0]&&t[0].value?t[0].value:null},I=()=>{var e,a;return(a=(e=n==null?void 0:n.value)==null?void 0:e.metadata)!=null&&a.attributes?n.value.metadata.attributes.flatMap(t=>({prop:t!=null&&t.trait_type?t==null?void 0:t.trait_type:null,value:t.value})):[]},V=G(()=>{var t,v;const e=parseInt(o.value),a=g.grid&&g.grid&&g.target.length>7?"cover":"150% 100%";return u.web3.nftLoad[e]!==void 0&&((v=(t=n==null?void 0:n.value)==null?void 0:t.metadata)!=null&&v.image)?`
	--crt:#fff;
    background-image: url(${n.value.metadata.image});
    background-position: center;
    background-repeat: no-repeat;
    background-size: ${a};`:""}),Q=e=>{const a=e.target,t=e.pageX-a.offsetLeft,v=e.pageY-a.offsetTop;a.style.setProperty("--x",t+"px"),a.style.setProperty("--y",v+"px")};return J(b,async e=>{if(e&&(console.log(e,"*existInLoad",u.web3.nftLoad[o.value]!==void 0,o.value,n.value),e&&!n.value)){const a=parseInt(o.value),t=await T(a);t.id&&t.id===o.value&&(n.value=t),console.log({resp:t})}}),J(()=>g.nftId,async function(e){var a;if(o.value=e,n.value=null,console.log("w",e,b.value,u.web3.nftLoad[e]),!b.value&&!u.web3.nftLoad[e]){const t=parseInt(o.value);console.log("*startSearch");const v=await T(t);v.id&&v.id===o.value&&(n.value=v,u.web3.nftLoad[t]=v),console.log("* meta",n.value,{data:v})}u.web3.nftLoad[e],((a=u.web3.nftLoad[e])==null?void 0:a.id)===e&&(n.value=u.web3.nftLoad[e])}),X(async()=>{const e=parseInt(o.value),a=await T(e);a.id&&a.id===o.value&&u.web3.nftLoad[e]&&(n.value=a,u.web3.nftLoad[e]=a),a&&!u.web3.nftLoad[o.value]&&(n.value=a,u.web3.nftLoad[o.value]=a)}),z({nftId:o,existInLoad:b,mainStore:u,getBgNft:V,getLinkNftScan:A,moseMoveInCard:Q,toClaim:x,loadRedresh:F,toRefresh:_,showModalSedNft:w,toSend:l,toTransferNFT:i,Popper:ee,key:$,formatDateTime:B,winnerWallet:p,formatWallet:W,getNftAtributes:I,getProp:c}),(e,a)=>{var t,v;return(t=n.value)!=null&&t.metadata?(y(),M("div",{key:0,class:se({"nft-item-event":!0}),onMousemove:Q,style:ue(`background-image: url(${n.value.metadata.image})`)},[r("div",_e,[r("div",me,[r("div",he,[r("a",{href:k(A)(o.value),target:"_blank"},[N("# "+P(o.value)+" ",1),R(k(ee),{content:"Examinar en Polygonscan",arrow:!0,hover:!0},{default:U(()=>[ye]),_:1})],8,we),be,r("span",Ie,P(B($.value)),1)]),(v=n.value)!=null&&v.metadata?(y(),M("span",Se,[r("p",null,"Winner: "+P(W(p.value)),1),r("div",Te,"Type: "+P(c("Type"))+" Luck: "+P(c("Luck")),1),r("div",xe,"Staking: "+P(c("Staking")),1)])):D("",!0)]),ke]),r("p",Pe,P(n.value.metadata.name),1)],36)):D("",!0)}}},ne=H(Le,[["__scopeId","data-v-0c65f1ff"]]);const Ce={key:1,class:"paginator"},$e={key:2,class:"paginator"},Ne={__name:"ContainerEventList",setup(S,{expose:z}){const T=f("searchLastSorteo"),A=f("searchWinnerInSorteo"),E=new re,L=K(),m=d(1);d(null);const C=d(null),s=d(!1),g=d(null),o=d(9),p=de({winners:[],loading:!0}),$=l=>{m.value=l,h(),console.log("updatePage",l),u(l)},F=()=>{s.value=!s.value,s.value?o.value=10:o.value=5,w.value=h()},n=G(()=>p.winners&&p.winners.length==0?[]:p.winners.flatMap(l=>l.id)),h=()=>{const l=JSON.parse(JSON.stringify(L.web3.nftTokensIds)),i=E.arrayPaginator(l,o.value,m.value);return g.value=i.totalPaginas,i},w=d(h()),u=async l=>{if(m.value=parseInt(l),w.value=h(),console.log("toPage",m.value),m.value>1){const _=m.value*o.value,b=C.value-_,x=Array.from({length:b}).map((I,V)=>V).splice(parseInt(o.value)*-1);console.log({sorteosPrevios:x});let c=[];for(var i=0;i<x.length;i++){const I=await A(x[i]);I.hash&&I.hash!=""&&c.push(I)}p.winners=c}},B=()=>{m.value<g.value&&(m.value++,w.value=h()),console.log("nextPage",m.value)};J(()=>L.web3.nftTokensIds,l=>{l&&(w.value=h())});const W=[];return X(async()=>{C.value=await T();let l=await A(C.value);for(var i=C.value;p.winners.length<o.value;i--){const _=await A(i);_.hash&&_.hash!=""&&p.winners.push(_)}console.log({last_sorteo:C,winnerLast:l,winnersTarget:p}),p.loading=!1}),z({data:W,mainStore:L,currentPage:w,nextPage:B,nftItemEvent:ne,getCurrentTarget:n,multiGrid14:s,changeToMultigrid:F,Paginator:ve,updatePage:$,amountPerPage:o,last_sorteo:C}),(l,i)=>{var _,b,x;return y(),M(Z,null,[p.loading?D("",!0):(y(),M("section",{key:0,class:se({content:!0,"multi-grid-14":s.value,lessMinimal:n.value&&((_=n.value)==null?void 0:_.length)&&((b=n.value)==null?void 0:b.length)<=4,"minimal-size":s.value&&((x=n.value)==null?void 0:x.length)<=3})},[(y(!0),M(Z,null,pe(n.value,(c,I)=>(y(),q(ne,{grid:s.value,target:n.value,"nft-id":c,h:p.winners[I].hash,k:p.winners[I].timestamp,w:p.winners[I].wallet,key:I},null,8,["grid","target","nft-id","h","k","w"]))),128))],2)),w.value&&w.value.paginaActual?(y(),M("section",Ce)):(y(),M("section",$e))],64)}}},oe=H(Ne,[["__scopeId","data-v-c947d440"]]);const O=S=>(le("data-v-9621f0d0"),S=S(),ie(),S),Me={class:"event"},Ae={key:0,class:"title"},Ee=O(()=>r("span",{class:"title-left-section"}," Evento de Sorteo Diario ",-1)),Fe={class:"sidebar"},Be={key:0,id:"list-options"},De={class:"lbl-left"},We=O(()=>r("img",{src:ce,alt:"matic-logo-banance",class:"matic-logo-banance"},null,-1)),ze={class:"lbl-left"},Re=O(()=>r("img",{src:ce,alt:"matic-logo-banance",class:"matic-logo-banance"},null,-1)),Je={class:"in-col p-1 li-sort"},Oe=O(()=>r("span",null,"Proximo Sorteo",-1)),Ve={class:"p-1-lr"},je={__name:"EventPage",setup(S,{expose:z}){const T=fe.useToast(),A=f("syncTmineTotalSupply"),E=f("addTmineToMetamask");f("executeSelectWinner"),f("resetTimeEventDaily"),f("selectWinnerSorteo");const L=f("getCostoInSorteo"),m=f("addMeToSorteo"),C=new re,s=K(),g=d(1),o=d(null),p=d(10),$=d(null),F=()=>{var l=1,i=confetti.shapeFromText({text:"ðŸ’Ž",scalar:l});confetti({particleCount:100,spread:180,shapes:[i]})},n=async()=>{var l,i,_,b,x;try{const c=await m();T.open({message:"Registro procesado satisfactoriamente.",type:"success",position:"top-right"})}catch(c){console.log({e:c}),c!=null&&c.reason?T.open({message:c.reason,type:"error",position:"top-right"}):(_=(i=(l=c==null?void 0:c.info)==null?void 0:l.error)==null?void 0:i.data)!=null&&_.message&&((x=(b=c==null?void 0:c.info)==null?void 0:b.error)==null?void 0:x.code)==-32603&&T.open({message:"Gas insuficiente",type:"error",position:"top-right"})}},h=()=>{if(s.web3.nftTokensIds.length==0)return{elementosPagina:[],totalPaginas:1,paginaActual:1};const l=JSON.parse(JSON.stringify(s.web3.nftTokensIds)),i=C.arrayPaginator(l,p.value,g.value);return o.value=i.totalPaginas,console.log({dataFormat:i}),i},w=()=>{g.value<o.value&&(g.value++,u.value=h()),console.log("nextPage",g.value)},u=d(h()),B=()=>{var l;return(l=s==null?void 0:s.web3)!=null&&l.participantsInSorteo&&s.web3.participantsInSorteo.length==0?[]:s.web3.participantsInSorteo?s.web3.participantsInSorteo.flatMap(i=>i.substring(0,7)+"    ......    "+i.slice(-7)):[]};J(()=>s.web3.nftTokensIds,async l=>{l&&(h(),A(),$.value=await L())});const W=[];return X(async()=>{$.value=await L(),console.log({costoSorteo:$.value}),A()}),z({data:W,mainStore:s,currentPage:u,nextPage:w,ContainerEventList:oe,addTmineToMetamask:E,shooterConfetti:F,CountdownComponent:te,ButtomComponent:j,registerInSorteo:n,ScrollAreaComponent:ae,formatWallets:B,costoSorteo:$}),(l,i)=>(y(),M("main",Me,[k(s).connected&&k(s).web3?(y(),M("h1",Ae,[Ee,N(" Topacio Nft's Listado de Fargmentos Liberados ðŸ’Ž / Holders actuales: "+P(k(s).web3.holdersCount),1)])):D("",!0),r("section",Fe,[k(s).connected?(y(),M("ul",Be,[r("li",null,[r("label",De,[N(" Mi Balance "),r("span",null,[N(P(k(s).web3.balanceFormat)+" ",1),We,N(" MATIC ")])])]),r("li",null,[r("label",ze,[N(" PATICIPACIÃ“NÂ  "),r("span",null,[N(P($.value)+" ",1),Re,N(" MATIC ")])])]),r("li",Je,[Oe,k(s).web3.dateNextSorteo>999?(y(),q(te,{key:0,dateTarget:k(s).web3.dateNextSorteo},null,8,["dateTarget"])):D("",!0),R(j,{class:"bnt1",onClick:n},{default:U(()=>[N("Participar")]),_:1}),R(j,{class:"btn3 p-1 no-cursor"},{default:U(()=>[N("Participantes en dia: "+P(k(s).web3.participantsInSorteo.length),1)]),_:1})]),r("li",Ve,[R(ae,{title:"Participando para sorteo",items:B(),showKey:!0},null,8,["items"])])])):D("",!0)]),k(s).connected?(y(),q(oe,{key:1})):D("",!0)]))}},Ye=H(je,[["__scopeId","data-v-9621f0d0"]]);export{Ye as default};
