import{_ as se,s as ue,r as w,u as X,q as ce,o as re,a as v,b as m,d as l,e as K,t as T,f as P,v as de,x as ve,y as M,S as J,z as fe,W as ge,A as U,h as V,l as I,w as D,k as h,F as G,g as ie,n as me,M as ne,m as pe,c as we,i as _e}from"./index-BHCRGyVk.js";import{_ as be}from"./Tmine2-DhPnLw4a.js";import{e as B}from"./Paginator.vue_vue_type_style_index_0_lang-BwdixOhC.js";import{_ as le}from"./Paginator.vue_vue_type_script_setup_true_lang-uYqG6XQG.js";const ye="/img/astarOnlyLogo.svg",ke="/img/update-meta.svg",Ce="/img/fly-svgrepo-com.svg",Te="/img/claim_.svg",he={name:"SendNFT",props:["show","idtarget"],emits:["closeModalSend"],setup(E,{emit:i}){const{show:N,idtarget:s}=ue(E),f=w(!1),c=w(""),u=X();ce(()=>{c.value="",f.value=!1}),re(()=>{f.value=!1,c.value=""});const y=()=>{c.value="",f.value=!1,i("closeModalSend",!0)};return{store:u,show:N,closeModal:y,confirmSend:async()=>{f.value=!0;const $=c.value.toString().trim().replaceAll("	",""),_=J.mixin({toast:!0,position:"top-end",showConfirmButton:!1,timer:3e3,timerProgressBar:!0,didOpen:k=>{k.addEventListener("mouseenter",J.stopTimer),k.addEventListener("mouseleave",J.resumeTimer)}});if(!fe($))return f.value=!1,y(),_.fire({icon:"error",title:"Wallet is no valid"});const C=s.value;i("transferNFT",{w:$,id:C})},loading:f,wallet:c}}},Ne={class:"modal-container"},Se={class:"Cabecera"},xe={class:"Contenido"},Le={key:0,class:"loader-interno"},Ie={key:1,class:"group"},Me={class:"Bootonera"};function Pe(E,i,N,s,f,c){return v(),m("section",{class:M({"modal-t":!0,"show-modal":s.show,"hide-modal":!s.show})},[l("div",Ne,[l("div",Se,[K(" SEND NFT ðŸ”– "+T(N.idtarget)+" ",1),l("button",{class:"close",onClick:i[0]||(i[0]=(...u)=>s.closeModal&&s.closeModal(...u))},"âœ–")]),l("div",xe,[s.loading?(v(),m("div",Le)):P("",!0),s.loading?P("",!0):(v(),m("div",Ie,[de(l("input",{type:"text","onUpdate:modelValue":i[1]||(i[1]=u=>s.wallet=u),required:""},null,512),[[ve,s.wallet]]),i[3]||(i[3]=l("span",{class:"highlight"},null,-1)),i[4]||(i[4]=l("span",{class:"bar"},null,-1)),i[5]||(i[5]=l("label",null,"Wallet destine",-1))]))]),l("div",Me,[s.loading?P("",!0):(v(),m("span",{key:0,class:"btn-send",onClick:i[2]||(i[2]=(...u)=>s.confirmSend&&s.confirmSend(...u))},"CONFIRM"))])])],2)}const Fe=se(he,[["render",Pe],["__scopeId","data-v-a1755a0e"]]),$e={class:"header-card"},Ae=["href"],Be={class:"content-card-item-galery"},Ee={key:0,class:"title-gem"},Re={key:1,class:"footer-card"},We={key:2,class:"snippet","data-title":"dot-flashing"},oe={__name:"nftItemGallery",props:["nftId","grid","target","k"],setup(E,{expose:i}){const{proxy:N}=pe(),s=new ge,f="https://shibuya.blockscout.com",c="0x7E375Febac53d9B854e24019d7bc3bA6dFFCBc3E",u=t=>N.$MultiWalletWeb3.getDataNFT(t),y=()=>s.syncBalance(),F=t=>`${f}/token/${c}/instance/${t}`,$=()=>{},_=()=>{},C=t=>ne.claimReward(t),k=()=>s.refreshTokens(),R=E;console.log({props:R});const o=w(R.nftId),p=w(!1),a=w(null),A=w(null),d=w(!1),S=w(!1),x=w(!1),r=X(),Y=U(()=>a.value&&a.value.metadata&&a.value.metadata.attributes?a.value.metadata.attributes.flatMap(t=>({type:t.trait_type,value:t.value})):[]),q=U(()=>{var t,e,n;return(t=a==null?void 0:a.value)!=null&&t.metadata&&((n=(e=a==null?void 0:a.value)==null?void 0:e.metadata)!=null&&n.name)&&a.value.metadata.name.length>25?a.value.metadata.name.replace("Fragment ",""):a.value.metadata.name}),j=()=>{x.value=!0},Q=async({w:t,id:e})=>{console.log("toTransferNFT",{w:t,id:e});let n=null;console.time("transfer");try{n=ne.transferNFT(t,e),console.log("transferNFT * ",{resp:n})}catch(g){console.log({e:g,resp:n})}console.timeEnd("transfer"),await y(),await _(),await k(),console.log({modalSend:A,resp:n}),!(n!=null&&n.blockNumber)||n===null?A.value=!1:x.value=!1},Z=async()=>{p.value=!0;const t=parseInt(o.value),e=await u(t);e!=null&&e.id&&e.id===o.value&&(a.value=e,r.web3.nftLoad[t]=e),await y(),await _(),setTimeout(()=>{p.value=!1},1e3)},L=U(()=>{const t=parseInt(o.value);return r.web3.nftLoad[t]!==void 0}),ee=async()=>{const t=parseInt(o.value);if(await C(t)===!0){await y(),await _(),console.log("* toClaim ok");const n=await u(t);n.id&&n.id===o.value&&t&&(a.value=n,r.web3.nftLoad[t]=n)}},te=U(()=>{var g,W,O,z,b,H;const t=parseInt(o.value),e="cover";console.log({metadata:a}),(W=(g=a==null?void 0:a.value)==null?void 0:g.metadata)!=null&&W.image&&console.log("* img",a.value.metadata.image);const n=(z=(O=a==null?void 0:a.value)==null?void 0:O.metadata)==null?void 0:z.image;return r.web3.nftLoad[t]!==void 0&&((H=(b=a==null?void 0:a.value)==null?void 0:b.metadata)!=null&&H.image)?`
	--crt:#fff;
    background-image: url(${n});
    background-position: center;
    background-repeat: no-repeat;
    background-size: ${e};`:""}),ae=t=>{const e=t.target,n=t.pageX-e.offsetLeft,g=t.pageY-e.offsetTop;e.style.setProperty("--x",n+"px"),e.style.setProperty("--y",g+"px")};return V(L,async t=>{if(t&&(console.log(t,"*existInLoad",r.web3.nftLoad[o.value]!==void 0,o.value,a.value),t&&!a.value)){const e=parseInt(o.value),n=await u(e);n.id&&n.id===o.value&&(a.value=n),console.log({resp:n})}}),V(()=>r.web3.blockNumber,async function(t){S.value=!0;const e=parseInt(o.value),n=await u(e);n!=null&&n.id&&n.id===o.value&&(a.value=n,r.web3.nftLoad[e]=n),S.value=!1}),V(()=>R.nftId,async function(t){var e;if(o.value=t,a.value=null,console.log("w",t,L.value,r.web3.nftLoad[t]),!L.value&&!r.web3.nftLoad[t]){const n=parseInt(o.value);console.log("*startSearch");const g=await u(n);g.id&&g.id===o.value&&(a.value=g,r.web3.nftLoad[n]=g),console.log("* meta",a.value,{data:g})}r.web3.nftLoad[t],((e=r.web3.nftLoad[t])==null?void 0:e.id)===t&&(a.value=r.web3.nftLoad[t])}),re(async()=>{const t=parseInt(o.value),e=await u(t);console.log({resp:e,idAuxiliar:t},o.value),e&&o&&e.id&&e.id===o.value&&r.web3.nftLoad[t]&&(a.value=e,r.web3.nftLoad[t]=e),e&&!r.web3.nftLoad[o.value]&&(a.value=e,r.web3.nftLoad[o.value]=e)}),i({upReward:S,nftId:o,existInLoad:L,mainStore:r,getBgNft:te,getLinkNftScan:F,moseMoveInCard:ae,toClaim:ee,loadRedresh:p,toRefresh:Z,showModalSedNft:x,toSend:j,toTransferNFT:Q,Popper:B,toVault:$,showDetails:d,getProperties:Y,titleFormat:q}),(t,e)=>{var n,g,W,O,z;return v(),m(G,null,[l("div",{class:M({"nft-item":!0,"loader-bg":!L.value}),style:me(te.value),onMousemove:ae},[l("div",$e,[l("a",{href:F(o.value),target:"_blank"},[K("# "+T(o.value)+" ",1),I(h(B),{content:"Testnet shibuya",arrow:!0,hover:!0},{default:D(()=>e[6]||(e[6]=[l("img",{class:"img-link-polygon",src:ye,alt:"logo Astar"},null,-1)])),_:1})],8,Ae),I(h(B),{content:t.$t("general.titles.nft_attributes"),arrow:!0,hover:!0},{default:D(()=>[l("i",{class:"fa-solid fa-circle-info icon-info",onClick:e[0]||(e[0]=b=>d.value=!d.value)})]),_:1},8,["content"]),I(h(B),{content:t.$t("general.titles.update_metadata"),arrow:!0,hover:!0},{default:D(()=>[l("img",{src:ke,class:M({"icon-update-meta":!0,"loading-refresh":p.value}),onClick:Z},null,2)]),_:1},8,["content"])]),l("div",{class:M({"details-attributes":!0,active:d.value}),onClick:e[4]||(e[4]=b=>d.value=!d.value)},[l("ul",{onClick:e[3]||(e[3]=b=>d.value=!d.value)},[(v(!0),m(G,null,ie(Y.value,b=>(v(),m("li",{onClick:e[1]||(e[1]=H=>d.value=!d.value),class:M({colorEpic:b.type=="Staking"&&b.value>=4,colorEpicRarity:b.value=="epic"})},T(b.type)+" : "+T(b.value),3))),256)),a.value&&((g=(n=a.value)==null?void 0:n.metadata)!=null&&g.name)?(v(),m("li",{key:0,onClick:e[2]||(e[2]=b=>d.value=!d.value)},T(q.value),1)):P("",!0)])],2),l("div",Be,[I(h(B),{content:t.$t("general.titles.send_nft"),arrow:!0,hover:!0,placement:"top"},{default:D(()=>[l("img",{src:Ce,onClick:j})]),_:1},8,["content"])]),a.value&&((O=(W=a.value)==null?void 0:W.metadata)!=null&&O.name)&&!d.value?(v(),m("div",Ee,T(q.value),1)):P("",!0),(z=a.value)!=null&&z.reward&&L.value&&!p.value?(v(),m("div",Re,[l("label",{class:M({"nft-number nft-reward-tmine":!0,blink_me:S.value})},[e[7]||(e[7]=l("img",{src:be,alt:"tmine logo",class:"img-logo-tmine"},null,-1)),K(" "+T(a.value.reward)+" TMINE ",1)],2),I(h(B),{content:t.$t("general.titles.claim_tmine"),hover:!0},{default:D(()=>[l("img",{src:Te,onClick:ee,class:"icon-reward-claim"})]),_:1},8,["content"])])):P("",!0),!L.value||p.value?(v(),m("div",We,e[8]||(e[8]=[l("div",{class:"stage"},[l("div",{class:"dot-flashing"})],-1)]))):P("",!0)],38),I(Fe,{show:x.value,idtarget:o.value,onCloseModalSend:e[5]||(e[5]=b=>x.value=!1),onTransferNFT:Q,ref_key:"modalSend",ref:A},null,8,["show","idtarget"])],64)}}},Oe={key:0,class:"paginator"},ze={class:"info-floating"},De={key:1,class:"paginator"},Ue={__name:"ContainerGallery",setup(E,{expose:i}){const N=new _e,s=X(),f=w(1),c=w(!1),u=w(null),y=w(5),F=p=>{f.value=p,C()},$=()=>{c.value=!c.value,c.value?y.value=10:y.value=5,k.value=C()},_=U(()=>C().elementosPagina),C=()=>{const p=JSON.parse(JSON.stringify(s.web3.nftTokensIds)),a=N.arrayPaginator(p,y.value,f.value);return u.value=a.totalPaginas,a},k=w(C()),R=()=>{f.value<u.value&&(f.value++,k.value=C()),console.log("nextPage",f.value)};return V(()=>s.web3.nftTokensIds,p=>{p&&(k.value=C())}),i({data:[],mainStore:s,currentPage:k,nextPage:R,nftItemGallery:oe,getCurrentTarget:_,multiGrid14:c,changeToMultigrid:$,Paginator:le,updatePage:F,amountPerPage:y}),(p,a)=>{var A,d,S;return v(),m(G,null,[l("section",{class:M({content:!0,"multi-grid-14":c.value,lessMinimal:_.value&&((A=_.value)==null?void 0:A.length)&&((d=_.value)==null?void 0:d.length)<=4,"minimal-size":c.value&&((S=_.value)==null?void 0:S.length)<=3})},[(v(!0),m(G,null,ie(_.value,(x,r)=>(v(),we(oe,{grid:c.value,target:_.value,"nft-id":x,k:r},null,8,["grid","target","nft-id","k"]))),256))],2),k.value&&k.value.paginaActual?(v(),m("section",Oe,[I(le,{currentPage:k.value,total:h(s).web3.nftTokensIds.length,amountPerPage:y.value,onUpdate:F,class:"body-paginator"},null,8,["currentPage","total","amountPerPage"]),l("section",ze,[l("div",null,"Holders: "+T(h(s).web3.holdersCount),1),l("div",null,"Nft balance: "+T(h(s).web3.nftBalance),1)])])):(v(),m("section",De))],64)}}},Je=se(Ue,[["__scopeId","data-v-64a32df1"]]);export{Je as C};
