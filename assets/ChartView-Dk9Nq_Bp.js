import{cc as $a,r as W,p as de,cd as Ra,a as P,b as U,ce as Ta,q as T,o as Et,cf as Pa,d as L,F as ja,i as ca,_ as ha,cg as Fa,ch as Wa,u as Ia,ci as je,h as k,e as Ce,t as X,k as Fe,c9 as Ua,cj as Ba,f as z,c as Ct,s as Na}from"./index-Db0pDaok.js";import{V as da}from"./lightweight-charts.production-Cq3om6Hu.js";import{u as $t}from"./chart-CbRJJvuG.js";import{p as Oa}from"./processDivergence-CKT4E2ef.js";import{d as Kt,_ as Gt,a as Ha}from"./ActivadorIndicator-Bp02ozUh.js";import{_ as Lt}from"./Selector-C_mzUESU.js";const te=(u,t,a)=>{const i=document.createElement(u),[s,d]=Array.isArray(t)?[void 0,t]:[t,a];return s&&Object.assign(i,s),d==null||d.forEach(h=>i.appendChild(h)),i},Xa=(u,t)=>{var a;return t==="left"?u.offsetLeft:(((a=u.offsetParent instanceof HTMLElement?u.offsetParent:null)==null?void 0:a.offsetWidth)??0)-u.offsetWidth-u.offsetLeft},za=u=>u.offsetWidth>0&&u.offsetHeight>0,qa=(u,t)=>{customElements.get(u)!==t&&customElements.define(u,t)};function Ya(u,t,{reverse:a=!1}={}){const i=u.length;for(let s=a?i-1:0;a?s>=0:s<i;a?s--:s++)t(u[s],s)}const Za=String.raw,Ka=typeof CSS<"u"&&CSS.supports&&CSS.supports("animation-timing-function","linear(1,2)"),Ga=typeof CSS<"u"&&CSS.supports&&CSS.supports("line-height","mod(1,1)"),Qt=typeof matchMedia<"u"?matchMedia("(prefers-reduced-motion: reduce)"):null,Ne="--_number-flow-d-opacity",Rt="--_number-flow-d-width",Oe="--_number-flow-dx",Tt="--_number-flow-d",Qa=(()=>{try{return CSS.registerProperty({name:Ne,syntax:"<number>",inherits:!1,initialValue:"0"}),CSS.registerProperty({name:Oe,syntax:"<length>",inherits:!0,initialValue:"0px"}),CSS.registerProperty({name:Rt,syntax:"<number>",inherits:!1,initialValue:"0"}),CSS.registerProperty({name:Tt,syntax:"<number>",inherits:!0,initialValue:"0"}),!0}catch{return!1}})(),Ja="var(--number-flow-char-height, 1em)",J="var(--number-flow-mask-height, 0.25em)",Jt=`calc(${J} / 2)`,Dt="var(--number-flow-mask-width, 0.5em)",ie=`calc(${Dt} / var(--scale-x))`,We="#000 0, transparent 71%",ea=Za`:host{display:inline-block;direction:ltr;white-space:nowrap;isolation:isolate;line-height:${Ja} !important}.number,.number__inner{display:inline-block;transform-origin:left top}:host([data-will-change]) :is(.number,.number__inner,.section,.digit,.digit__num,.symbol){will-change:transform}.number{--scale-x:calc(1 + var(${Rt}) / var(--width));transform:translateX(var(${Oe})) scaleX(var(--scale-x));margin:0 calc(-1 * ${Dt});position:relative;-webkit-mask-image:linear-gradient(to right,transparent 0,#000 ${ie},#000 calc(100% - ${ie}),transparent ),linear-gradient(to bottom,transparent 0,#000 ${J},#000 calc(100% - ${J}),transparent 100% ),radial-gradient(at bottom right,${We}),radial-gradient(at bottom left,${We}),radial-gradient(at top left,${We}),radial-gradient(at top right,${We});-webkit-mask-size:100% calc(100% - ${J} * 2),calc(100% - ${ie} * 2) 100%,${ie} ${J},${ie} ${J},${ie} ${J},${ie} ${J};-webkit-mask-position:center,center,top left,top right,bottom right,bottom left;-webkit-mask-repeat:no-repeat}.number__inner{padding:${Jt} ${Dt};transform:scaleX(calc(1 / var(--scale-x))) translateX(calc(-1 * var(${Oe})))}:host > :not(.number){z-index:5}.section,.symbol{display:inline-block;position:relative;isolation:isolate}.section::after{content:'\200b';display:inline-block}.section--justify-left{transform-origin:center left}.section--justify-right{transform-origin:center right}.section > [inert],.symbol > [inert]{margin:0 !important;position:absolute !important;z-index:-1}.digit{display:inline-block;position:relative;--c:var(--current) + var(${Tt})}.digit__num,.number .section::after{padding:${Jt} 0}.digit__num{display:inline-block;--offset-raw:mod(var(--length) + var(--n) - mod(var(--c),var(--length)),var(--length));--offset:calc( var(--offset-raw) - var(--length) * round(down,var(--offset-raw) / (var(--length) / 2),1) );--y:clamp(-100%,var(--offset) * 100%,100%);transform:translateY(var(--y))}.digit__num[inert]{position:absolute;top:0;left:50%;transform:translateX(-50%) translateY(var(--y))}.digit:not(.is-spinning) .digit__num[inert]{display:none}.symbol__value{display:inline-block;mix-blend-mode:plus-lighter;white-space:pre}.section--justify-left .symbol > [inert]{left:0}.section--justify-right .symbol > [inert]{right:0}.animate-presence{opacity:calc(1 + var(${Ne}))}`,ei=HTMLElement,ti=Ga&&Ka&&Qa;let Ie;class K extends ei{constructor(){super(),this.created=!1,this.manual=!1;const{animated:t,...a}=this.constructor.defaultProps;this._animated=this.computedAnimated=t,Object.assign(this,a)}get animated(){return this._animated}set animated(t){var a;this.animated!==t&&(this._animated=t,(a=this.shadowRoot)==null||a.getAnimations().forEach(i=>i.finish()))}set data(t){var a;if(t==null)return;const{pre:i,integer:s,fraction:d,post:h,value:p}=t;if(this.created){const g=this._data;this._data=t,this.computedTrend=typeof this.trend=="function"?this.trend(g.value,p):this.trend,this.computedAnimated=ti&&this._animated&&(!this.respectMotionPreference||!(Qt!=null&&Qt.matches))&&za(this),(a=this.plugins)==null||a.forEach(e=>{var r;return(r=e.onUpdate)==null?void 0:r.call(e,t,g,this)}),this.manual||this.willUpdate(),this._pre.update(i),this._num.update({integer:s,fraction:d}),this._post.update(h),this.manual||this.didUpdate()}else{if(this._data=t,this.attachShadow({mode:"open"}),typeof CSSStyleSheet<"u"&&this.shadowRoot.adoptedStyleSheets)Ie||(Ie=new CSSStyleSheet,Ie.replaceSync(ea)),this.shadowRoot.adoptedStyleSheets=[Ie];else{const g=document.createElement("style");g.textContent=ea,this.shadowRoot.appendChild(g)}this._pre=new aa(this,i,{justify:"right",part:"left"}),this.shadowRoot.appendChild(this._pre.el),this._num=new ai(this,s,d),this.shadowRoot.appendChild(this._num.el),this._post=new aa(this,h,{justify:"left",part:"right"}),this.shadowRoot.appendChild(this._post.el)}this.created=!0}willUpdate(){this._pre.willUpdate(),this._num.willUpdate(),this._post.willUpdate()}didUpdate(){if(!this.computedAnimated)return;this._abortAnimationsFinish?this._abortAnimationsFinish.abort():this.dispatchEvent(new Event("animationsstart")),this._pre.didUpdate(),this._num.didUpdate(),this._post.didUpdate();const t=new AbortController;Promise.all(this.shadowRoot.getAnimations().map(a=>a.finished)).then(()=>{t.signal.aborted||(this.dispatchEvent(new Event("animationsfinish")),this._abortAnimationsFinish=void 0)}),this._abortAnimationsFinish=t}}K.defaultProps={transformTiming:{duration:900,easing:"linear(0,.005,.019,.039,.066,.096,.129,.165,.202,.24,.278,.316,.354,.39,.426,.461,.494,.526,.557,.586,.614,.64,.665,.689,.711,.731,.751,.769,.786,.802,.817,.831,.844,.856,.867,.877,.887,.896,.904,.912,.919,.925,.931,.937,.942,.947,.951,.955,.959,.962,.965,.968,.971,.973,.976,.978,.98,.981,.983,.984,.986,.987,.988,.989,.99,.991,.992,.992,.993,.994,.994,.995,.995,.996,.996,.9963,.9967,.9969,.9972,.9975,.9977,.9979,.9981,.9982,.9984,.9985,.9987,.9988,.9989,1)"},spinTiming:void 0,opacityTiming:{duration:450,easing:"ease-out"},animated:!0,trend:(u,t)=>Math.sign(t-u),respectMotionPreference:!0,plugins:void 0,digits:void 0};class ai{constructor(t,a,i,{className:s,...d}={}){this.flow=t,this._integer=new ta(t,a,{justify:"right",part:"integer"}),this._fraction=new ta(t,i,{justify:"left",part:"fraction"}),this._inner=te("span",{className:"number__inner"},[this._integer.el,this._fraction.el]),this.el=te("span",{...d,part:"number",className:`number ${s??""}`},[this._inner])}willUpdate(){this._prevWidth=this.el.offsetWidth,this._prevLeft=this.el.getBoundingClientRect().left,this._integer.willUpdate(),this._fraction.willUpdate()}update({integer:t,fraction:a}){this._integer.update(t),this._fraction.update(a)}didUpdate(){const t=this.el.getBoundingClientRect();this._integer.didUpdate(),this._fraction.didUpdate();const a=this._prevLeft-t.left,i=this.el.offsetWidth,s=this._prevWidth-i;this.el.style.setProperty("--width",String(i)),this.el.animate({[Oe]:[`${a}px`,"0px"],[Rt]:[s,0]},{...this.flow.transformTiming,composite:"accumulate"})}}class ua{constructor(t,a,{justify:i,className:s,...d},h){this.flow=t,this.children=new Map,this.onCharRemove=g=>()=>{this.children.delete(g)},this.justify=i;const p=a.map(g=>this.addChar(g).el);this.el=te("span",{...d,className:`section section--justify-${i} ${s??""}`},h?h(p):p)}addChar(t,{startDigitsAtZero:a=!1,...i}={}){const s=t.type==="integer"||t.type==="fraction"?new fa(this,t.type,a?0:t.value,t.pos,{...i,onRemove:this.onCharRemove(t.key)}):new ii(this,t.type,t.value,{...i,onRemove:this.onCharRemove(t.key)});return this.children.set(t.key,s),s}unpop(t){t.el.removeAttribute("inert"),t.el.style.top="",t.el.style[this.justify]=""}pop(t){t.forEach(a=>{a.el.style.top=`${a.el.offsetTop}px`,a.el.style[this.justify]=`${Xa(a.el,this.justify)}px`}),t.forEach(a=>{a.el.setAttribute("inert",""),a.present=!1})}addNewAndUpdateExisting(t){const a=new Map,i=new Map,s=this.justify==="left",d=s?"prepend":"append";if(Ya(t,h=>{let p;this.children.has(h.key)?(p=this.children.get(h.key),i.set(h,p),this.unpop(p),p.present=!0):(p=this.addChar(h,{startDigitsAtZero:!0,animateIn:!0}),a.set(h,p)),this.el[d](p.el)},{reverse:s}),this.flow.computedAnimated){const h=this.el.getBoundingClientRect();a.forEach(p=>{p.willUpdate(h)})}a.forEach((h,p)=>{h.update(p.value)}),i.forEach((h,p)=>{h.update(p.value)})}willUpdate(){const t=this.el.getBoundingClientRect();this._prevOffset=t[this.justify],this.children.forEach(a=>a.willUpdate(t))}didUpdate(){const t=this.el.getBoundingClientRect();this.children.forEach(s=>s.didUpdate(t));const a=t[this.justify],i=this._prevOffset-a;i&&this.children.size&&this.el.animate({transform:[`translateX(${i}px)`,"none"]},{...this.flow.transformTiming,composite:"accumulate"})}}class ta extends ua{update(t){const a=new Map;this.children.forEach((i,s)=>{t.find(d=>d.key===s)||a.set(s,i),this.unpop(i)}),this.addNewAndUpdateExisting(t),a.forEach(i=>{i instanceof fa&&i.update(0)}),this.pop(a)}}class aa extends ua{update(t){const a=new Map;this.children.forEach((i,s)=>{t.find(d=>d.key===s)||a.set(s,i)}),this.pop(a),this.addNewAndUpdateExisting(t)}}let Mt=class{constructor(t,a,{onRemove:i,animateIn:s=!1}={}){this.flow=t,this.el=a,this._present=!0,this._remove=()=>{var d;this.el.remove(),(d=this._onRemove)==null||d.call(this)},this.el.classList.add("animate-presence"),this.flow.computedAnimated&&s&&this.el.animate({[Ne]:[-.9999,0]},{...this.flow.opacityTiming,composite:"accumulate"}),this._onRemove=i}get present(){return this._present}set present(t){if(this._present!==t){if(this._present=t,t?this.el.removeAttribute("inert"):this.el.setAttribute("inert",""),!this.flow.computedAnimated){t||this._remove();return}this.el.style.setProperty("--_number-flow-d-opacity",t?"0":"-.999"),this.el.animate({[Ne]:t?[-.9999,0]:[.999,0]},{...this.flow.opacityTiming,composite:"accumulate"}),t?this.flow.removeEventListener("animationsfinish",this._remove):this.flow.addEventListener("animationsfinish",this._remove,{once:!0})}}},pa=class extends Mt{constructor(t,a,i,s){super(t.flow,i,s),this.section=t,this.value=a,this.el=i}},fa=class extends pa{constructor(t,a,i,s,d){var h,p;const g=(((p=(h=t.flow.digits)==null?void 0:h[s])==null?void 0:p.max)??9)+1,e=Array.from({length:g}).map((F,D)=>{const V=te("span",{className:"digit__num"},[document.createTextNode(String(D))]);return D!==i&&V.setAttribute("inert",""),V.style.setProperty("--n",String(D)),V}),r=te("span",{part:`digit ${a}-digit`,className:"digit"},e);r.style.setProperty("--current",String(i)),r.style.setProperty("--length",String(g)),super(t,i,r,d),this.pos=s,this._onAnimationsFinish=()=>{this.el.classList.remove("is-spinning")},this._numbers=e,this.length=g}willUpdate(t){const a=this.el.getBoundingClientRect();this._prevValue=this.value;const i=a[this.section.justify]-t[this.section.justify],s=a.width/2;this._prevCenter=this.section.justify==="left"?i+s:i-s}update(t){this.el.style.setProperty("--current",String(t)),this._numbers.forEach((a,i)=>i===t?a.removeAttribute("inert"):a.setAttribute("inert","")),this.value=t}didUpdate(t){const a=this.el.getBoundingClientRect(),i=a[this.section.justify]-t[this.section.justify],s=a.width/2,d=this.section.justify==="left"?i+s:i-s,h=this._prevCenter-d;h&&this.el.animate({transform:[`translateX(${h}px)`,"none"]},{...this.flow.transformTiming,composite:"accumulate"});const p=this.getDelta();p&&(this.el.classList.add("is-spinning"),this.el.animate({[Tt]:[-p,0]},{...this.flow.spinTiming??this.flow.transformTiming,composite:"accumulate"}),this.flow.addEventListener("animationsfinish",this._onAnimationsFinish,{once:!0}))}getDelta(){var t;if(this.flow.plugins)for(const s of this.flow.plugins){const d=(t=s.getDelta)==null?void 0:t.call(s,this.value,this._prevValue,this);if(d!=null)return d}const a=this.value-this._prevValue,i=this.flow.computedTrend||Math.sign(a);return i<0&&this.value>this._prevValue?this.value-this.length-this._prevValue:i>0&&this.value<this._prevValue?this.length-this._prevValue+this.value:a}};class ii extends pa{constructor(t,a,i,s){const d=te("span",{className:"symbol__value",textContent:i});super(t,i,te("span",{part:`symbol ${a}`,className:"symbol"},[d]),s),this.type=a,this._children=new Map,this._onChildRemove=h=>()=>{this._children.delete(h)},this._children.set(i,new Mt(this.flow,d,{onRemove:this._onChildRemove(i)}))}willUpdate(t){if(this.type==="decimal")return;const a=this.el.getBoundingClientRect();this._prevOffset=a[this.section.justify]-t[this.section.justify]}update(t){if(this.value!==t){const a=this._children.get(this.value);if(a.present=!1,this._children.has(t)){const i=this._children.get(t);i.present=!0}else{const i=te("span",{className:"symbol__value",textContent:t});this.el.appendChild(i),this._children.set(t,new Mt(this.flow,i,{animateIn:!0,onRemove:this._onChildRemove(t)}))}}this.value=t}didUpdate(t){if(this.type==="decimal")return;const a=this.el.getBoundingClientRect()[this.section.justify]-t[this.section.justify],i=this._prevOffset-a;i&&this.el.animate({transform:[`translateX(${i}px)`,"none"]},{...this.flow.transformTiming,composite:"accumulate"})}}function si(u,t,a,i){const s=t.formatToParts(u);a&&s.unshift({type:"prefix",value:a}),i&&s.push({type:"suffix",value:i});const d=[],h=[],p=[],g=[],e={},r=A=>`${A}:${e[A]=(e[A]??-1)+1}`;let F="",D=!1,V=!1;for(const A of s){F+=A.value;const M=A.type==="minusSign"||A.type==="plusSign"?"sign":A.type;M==="integer"?(D=!0,h.push(...A.value.split("").map(le=>({type:M,value:parseInt(le)})))):M==="group"?h.push({type:M,value:A.value}):M==="decimal"?(V=!0,p.push({type:M,value:A.value,key:r(M)})):M==="fraction"?p.push(...A.value.split("").map(le=>({type:M,value:parseInt(le),key:r(M),pos:-1-e[M]}))):(D||V?g:d).push({type:M,value:A.value,key:r(M)})}const Y=[];for(let A=h.length-1;A>=0;A--){const M=h[A];Y.unshift(M.type==="integer"?{...M,key:r(M.type),pos:e[M.type]}:{...M,key:r(M.type)})}return{pre:d,integer:Y,fraction:p,post:g,valueAsString:F,value:typeof u=="string"?parseFloat(u):u}}const li=Symbol(),ae=(u,t,a)=>{const i=document.createElement(u),[s,d]=Array.isArray(t)?[void 0,t]:[t,a];return s&&Object.assign(i,s),d==null||d.forEach(h=>i.appendChild(h)),i},ni=(u,t)=>{var a;return t==="left"?u.offsetLeft:(((a=u.offsetParent instanceof HTMLElement?u.offsetParent:null)==null?void 0:a.offsetWidth)??0)-u.offsetWidth-u.offsetLeft},ri=u=>u.offsetWidth>0&&u.offsetHeight>0;function oi(u,t,{reverse:a=!1}={}){const i=u.length;for(let s=a?i-1:0;a?s>=0:s<i;a?s--:s++)t(u[s],s)}const ci=String.raw,hi=typeof CSS<"u"&&CSS.supports&&CSS.supports("animation-timing-function","linear(1,2)"),di=typeof CSS<"u"&&CSS.supports&&CSS.supports("line-height","mod(1,1)"),ia=typeof matchMedia<"u"?matchMedia("(prefers-reduced-motion: reduce)"):null,He="--_number-flow-d-opacity",Pt="--_number-flow-d-width",Xe="--_number-flow-dx",jt="--_number-flow-d",ui=(()=>{try{return CSS.registerProperty({name:He,syntax:"<number>",inherits:!1,initialValue:"0"}),CSS.registerProperty({name:Xe,syntax:"<length>",inherits:!0,initialValue:"0px"}),CSS.registerProperty({name:Pt,syntax:"<number>",inherits:!1,initialValue:"0"}),CSS.registerProperty({name:jt,syntax:"<number>",inherits:!0,initialValue:"0"}),!0}catch{return!1}})(),pi="var(--number-flow-char-height, 1em)",ee="var(--number-flow-mask-height, 0.25em)",sa=`calc(${ee} / 2)`,xt="var(--number-flow-mask-width, 0.5em)",se=`calc(${xt} / var(--scale-x))`,Ue="#000 0, transparent 71%",la=ci`:host{display:inline-block;direction:ltr;white-space:nowrap;isolation:isolate;line-height:${pi} !important}.number,.number__inner{display:inline-block;transform-origin:left top}:host([data-will-change]) :is(.number,.number__inner,.section,.digit,.digit__num,.symbol){will-change:transform}.number{--scale-x:calc(1 + var(${Pt}) / var(--width));transform:translateX(var(${Xe})) scaleX(var(--scale-x));margin:0 calc(-1 * ${xt});position:relative;-webkit-mask-image:linear-gradient(to right,transparent 0,#000 ${se},#000 calc(100% - ${se}),transparent ),linear-gradient(to bottom,transparent 0,#000 ${ee},#000 calc(100% - ${ee}),transparent 100% ),radial-gradient(at bottom right,${Ue}),radial-gradient(at bottom left,${Ue}),radial-gradient(at top left,${Ue}),radial-gradient(at top right,${Ue});-webkit-mask-size:100% calc(100% - ${ee} * 2),calc(100% - ${se} * 2) 100%,${se} ${ee},${se} ${ee},${se} ${ee},${se} ${ee};-webkit-mask-position:center,center,top left,top right,bottom right,bottom left;-webkit-mask-repeat:no-repeat}.number__inner{padding:${sa} ${xt};transform:scaleX(calc(1 / var(--scale-x))) translateX(calc(-1 * var(${Xe})))}:host > :not(.number){z-index:5}.section,.symbol{display:inline-block;position:relative;isolation:isolate}.section::after{content:'\200b';display:inline-block}.section--justify-left{transform-origin:center left}.section--justify-right{transform-origin:center right}.section > [inert],.symbol > [inert]{margin:0 !important;position:absolute !important;z-index:-1}.digit{display:inline-block;position:relative;--c:var(--current) + var(${jt})}.digit__num,.number .section::after{padding:${sa} 0}.digit__num{display:inline-block;--offset-raw:mod(var(--length) + var(--n) - mod(var(--c),var(--length)),var(--length));--offset:calc( var(--offset-raw) - var(--length) * round(down,var(--offset-raw) / (var(--length) / 2),1) );--y:clamp(-100%,var(--offset) * 100%,100%);transform:translateY(var(--y))}.digit__num[inert]{position:absolute;top:0;left:50%;transform:translateX(-50%) translateY(var(--y))}.digit:not(.is-spinning) .digit__num[inert]{display:none}.symbol__value{display:inline-block;mix-blend-mode:plus-lighter;white-space:pre}.section--justify-left .symbol > [inert]{left:0}.section--justify-right .symbol > [inert]{right:0}.animate-presence{opacity:calc(1 + var(${He}))}`,fi=HTMLElement,mi=di&&hi&&ui;let Be;class gi extends fi{constructor(){super(),this.created=!1,this.manual=!1;const{animated:t,...a}=this.constructor.defaultProps;this._animated=this.computedAnimated=t,Object.assign(this,a)}get animated(){return this._animated}set animated(t){var a;this.animated!==t&&(this._animated=t,(a=this.shadowRoot)==null||a.getAnimations().forEach(i=>i.finish()))}set data(t){var a;if(t==null)return;const{pre:i,integer:s,fraction:d,post:h,value:p}=t;if(this.created){const g=this._data;this._data=t,this.computedTrend=typeof this.trend=="function"?this.trend(g.value,p):this.trend,this.computedAnimated=mi&&this._animated&&(!this.respectMotionPreference||!(ia!=null&&ia.matches))&&ri(this),(a=this.plugins)==null||a.forEach(e=>{var r;return(r=e.onUpdate)==null?void 0:r.call(e,t,g,this)}),this.manual||this.willUpdate(),this._pre.update(i),this._num.update({integer:s,fraction:d}),this._post.update(h),this.manual||this.didUpdate()}else{if(this._data=t,this.attachShadow({mode:"open"}),typeof CSSStyleSheet<"u"&&this.shadowRoot.adoptedStyleSheets)Be||(Be=new CSSStyleSheet,Be.replaceSync(la)),this.shadowRoot.adoptedStyleSheets=[Be];else{const g=document.createElement("style");g.textContent=la,this.shadowRoot.appendChild(g)}this._pre=new ra(this,i,{justify:"right",part:"left"}),this.shadowRoot.appendChild(this._pre.el),this._num=new bi(this,s,d),this.shadowRoot.appendChild(this._num.el),this._post=new ra(this,h,{justify:"left",part:"right"}),this.shadowRoot.appendChild(this._post.el)}this.created=!0}willUpdate(){this._pre.willUpdate(),this._num.willUpdate(),this._post.willUpdate()}didUpdate(){if(!this.computedAnimated)return;this._abortAnimationsFinish?this._abortAnimationsFinish.abort():this.dispatchEvent(new Event("animationsstart")),this._pre.didUpdate(),this._num.didUpdate(),this._post.didUpdate();const t=new AbortController;Promise.all(this.shadowRoot.getAnimations().map(a=>a.finished)).then(()=>{t.signal.aborted||(this.dispatchEvent(new Event("animationsfinish")),this._abortAnimationsFinish=void 0)}),this._abortAnimationsFinish=t}}gi.defaultProps={transformTiming:{duration:900,easing:"linear(0,.005,.019,.039,.066,.096,.129,.165,.202,.24,.278,.316,.354,.39,.426,.461,.494,.526,.557,.586,.614,.64,.665,.689,.711,.731,.751,.769,.786,.802,.817,.831,.844,.856,.867,.877,.887,.896,.904,.912,.919,.925,.931,.937,.942,.947,.951,.955,.959,.962,.965,.968,.971,.973,.976,.978,.98,.981,.983,.984,.986,.987,.988,.989,.99,.991,.992,.992,.993,.994,.994,.995,.995,.996,.996,.9963,.9967,.9969,.9972,.9975,.9977,.9979,.9981,.9982,.9984,.9985,.9987,.9988,.9989,1)"},spinTiming:void 0,opacityTiming:{duration:450,easing:"ease-out"},animated:!0,trend:(u,t)=>Math.sign(t-u),respectMotionPreference:!0,plugins:void 0,digits:void 0};class bi{constructor(t,a,i,{className:s,...d}={}){this.flow=t,this._integer=new na(t,a,{justify:"right",part:"integer"}),this._fraction=new na(t,i,{justify:"left",part:"fraction"}),this._inner=ae("span",{className:"number__inner"},[this._integer.el,this._fraction.el]),this.el=ae("span",{...d,part:"number",className:`number ${s??""}`},[this._inner])}willUpdate(){this._prevWidth=this.el.offsetWidth,this._prevLeft=this.el.getBoundingClientRect().left,this._integer.willUpdate(),this._fraction.willUpdate()}update({integer:t,fraction:a}){this._integer.update(t),this._fraction.update(a)}didUpdate(){const t=this.el.getBoundingClientRect();this._integer.didUpdate(),this._fraction.didUpdate();const a=this._prevLeft-t.left,i=this.el.offsetWidth,s=this._prevWidth-i;this.el.style.setProperty("--width",String(i)),this.el.animate({[Xe]:[`${a}px`,"0px"],[Pt]:[s,0]},{...this.flow.transformTiming,composite:"accumulate"})}}class ma{constructor(t,a,{justify:i,className:s,...d},h){this.flow=t,this.children=new Map,this.onCharRemove=g=>()=>{this.children.delete(g)},this.justify=i;const p=a.map(g=>this.addChar(g).el);this.el=ae("span",{...d,className:`section section--justify-${i} ${s??""}`},h?h(p):p)}addChar(t,{startDigitsAtZero:a=!1,...i}={}){const s=t.type==="integer"||t.type==="fraction"?new ba(this,t.type,a?0:t.value,t.pos,{...i,onRemove:this.onCharRemove(t.key)}):new vi(this,t.type,t.value,{...i,onRemove:this.onCharRemove(t.key)});return this.children.set(t.key,s),s}unpop(t){t.el.removeAttribute("inert"),t.el.style.top="",t.el.style[this.justify]=""}pop(t){t.forEach(a=>{a.el.style.top=`${a.el.offsetTop}px`,a.el.style[this.justify]=`${ni(a.el,this.justify)}px`}),t.forEach(a=>{a.el.setAttribute("inert",""),a.present=!1})}addNewAndUpdateExisting(t){const a=new Map,i=new Map,s=this.justify==="left",d=s?"prepend":"append";if(oi(t,h=>{let p;this.children.has(h.key)?(p=this.children.get(h.key),i.set(h,p),this.unpop(p),p.present=!0):(p=this.addChar(h,{startDigitsAtZero:!0,animateIn:!0}),a.set(h,p)),this.el[d](p.el)},{reverse:s}),this.flow.computedAnimated){const h=this.el.getBoundingClientRect();a.forEach(p=>{p.willUpdate(h)})}a.forEach((h,p)=>{h.update(p.value)}),i.forEach((h,p)=>{h.update(p.value)})}willUpdate(){const t=this.el.getBoundingClientRect();this._prevOffset=t[this.justify],this.children.forEach(a=>a.willUpdate(t))}didUpdate(){const t=this.el.getBoundingClientRect();this.children.forEach(s=>s.didUpdate(t));const a=t[this.justify],i=this._prevOffset-a;i&&this.children.size&&this.el.animate({transform:[`translateX(${i}px)`,"none"]},{...this.flow.transformTiming,composite:"accumulate"})}}class na extends ma{update(t){const a=new Map;this.children.forEach((i,s)=>{t.find(d=>d.key===s)||a.set(s,i),this.unpop(i)}),this.addNewAndUpdateExisting(t),a.forEach(i=>{i instanceof ba&&i.update(0)}),this.pop(a)}}class ra extends ma{update(t){const a=new Map;this.children.forEach((i,s)=>{t.find(d=>d.key===s)||a.set(s,i)}),this.pop(a),this.addNewAndUpdateExisting(t)}}class At{constructor(t,a,{onRemove:i,animateIn:s=!1}={}){this.flow=t,this.el=a,this._present=!0,this._remove=()=>{var d;this.el.remove(),(d=this._onRemove)==null||d.call(this)},this.el.classList.add("animate-presence"),this.flow.computedAnimated&&s&&this.el.animate({[He]:[-.9999,0]},{...this.flow.opacityTiming,composite:"accumulate"}),this._onRemove=i}get present(){return this._present}set present(t){if(this._present!==t){if(this._present=t,t?this.el.removeAttribute("inert"):this.el.setAttribute("inert",""),!this.flow.computedAnimated){t||this._remove();return}this.el.style.setProperty("--_number-flow-d-opacity",t?"0":"-.999"),this.el.animate({[He]:t?[-.9999,0]:[.999,0]},{...this.flow.opacityTiming,composite:"accumulate"}),t?this.flow.removeEventListener("animationsfinish",this._remove):this.flow.addEventListener("animationsfinish",this._remove,{once:!0})}}}class ga extends At{constructor(t,a,i,s){super(t.flow,i,s),this.section=t,this.value=a,this.el=i}}class ba extends ga{constructor(t,a,i,s,d){var h,p;const g=(((p=(h=t.flow.digits)==null?void 0:h[s])==null?void 0:p.max)??9)+1,e=Array.from({length:g}).map((F,D)=>{const V=ae("span",{className:"digit__num"},[document.createTextNode(String(D))]);return D!==i&&V.setAttribute("inert",""),V.style.setProperty("--n",String(D)),V}),r=ae("span",{part:`digit ${a}-digit`,className:"digit"},e);r.style.setProperty("--current",String(i)),r.style.setProperty("--length",String(g)),super(t,i,r,d),this.pos=s,this._onAnimationsFinish=()=>{this.el.classList.remove("is-spinning")},this._numbers=e,this.length=g}willUpdate(t){const a=this.el.getBoundingClientRect();this._prevValue=this.value;const i=a[this.section.justify]-t[this.section.justify],s=a.width/2;this._prevCenter=this.section.justify==="left"?i+s:i-s}update(t){this.el.style.setProperty("--current",String(t)),this._numbers.forEach((a,i)=>i===t?a.removeAttribute("inert"):a.setAttribute("inert","")),this.value=t}didUpdate(t){const a=this.el.getBoundingClientRect(),i=a[this.section.justify]-t[this.section.justify],s=a.width/2,d=this.section.justify==="left"?i+s:i-s,h=this._prevCenter-d;h&&this.el.animate({transform:[`translateX(${h}px)`,"none"]},{...this.flow.transformTiming,composite:"accumulate"});const p=this.getDelta();p&&(this.el.classList.add("is-spinning"),this.el.animate({[jt]:[-p,0]},{...this.flow.spinTiming??this.flow.transformTiming,composite:"accumulate"}),this.flow.addEventListener("animationsfinish",this._onAnimationsFinish,{once:!0}))}getDelta(){var t;if(this.flow.plugins)for(const s of this.flow.plugins){const d=(t=s.getDelta)==null?void 0:t.call(s,this.value,this._prevValue,this);if(d!=null)return d}const a=this.value-this._prevValue,i=this.flow.computedTrend||Math.sign(a);return i<0&&this.value>this._prevValue?this.value-this.length-this._prevValue:i>0&&this.value<this._prevValue?this.length-this._prevValue+this.value:a}}class vi extends ga{constructor(t,a,i,s){const d=ae("span",{className:"symbol__value",textContent:i});super(t,i,ae("span",{part:`symbol ${a}`,className:"symbol"},[d]),s),this.type=a,this._children=new Map,this._onChildRemove=h=>()=>{this._children.delete(h)},this._children.set(i,new At(this.flow,d,{onRemove:this._onChildRemove(i)}))}willUpdate(t){if(this.type==="decimal")return;const a=this.el.getBoundingClientRect();this._prevOffset=a[this.section.justify]-t[this.section.justify]}update(t){if(this.value!==t){const a=this._children.get(this.value);if(a.present=!1,this._children.has(t)){const i=this._children.get(t);i.present=!0}else{const i=ae("span",{className:"symbol__value",textContent:t});this.el.appendChild(i),this._children.set(t,new At(this.flow,i,{animateIn:!0,onRemove:this._onChildRemove(t)}))}}this.value=t}didUpdate(t){if(this.type==="decimal")return;const a=this.el.getBoundingClientRect()[this.section.justify]-t[this.section.justify],i=this._prevOffset-a;i&&this.el.animate({transform:[`translateX(${i}px)`,"none"]},{...this.flow.transformTiming,composite:"accumulate"})}}const yi=["aria-label","manual","trend","plugins","animated","transformTiming","spinTiming","opacityTiming","respectMotionPreference","data-will-change","digits","innerHTML","data"],wi=$a({inheritAttrs:!1,__name:"index",props:{transformTiming:{default:()=>K.defaultProps.transformTiming},spinTiming:{default:()=>K.defaultProps.spinTiming},opacityTiming:{default:()=>K.defaultProps.opacityTiming},animated:{type:Boolean,default:()=>K.defaultProps.animated},respectMotionPreference:{type:Boolean,default:()=>K.defaultProps.respectMotionPreference},trend:{type:[Number,Function],default:()=>K.defaultProps.trend},plugins:{default:()=>K.defaultProps.plugins},digits:{default:()=>K.defaultProps.digits},locales:{},format:{},value:{},prefix:{},suffix:{},willChange:{type:Boolean,default:!1}},emits:["animationsstart","animationsfinish"],setup(u,{expose:t,emit:a}){const i=W();t({el:i});const s=a,d=de(()=>new Intl.NumberFormat(u.locales,u.format)),h=de(()=>si(u.value,d.value,u.prefix,u.suffix)),p=void 0,g=Ra(li,void 0);return g==null||g(i,h),(e,r)=>(P(),U("number-flow-vue",Ta({ref_key:"el",ref:i,"aria-label":h.value.valueAsString},e.$attrs,{role:"img",manual:!!T(g),trend:e.trend,plugins:e.plugins,animated:e.animated,transformTiming:e.transformTiming,spinTiming:e.spinTiming,opacityTiming:e.opacityTiming,respectMotionPreference:e.respectMotionPreference,"data-will-change":e.willChange?"":void 0,digits:e.digits,innerHTML:T(p),"data-allow-mismatch":"",onAnimationsstart:r[0]||(r[0]=F=>s("animationsstart")),onAnimationsfinish:r[1]||(r[1]=F=>s("animationsfinish")),data:h.value}),null,16,yi))}});qa("number-flow-vue",K);const oa={__name:"ChartRsi",setup(u,{expose:t}){const a=new ca,i=$t();let s=[];const d=W(null);let h;return Et(()=>{s=i.chart.data.flatMap(F=>{let D={value:F.rsi,time:F.time};return F.rsi>75&&(D.color="#f70776"),F.rsi<25&&(D.color="#e0ffcd"),D});const e=document.querySelector("#chart-rsi");let r=a.getConfigChart(e.offsetWidth,e.offsetHeight);r.priceLineVisible=!1,r.priceLineColor="transparent",r.lastValueVisible=!1,r.localization={priceFormatter:F=>parseFloat(F).toFixed(2),timeFormatter:F=>Pa(new Date(F)).format("DD-MM-YYYY HH:mm:ss")},d.value=da(e,r),h=d.value.addLineSeries({color:"rgba(4, 111, 232, 1)",lineWidth:1,priceLineVisible:!1}),h.setData(s),console.log("dataRsi l:",s.length)}),t({chart:d,updateAndRecalculate:()=>{s=i.chart.data.flatMap(e=>{if(!e.rsi)return[];let r={value:e.rsi,time:e.time};return e.rsi>75&&(r.color="#f70776"),e.rsi<25&&(r.color="#e0ffcd"),r}),h.setData(s)},update:e=>{h.update(e),d.value.applyOptions({watermark:{color:"rgba(255, 255, 255, 1)",visible:!0,text:`RSI 14 SMA ${e.value}`,fontSize:11,horzAlign:"left",vertAlign:"top"}})}}),(e,r)=>(P(),U(ja,null,[r[0]||(r[0]=L("div",{id:"chart-rsi"},[L("div",{class:"vertical-cursor"})],-1)),r[1]||(r[1]=L("div",{id:"chart-macd"},null,-1))],64))}},_i={class:"target-selector"},Si={class:"panelTarget"},Vi={class:"selectors-areas"},Li={class:"target-symbols"},ki={class:"target-temporality"},Ci={class:"legend"},Di={class:"l-hma10"},Mi={key:0,id:"hma10-label"},xi={class:"l-hma20"},Ai={key:0,id:"hma20-label"},Ei={class:"l-ema200"},$i={key:0,id:"ema200-label"},Ri={class:"details"},Ti={key:0,class:"d-price"},Pi={key:1,class:"d-high"},ji={key:2,class:"d-low"},Fi={key:3,class:"d-close"},Wi={key:4,class:"d-rsi"},Ii={key:5,class:"d-move"},Ui={key:6,class:"d-ps"},Bi={class:"timer-counter"},kt="#chart-main",Ni={__name:"ChartMobile",emits:["refresh"],setup(u,{expose:t,emit:a}){var Yt,Zt;const i=a,s=Fa(),d=Wa(),h=s.params&&s.params&&s.params.symbol?s.params.symbol.toString().toUpperCase():"BTCUSDT",p=s.params&&s.params&&s.params.temporality?s.params.temporality.toString().toLocaleLowerCase():"4h",g=Ia(),e=$t(),r=new ca,F=W(null),D=W(null),V=W(null),Y=W(null),A=W(!1),M=W(!1),le=W(null);let m,I;const G=W(0),ue=W(0),Ft=W("15m");let ze,qe,Ye,De,Me,xe,Ae,Ze,Ke,Ge,Qe,Je,pe,fe,me,ge,be,Ee,ne,ve,ye,we,_e,Se,$e,re,et="#e0ffcd",tt="#f96d00",at="#ff347f",it="#a393eb",st="#35bcbf",lt="#8ed6ff",nt="#b6cdbd",rt="#cbf078",ot="#0092ca",ct="#e84a5f",ht="#a393eb",dt="#defcf9",ut="#35bcbf",pt="#93deff",ft,Ve;const mt=W(null),Q=je({bajista:[],alcista:[]}),q=je({resistencia:null,soporte:null});let oe=[],Le=[],Re=0,gt=null;const ce=je({alcistas:[],bajistas:[]}),b=je({price:null,close:null,high:null,low:null,rsi:null,rsih:null,higl:null,ps:null}),va=W([{value:"1m",label:"1m"},{value:"5m",label:"5m"},{value:"15m",label:"15m"},{value:"30m",label:"30m"},{value:"1h",label:"1h"},{value:"2h",label:"2h"},{value:"4h",label:"4h"},{value:"1d",label:"1d"},{value:"3d",label:"3d"},{value:"1w",label:"1w"}].flatMap(c=>p==c.label?{value:c.value,label:c.label,selected:!0}:{value:c.value,label:c.label}));(Yt=s==null?void 0:s.params)!=null&&Yt.symbol?e.chart.symbols=String(s.params.symbol).toUpperCase():e.chart.symbols=h,(Zt=s==null?void 0:s.params)!=null&&Zt.temporality?e.chart.temporality=s.params.temporality:e.chart.temporality=p;const bt=W([]),vt=W(!1);function Te(){const c=new Date().getTime()+mt.value*1e3-Date.parse(new Date),l=Math.floor(c/1e3%60),o=Math.floor(c/1e3/60%60),f=Math.floor(c/(1e3*60*60)%24),v=Math.floor(c/(1e3*60*60*24));return{total:c,days:v<10?"0"+v:v,hours:f<10?"0"+f:f,minutes:o<10?"0"+o:o,seconds:l<10?"0"+l:l}}const Wt=de(()=>Te().seconds),It=de(()=>Te().minutes),ya=de(()=>Te().hours),wa=de(()=>Te().days),Pe=()=>{var o;const c=document.querySelector(kt);c!=null&&c.offsetHeight&&(m!=null&&m.resize)&&m.resize(parseInt(g.w/1.008),parseInt(c.offsetHeight));const l=document.querySelector("div#chart-rsi>div.vertical-cursor");(o=D==null?void 0:D.value)!=null&&o.chart&&l&&D.value.chart.resize(parseInt(document.querySelector("div.tv-lightweight-charts").offsetWidth),parseInt(document.querySelector("div#chart-rsi>div.vertical-cursor").offsetHeight))},Ut=()=>{const l=r.kernelChannel(e.chart.data,89,3.5),o=l.flatMap(w=>({time:w.time,value:parseFloat(parseFloat(w.upperChannel).toFixed(4))})),f=l.flatMap(w=>({time:w.time,value:parseFloat(parseFloat(w.lowerChannel).toFixed(4))})),v=l.flatMap((w,$)=>{const x=parseFloat(w.smoothedData)<e.chart.data[$].close?"#A6FF96":"#DA0C81";return{time:w.time,value:parseFloat(parseFloat(w.smoothedData).toFixed(4)),color:x}});ze.setData(v),qe.setData(o),Ye.setData(f)};k(()=>g.w,function(c){Pe()}),k(()=>g.h,function(c){Pe()}),k(()=>e.chart.futures,async function(){const l=(await e.searchSymbols()).flatMap(o=>e.chart.symbols!=o.symbol?{label:o.symbol,value:o.symbol}:{label:o.symbol,value:o.symbol,selected:!0});bt.value=l,yt({value:e.chart.symbols})});const _a=Kt(function(c){M.value=!0;let l=e.chart.data[0].time;r.searchData({exchange:e.getExchange,interval:e.getTemporality,symbolsPairs:e.getSymbol,limit:500,cci:e.chart.indicators.cci,endTime:l,type:e.chart.futures?"futures":"spot"}).then(o=>{o.pop(),console.log({previusData:o});const f=[...o,...e.chart.data];f.sort((v,w)=>parseInt(v.time)-parseInt(w.time)),e.chart.data=f,I.setData(f),c(),e.chart.indicators.macd&&V.value.processData(),D.value&&D.value.updateAndRecalculate()}).finally(function(){M.value=!1})},1e3),Sa=()=>{var c;if((c=e==null?void 0:e.chart)!=null&&c.data&&e.chart.data.length>100){const l=e.chart.data.flatMap(o=>o.close);r.calculoRSI(l.slice(-100)).then(o=>{var f;ue.value=o.pop(),D.value&&((f=e==null?void 0:e.chart)!=null&&f.data)&&e.chart.data.length>0&&e.chart.data[e.chart.data.length-1]&&(e.chart.data[e.chart.data.length-1].rsi=ue,e.chart.indicators.rsi&&e.chart.data&&e.chart.data.length>0&&D.value.update({value:ue,time:e.chart.data[e.chart.data.length-1].time}))})}},Va=Kt(async()=>{const c=String(e.getSymbol).toLowerCase();Y.value=await new WebSocket(`wss://fstream.binance.com/ws/${c}@kline_${e.getTemporality}`),Y.value.addEventListener("message",async function(l){var f,v,w,$;if(vt.value&&vt.value==!0||g.loading)return;const o=JSON.parse(l.data);if(l&&(o!=null&&o.s)&&o.result==null&&(o!=null&&o.k)&&(o==null?void 0:o.k)!=null&&((f=o==null?void 0:o.k)==null?void 0:f.i)==e.getTemporality&&e.chart.data.length&&String(o.s).toUpperCase()==String(e.getSymbol).toUpperCase()){const x=parseFloat(o.k.c),E=o.k.T?parseInt(o.k.T):null,B=o.k.x?o.k.x:!1,C=o.k.V?parseFloat(o.k.V):null;Ve&&Ve.update({value:C,time:E,color:"#d1e1e159"}),G.value=x,b.price=x>100?parseFloat(x).toFixed(2):x;const _={time:parseInt(o.k.T),open:parseFloat(o.k.o),high:parseFloat(o.k.h),low:parseFloat(o.k.l),close:x,value:x,volume:C};if(e.chart.data[e.chart.data.length-1].time=_.time,e.chart.data[e.chart.data.length-1].open=_.open,e.chart.data[e.chart.data.length-1].high=_.high,e.chart.data[e.chart.data.length-1].low=_.low,e.chart.data[e.chart.data.length-1].close=_.close,e.chart.data[e.chart.data.length-1].value=_.value,e.chart.data[e.chart.data.length-1].volume=_.volume,Sa(),B&&((v=e==null?void 0:e.chart)!=null&&v.data)&&(await ka(),console.log("xClosed")),!A.value&&((w=e==null?void 0:e.chart)!=null&&w.data)&&e.chart.data.length>2&&e.chart.data[e.chart.data.length-1].high)if(e.chart.data[e.chart.data.length-1].high=_.high,e.chart.data[e.chart.data.length-1].low=_.low,e.chart.data[e.chart.data.length-1].close=_.close,e.chart.data[e.chart.data.length-1].volume=_.volume,e.chart.data[e.chart.data.length-1].value=_.value,($=e==null?void 0:e.getIndicators)!=null&&$.heikinAshi){let ke=r.calculoNextHeikinAskiCandle(e.chart.data,e.chart.data[e.chart.data.length-1]);ke.time=_.time,I.update(ke)}else I.update(_);mt.value=parseInt((_.time-new Date().getTime())/1e3)}else if(o.s&&String(o.s).toUpperCase()!=String(e.getSymbol).toUpperCase()){const E=`${String(o.s).toLowerCase()}@kline_${e.getTemporality}`;Y.value.send(JSON.stringify({method:"UNSUBSCRIBE",params:[E],id:new Date().getTime()})),console.log("* UNSUBSCRIBE",{dtJson:o,evt:l,previusSocket:E,s:e.getSymbol},e.getSymbol,l.currentTarget,o.s===e.getSymbol),Y.value.send(JSON.stringify({method:"LIST_SUBSCRIPTIONS",id:new Date().getTime()}))}}),console.log("openSocket")}),La=async c=>{e.chart.temporality=c.value,yt({value:String(e.getSymbol)})},yt=c=>{g.loading=!0,vt.value=!0,gt=c.value;const o=`${String(e.getSymbol).toLowerCase()}@kline_${e.getTemporality}`;if(e.chart.symbols=String(gt).toUpperCase(),d.push({name:"alpha:data",params:{symbol:String(gt).toLowerCase(),temporality:e.chart.temporality}}),Y.value)return Y.value.send(JSON.stringify({method:"UNSUBSCRIBE",params:[o],id:1})),Y.value.send(JSON.stringify({method:"SUBSCRIBE",params:[`${String(e.getSymbol).toLowerCase()}@kline_${e.getTemporality}`],id:1})),i("refresh")},ka=async(c=!0)=>{A.value=c,r.recalculeIndicators(e.chart.data).then(l=>{var v;e.chart.data[e.chart.data.length-1]=l.last;const o=e.chart.data[e.chart.data.length-1].time-e.chart.data[e.chart.data.length-2].time;console.log({dataUpdate:l});const f={open:l.last.close,close:l.last.close,high:l.last.close,low:l.last.close,time:l.last.time+o,macd:l.last.macd,volume:(v=l==null?void 0:l.last)!=null&&v.volume?l.last.volume:0,bb:{middle:l.last.bb.middle,upper:l.last.bb.upper,lower:l.last.bb.lower,pb:l.last.bb.pb},rsi:l.last.bb.rsi,hma10:l.last.hma10,hma20:l.last.hma20,value:l.last.value};e.chart.data.push(f),wt(),A.value=!1}),e.chart.indicators.macd&&V.value&&V.value.processData()},Ca=()=>{m&&(De=m.addLineSeries({color:"#f6483e33",lineWidth:2,axisLabelVisible:!1,priceLineVisible:!1,lastValueVisible:!1,priceLineWidth:!1,crosshairMarkerVisible:!1,lineStyle:2}),Me=m.addLineSeries({color:"#f6483e33",lineWidth:7,axisLabelVisible:!1,priceLineVisible:!1,lastValueVisible:!1,priceLineWidth:!1,crosshairMarkerVisible:!1,lineStyle:0}),xe=m.addLineSeries({color:"#f0f8ff8f",lineWidth:1,axisLabelVisible:!1,priceLineVisible:!1,lastValueVisible:!1,priceLineWidth:!1,crosshairMarkerVisible:!1,lineStyle:2}),Ae=m.addLineSeries({color:"#00ffa521",lineWidth:7,axisLabelVisible:!1,priceLineVisible:!1,lastValueVisible:!1,priceLineWidth:!1,crosshairMarkerVisible:!1,lineStyle:0}),ft=m.addLineSeries({color:"yellow",lineWidth:1,axisLabelVisible:!1,priceLineVisible:!1,lastValueVisible:!1,priceLineWidth:!1,crosshairMarkerVisible:!1,lineStyle:3}),m.addLineSeries({color:"yellow",lineWidth:1,axisLabelVisible:!1,priceLineVisible:!1,lastValueVisible:!1,priceLineWidth:!1,crosshairMarkerVisible:!1,lineStyle:2}),Ze=m.addLineSeries({color:"#84ff3d8a",lineWidth:1,axisLabelVisible:!1,priceLineVisible:!1,lastValueVisible:!1,priceLineWidth:!1,crosshairMarkerVisible:!1,lineStyle:0}),Ke=m.addLineSeries({color:"orange",lineWidth:1,axisLabelVisible:!1,priceLineVisible:!1,lastValueVisible:!1,priceLineWidth:!1,crosshairMarkerVisible:!1,lineStyle:0}),Ge=m.addLineSeries({color:"#f70776",lineWidth:1,axisLabelVisible:!1,priceLineVisible:!1,lastValueVisible:!1,priceLineWidth:!1,crosshairMarkerVisible:!1,lineStyle:0}),Qe=m.addLineSeries({color:"#00bbf0",lineWidth:1,axisLabelVisible:!1,priceLineVisible:!1,lastValueVisible:!1,priceLineWidth:!1,crosshairMarkerVisible:!1,lineStyle:0}),Je=m.addLineSeries({color:"#bae8e8",lineWidth:1,axisLabelVisible:!1,priceLineVisible:!1,lastValueVisible:!1,priceLineWidth:!1,crosshairMarkerVisible:!1,lineStyle:0}),pe=m.addLineSeries({color:rt,lineWidth:1,axisLabelVisible:!1,priceLineVisible:!1,lastValueVisible:!1,priceLineWidth:!1,crosshairMarkerVisible:!1,lineStyle:0}),fe=m.addLineSeries({color:ot,lineWidth:1,axisLabelVisible:!1,priceLineVisible:!1,lastValueVisible:!1,priceLineWidth:!1,crosshairMarkerVisible:!1,lineStyle:0}),me=m.addLineSeries({color:ct,lineWidth:1,axisLabelVisible:!1,priceLineVisible:!1,lastValueVisible:!1,priceLineWidth:!1,crosshairMarkerVisible:!1,lineStyle:0}),ge=m.addLineSeries({color:ht,lineWidth:1,axisLabelVisible:!1,priceLineVisible:!1,lastValueVisible:!1,priceLineWidth:!1,crosshairMarkerVisible:!1,lineStyle:0}),be=m.addLineSeries({color:dt,lineWidth:1,axisLabelVisible:!1,priceLineVisible:!1,lastValueVisible:!1,priceLineWidth:!1,crosshairMarkerVisible:!1,lineStyle:0}),Ee=m.addLineSeries({color:ut,lineWidth:1,axisLabelVisible:!1,priceLineVisible:!1,lastValueVisible:!1,priceLineWidth:!1,crosshairMarkerVisible:!1,lineStyle:0}),ne=m.addLineSeries({color:pt,lineWidth:1,axisLabelVisible:!1,priceLineVisible:!1,lastValueVisible:!1,priceLineWidth:!1,crosshairMarkerVisible:!1,lineStyle:0}),ve=m.addLineSeries({color:et,lineWidth:1,axisLabelVisible:!1,priceLineVisible:!1,lastValueVisible:!1,priceLineWidth:!1,crosshairMarkerVisible:!1,lineStyle:0}),ye=m.addLineSeries({color:tt,lineWidth:1,axisLabelVisible:!1,priceLineVisible:!1,lastValueVisible:!1,priceLineWidth:!1,crosshairMarkerVisible:!1,lineStyle:0}),we=m.addLineSeries({color:at,lineWidth:1,axisLabelVisible:!1,priceLineVisible:!1,lastValueVisible:!1,priceLineWidth:!1,crosshairMarkerVisible:!1,lineStyle:0}),_e=m.addLineSeries({color:it,lineWidth:1,axisLabelVisible:!1,priceLineVisible:!1,lastValueVisible:!1,priceLineWidth:!1,crosshairMarkerVisible:!1,lineStyle:0}),Se=m.addLineSeries({color:st,lineWidth:1,axisLabelVisible:!1,priceLineVisible:!1,lastValueVisible:!1,priceLineWidth:!1,crosshairMarkerVisible:!1,lineStyle:0}),$e=m.addLineSeries({color:lt,lineWidth:1,axisLabelVisible:!1,priceLineVisible:!1,lastValueVisible:!1,priceLineWidth:!1,crosshairMarkerVisible:!1,lineStyle:0}),re=m.addLineSeries({color:nt,lineWidth:1,axisLabelVisible:!1,priceLineVisible:!1,lastValueVisible:!1,priceLineWidth:!1,crosshairMarkerVisible:!1,lineStyle:0}),ze=m.addLineSeries({color:"yellow",lineWidth:4,axisLabelVisible:!1,priceLineVisible:!1,lastValueVisible:!1,priceLineWidth:!1,crosshairMarkerVisible:!1,lineStyle:1}),qe=m.addLineSeries({color:"#c1c1c1",lineWidth:1,axisLabelVisible:!1,priceLineVisible:!1,lastValueVisible:!1,priceLineWidth:!1,crosshairMarkerVisible:!1,lineStyle:1}),Ye=m.addLineSeries({color:"#c1c1c1",lineWidth:1,axisLabelVisible:!1,priceLineVisible:!1,lastValueVisible:!1,priceLineWidth:!1,crosshairMarkerVisible:!1,lineStyle:1}))},Bt=()=>{const l=e.chart.data.flatMap(y=>y).sort((y,j)=>parseInt(j.time)-parseInt(y.time));let o=25,f=0,v=0,w=[],$=[],x=[],E=[];for(var B=0;B<l.length;B++)if(f++,f==o){const y=l.slice(parseInt(v*o),parseInt(v*o)+o),j=y.flatMap(H=>H),_t=y.flatMap(H=>H),R=j.sort((H,Vt)=>parseFloat(Vt.high)-parseFloat(H.high)),St=_t.sort((H,Vt)=>parseFloat(H.low)-parseFloat(Vt.low));if(!R||!R[0])return;const O=R[0];if(($.length==0&&O||O!=null&&O.high&&$[$.length-1].high<O.high)&&$.push(O),w.length==0&&O?(w.push(O),E.push({linea:[O]})):O!=null&&O.high&&w[w.length-1].high>O.high&&w.push(O),St&&St[0]){const H=St[0];(x.length==0&&H||H!=null&&H.low&&x[x.length-1].low>H.low)&&x.push(H)}f=0,v++}console.log({highDescend:$,highAccend:w,lowDescend:x,marcaciones_leneas_asc:E});const _=e.chart.data.slice(-89).sort((y,j)=>j.high===y.high?parseInt(j.time)-parseInt(y.time):parseFloat(y.high)-parseFloat(j.high));_.sort((y,j)=>parseInt(y.time)-parseInt(j.time)),_.flatMap(y=>y).sort((y,j)=>parseFloat(j.high)-parseFloat(y.high));let n=null;for(var B=_.length-1;B>=0;B--)n?_[B].high>n.high&&(n=_[B]):n=_[B];w.flatMap(y=>({time:y.time,value:y.high,color:"#EC8F5E"})),m.addLineSeries({color:"#EC8F5E",lineWidth:3,axisLabelVisible:!1,priceLineVisible:!1,lastValueVisible:!1,crosshairMarkerVisible:!1,lineStyle:1});const S=$.flatMap(y=>({time:y.time,value:y.high,color:"olive"}));q.resistencia&&m&&q.resistencia.setData([]),q.soporte&&m&&q.soporte.setData([]),q.resistencia=m.addLineSeries({color:"olive",lineWidth:3,axisLabelVisible:!1,priceLineVisible:!1,lastValueVisible:!1,crosshairMarkerVisible:!1,lineStyle:1}),q.soporte=m.addLineSeries({color:"#fff",lineWidth:3,axisLabelVisible:!1,priceLineVisible:!1,lastValueVisible:!1,crosshairMarkerVisible:!1,lineStyle:1});const N=S.flatMap(y=>y);N.sort((y,j)=>parseInt(y.time)-parseInt(j.time)),q.resistencia.setData(N);const Z=x.flatMap(y=>({time:y.time,value:y.low,color:"#fff"}));q.soporte.setData(Z.sort((y,j)=>parseInt(y.time)-parseInt(j.time))),console.log("lineaTendenciaAlcista::..")},Nt=()=>{if(Me.setData([]),Ae.setData([]),xe.setData([]),!e.chart.indicators.bb)return;const c=e.chart.data.flatMap(f=>{let v={value:f.bb.upper,time:f.time};return f.high>f.bb.upper&&(v.color="#f443369e"),v}),l=e.chart.data.flatMap(f=>{let v={value:f.bb.lower,time:f.time};return f.low<f.bb.lower&&(v.color="#00ffa58a"),v}),o=e.chart.data.flatMap(f=>({value:f.bb.middle,time:f.time}));c.sort((f,v)=>f.time-v.time),l.sort((f,v)=>f.time-v.time),o.sort((f,v)=>f.time-v.time),Me.setData(c),Ae.setData(l),xe.setData(o)},he=()=>{if(e.chart.data=e.chart.data.sort((c,l)=>c.time<l.time?-1:c.time>l.time?1:0),e.chart.indicators.hma10){const c=e.chart.data.flatMap(l=>({value:l.hma10,time:l.time}));Ze.setData(c)}if(e.chart.indicators.hma20){const c=e.chart.data.flatMap(l=>({value:l.hma20,time:l.time}));Ke.setData(c)}if(e.chart.indicators.hma55){const c=r.calculateHMA(e.chart.data,55,"#f70776");Ge.setData(c)}if(e.chart.indicators.hma89){const c=r.calculateHMA(e.chart.data,89,"#9896f1");Qe.setData(c)}if(e.chart.indicators.hma233){const c=r.calculateHMA(e.chart.data,233,"#00bbf0");Je.setData(c)}},Ot=()=>{if(!e.chart.indicators.psar){De.setData([]);return}const c=e.chart.data.flatMap(v=>v.high),l=e.chart.data.flatMap(v=>v.low),f=r.calculoPSAR(l,c).flatMap((v,w)=>({value:v,time:e.chart.data[w].time,color:e.chart.data[w].close>v?"aqua":"red"}));De.setData(f)},Da=()=>{ve.setData([]),ye.setData([]),we.setData([]),_e.setData([]),Se.setData([]),$e.setData([]),re.setData([]),e.chart.indicators.sma10&&ve.setData(r.calculateEMA(e.chart.data,10,et)),e.chart.indicators.sma20&&ye.setData(r.calculateEMA(e.chart.data,20,tt)),e.chart.indicators.sma55&&we.setData(r.calculateEMA(e.chart.data,55,at)),e.chart.indicators.sma89&&_e.setData(r.calculateEMA(e.chart.data,89,it)),e.chart.indicators.sma100&&Se.setData(r.calculateEMA(e.chart.data,100,st)),e.chart.indicators.sma200&&re.setData(r.calculateEMA(e.chart.data,200,lt)),e.chart.indicators.sma233&&re.setData(r.calculateEMA(e.chart.data,233,nt))},Ma=()=>{pe.setData([]),fe.setData([]),me.setData([]),ge.setData([]),be.setData([]),Ee.setData([]),ne.setData([]),e.chart.indicators.ema10&&pe.setData(r.calculateEMA(e.chart.data,10,rt)),e.chart.indicators.ema20&&fe.setData(r.calculateEMA(e.chart.data,20,ot)),e.chart.indicators.ema55&&me.setData(r.calculateEMA(e.chart.data,55,ct)),e.chart.indicators.ema89&&ge.setData(r.calculateEMA(e.chart.data,89,ht)),e.chart.indicators.ema100&&be.setData(r.calculateEMA(e.chart.data,100,dt)),e.chart.indicators.ema200&&ne.setData(r.calculateEMA(e.chart.data,200,ut)),e.chart.indicators.ema233&&ne.setData(r.calculateEMA(e.chart.data,233,pt))},Ht=()=>{const c=new Oa(e.chart.data);return new Promise((l,o)=>{c.agregarCallback(f=>{Q.alcista=f.alcista,Q.bajista=f.bajista}),l(c.iniciarProceso())})},Xt=()=>{setTimeout(function(){new Promise((c,l)=>{Q.bajista.length>0&&Q.bajista.forEach(o=>{let f=m.addLineSeries({color:"#fff",lineWidth:1,axisLabelVisible:!1,priceLineVisible:!1,lastValueVisible:!1,crosshairMarkerVisible:!1,lineStyle:0});f.setData(o),ce.bajistas.push(f)}),Q.alcista.length>0&&Q.alcista.forEach(o=>{let f=m.addLineSeries({color:"#fff",lineWidth:1,axisLabelVisible:!1,priceLineVisible:!1,lastValueVisible:!1,crosshairMarkerVisible:!1,lineStyle:0});f.setData(o),ce.alcistas.push(f)}),c(!0)})},0)},zt=async()=>{const c=await r.calculoVelasHeikinAshi(e.chart.data);I.setData(c)},wt=()=>{var c,l;Nt(),he(),Ma(),Da(),Ot(),(c=e==null?void 0:e.getIndicators)!=null&&c.heikinAshi&&e.getIndicators.heikinAshi==!0&&zt(),(l=e==null?void 0:e.getIndicators)!=null&&l.divergences&&setTimeout(function(){Promise.resolve(Ht()).then(Xt())},0),e.chart.indicators.kernelChannel&&Ut(),e.chart.indicators.srDinamic&&Bt(),Ea()},xa=()=>{const c=new Date().toLocaleString();G.value&&G.value&&G.value!=null&&G.value>0&&!isNaN(G.value)&&""+parseFloat(G.value).toFixed(4),m.applyOptions({watermark:{color:"#00ff11",visible:!0,text:`Topacio ${String(e.getSymbol).toUpperCase()}  ${e.getTemporality}  ${c}`,fontSize:14,horzAlign:"left",vertAlign:"top"}})},Aa=c=>{c.flatMap(C=>C).sort((C,_)=>C.value-_.value).slice(-7).flatMap(C=>C.time);const f=c.map(C=>C.value),v=f.reduce((C,_)=>C+_,0)/f.length,w={};f.forEach(C=>{w[C]=(w[C]||0)+1}),Object.keys(w).reduce((C,_)=>w[C]>w[_]?C:_);const $=f.slice().sort((C,_)=>C-_),x=Math.floor($.length/2);$.length%2===0?($[x-1]+$[x])/2:$[x];const E=parseInt(v*2.5);return c.flatMap(C=>(C.value>=E&&(C.color="#96EFFF"),C))},Ea=()=>{const c=e.chart.data.flatMap(o=>({time:o.time,value:o.volume,color:"#d1e1e159"})),l=Aa(c);Ve.setData(l)};Et(async()=>{g.loading=!0,g.openMenuMobile=!1;const c=document.querySelector(kt),l=parseInt(g.w/1.005),o=parseInt(c.offsetHeight),f=r.getConfigChart(l,o),v=r.getConfigVelasTransparentes();e.chart.data=await r.searchData({exchange:e.getExchange,interval:e.getTemporality,symbolsPairs:e.getSymbol,limit:500,cci:e.chart.indicators.cci});const w=document.querySelector(kt);console.log({configChart:f},e.chart.data),m=da(w,f),I=m.addCandlestickSeries(v),I.setData(e.chart.data),Ve=m.addHistogramSeries({lastValueVisible:!1,priceLineVisible:!1,priceFormat:{type:"volume"},priceScaleId:"volumen"}),Ve.priceScale().applyOptions({priceFormat:{type:"volume"},scaleMargins:{top:.85,bottom:0}});const x=(await e.searchSymbols()).flatMap(n=>e.chart.symbols!=n.symbol?{label:n.symbol,value:n.symbol}:{label:n.symbol,value:n.symbol,selected:!0});bt.value=x,Ca(),wt(),xa();let E=m.timeScale().getVisibleLogicalRange(),B=E&&(E!=null&&E.from)?parseInt(E.from):null;function C(n){var N,Z,y,j;const S=document.querySelector("div#chart-rsi>div.vertical-cursor");if(n!=null&&n.time&&m){const _t=m.timeScale().getVisibleLogicalRange(),R=parseInt(n.logical);(N=n==null?void 0:n.point)!=null&&N.x&&S&&(D.value.chart.timeScale().setVisibleLogicalRange(_t),S.style=`transform:translateX(${n.point.x}px)`),e.chart.data[R]&&(b.rsi=e.chart.data[R].rsi,b.low=e.chart.data[R].low,b.high=e.chart.data[R].high,b.close=e.chart.data[R].close,b.move=r.calculatePercentageBetweenValues(b.high,b.low),b.ps=null,b.hma10=(Z=e.chart.data[R])!=null&&Z.hma10?parseFloat(e.chart.data[R].hma10).toFixed(4):null,b.hma20=(y=e.chart.data[R])!=null&&y.hma20?parseFloat(e.chart.data[R].hma20).toFixed(4):null,e.chart.data[R].bb&&b.high>e.chart.data[R].bb.upper&&(b.ps=r.calculatePercentageBetweenValues(b.high,e.chart.data[R].bb.upper)),e.chart.data[R].bb&&b.low<e.chart.data[R].bb.lower&&(b.ps=r.calculatePercentageBetweenValues(e.chart.data[R].bb.lower,b.low))),E=m.timeScale().getVisibleLogicalRange(),B=E!=null&&E.from?parseInt(E.from):null,B&&B<250&&!M.value&&_a(wt)}else S&&(S.style="display:none"),b.rsi=null,b.ps=null,b.move=null,b.low=null,b.high=null,b.close=null,b.ema200=null,b.hma10=null,b.hma20=null;(j=n==null?void 0:n.point)!=null&&j.y&&(Re=I.coordinateToPrice(n.point.y))}m.subscribeCrosshairMove(C),document.addEventListener("keydown",n=>{if(oe[n.key]=!0,oe.Alt&&n.key=="h"){const S=I.createPriceLine({price:Re,color:"#FFF"});Le.push(S)}if(oe.Alt&&n.key=="s"){const S=I.createPriceLine({price:Re,color:"#ff006e",title:"Short"});Le.push(S)}if(oe.Alt&&n.key=="l"){const S=I.createPriceLine({price:Re,color:"#00ff11",title:"Long"});Le.push(S)}(oe.Alt&&n.key=="r"||n.key=="c")&&(console.log("* Cleaning Lines"),Le.map(S=>I.removePriceLine(S)),Le=[])}),document.addEventListener("keyup",n=>{delete oe[n.key]}),document.querySelector("div.container-chart").addEventListener("click",n=>{var S;if((S=window==null?void 0:window.visualViewport)!=null&&S.width){const N=window.visualViewport.width,Z=parseInt(N)*.2;n.x>Z&&e.chart.menuOpen===!0&&(e.chart.menuOpen=!1)}}),setTimeout(function(){Pe()},1e3),Va(),g.loading=!1,k(()=>e.chart.indicators.srDinamic,n=>{!n&&q.resistencia&&q.soporte?(q.resistencia.setData([]),q.soporte.setData([])):Bt()}),k(()=>e.chart.indicators.cci,async n=>{const S=await r.searchData({exchange:e.getExchange,interval:e.getTemporality,symbolsPairs:e.getSymbol,limit:500,cci:e.chart.indicators.cci});S.sort((N,Z)=>parseInt(N.time)-parseInt(Z.time)),e.chart.data=S,I.setData(S),console.log("newValue",n,{allData:S})}),k(()=>e.chart.indicators.psar,n=>{n?Ot():De.setData([])}),k(()=>e.chart.indicators.kernelChannel,n=>{n?Ut():(ze.setData([]),qe.setData([]),Ye.setData([]))}),k(()=>e.chart.indicators.bb,n=>{n?Nt():(Me.setData([]),Ae.setData([]),xe.setData([]))}),k(()=>e.chart.indicators.hma10,n=>{n?he():Ze.setData([])}),k(()=>e.chart.indicators.hma20,n=>{n?he():Ke.setData([])}),k(()=>e.chart.indicators.hma55,n=>{n?he():Ge.setData([])}),k(()=>e.chart.indicators.hma89,n=>{n?he():Qe.setData([])}),k(()=>e.chart.indicators.hma233,n=>{n?he():Je.setData([])}),k(()=>e.chart.indicators.heikinAshi,n=>{n?zt():I.setData(e.chart.data)}),k(()=>e.chart.indicators.ema10,n=>{n?pe.setData(r.calculateEMA(e.chart.data,10,rt)):pe.setData([])}),k(()=>e.chart.indicators.ema20,n=>{n?fe.setData(r.calculateEMA(e.chart.data,20,ot)):fe.setData([])}),k(()=>e.chart.indicators.ema55,n=>{n?me.setData(r.calculateEMA(e.chart.data,55,ct)):me.setData([])}),k(()=>e.chart.indicators.ema89,n=>{n?ge.setData(r.calculateEMA(e.chart.data,89,ht)):ge.setData([])}),k(()=>e.chart.indicators.ema100,n=>{n?be.setData(r.calculateEMA(e.chart.data,100,dt)):be.setData([])}),k(()=>e.chart.indicators.ema200,n=>{n?(ft.setData([]),Ee.setData(r.calculateEMA(e.chart.data,200,ut))):(ft.setData([]),Ee.setData([]))}),k(()=>e.chart.indicators.ema233,n=>{n?ne.setData(r.calculateEMA(e.chart.data,233,pt)):ne.setData([])}),k(()=>e.chart.indicators.sma10,n=>{n?ve.setData(r.calcularSMA(e.chart.data,10,et)):ve.setData([])}),k(()=>e.chart.indicators.sma20,n=>{n?ye.setData(r.calcularSMA(e.chart.data,20,tt)):ye.setData([])}),k(()=>e.chart.indicators.sma55,n=>{n?we.setData(r.calcularSMA(e.chart.data,55,at)):we.setData([])}),k(()=>e.chart.indicators.sma89,n=>{n?_e.setData(r.calcularSMA(e.chart.data,89,it)):_e.setData([])}),k(()=>e.chart.indicators.sma100,n=>{n?Se.setData(r.calcularSMA(e.chart.data,100,st)):Se.setData([])}),k(()=>e.chart.indicators.sma200,n=>{n?$e.setData(r.calcularSMA(e.chart.data,200,lt)):$e.setData([])}),k(()=>e.chart.indicators.sma233,n=>{n?re.setData(r.calcularSMA(e.chart.data,233,nt)):re.setData([])}),k(()=>e.chart.indicators.divergences,n=>{n?Promise.resolve(Ht()).then(Xt()):(ce.alcistas.forEach(function(S){S.setData([])}),ce.bajistas.forEach(function(S){S.setData([])}),ce.alcistas=[],ce.bajistas=[],Q.alcista=[],Q.bajista=[])});function _(n){var y;const S=m.timeScale().getVisibleLogicalRange(),N=m.timeScale().getVisibleRange(),Z=parseInt(m.timeScale().scrollPosition());le.value={visibleLogicalRange:S,visibleRange:N,scrollPosition:Z,t:Date.now()},V!=null&&V.value&&((y=V==null?void 0:V.value)!=null&&y.timeScale)&&V.value.timeScale().setVisibleLogicalRange(n)}const ke=(n,S)=>S.time&&S.seriesData.get(n)||null;m.subscribeCrosshairMove(n=>{var N;const S=ke(I,n);V!=null&&V.value&&((N=V==null?void 0:V.value)!=null&&N.syncCrosshair)&&V.value.syncCrosshair(I,S)}),m.timeScale().subscribeVisibleLogicalRangeChange(_)});const qt=c=>{m.setCrosshairPosition(c,c.time,I)};return t({mainStore:g,chartStore:e,lastPrice:G,details:b,leftTime:mt,getSegundsLeft:Wt,getMinLeft:It,getDaysLeft:wa,Selector:Lt,ChartRsi:oa,ChartMacd:Gt,chartMacd:V,lastRSI:ue,syncCrosshairMACD:qt}),(c,l)=>(P(),U("div",{class:Na({"container-chart":!0,"graphic-macd":T(e).chart.indicators.macd})},[L("div",_i,[L("div",Si,[L("p",null,[T(e).chart.futures?(P(),U("span",{key:0,class:"btn-t bnt2",onClick:l[0]||(l[0]=(...o)=>T(e).toogleFutures&&T(e).toogleFutures(...o))},"FUTURES")):(P(),U("span",{key:1,class:"btn-t bnt2",onClick:l[1]||(l[1]=(...o)=>T(e).toogleFutures&&T(e).toogleFutures(...o))},"SPOT")),Ce(" : "+X(T(e).getExchange),1)]),L("div",Vi,[L("div",Li,[Fe(Lt,{opciones:bt.value,onlyLabel:!1,lblPorDefecto:T(e).chart.symbols,onActionChange:yt},null,8,["opciones","lblPorDefecto"])]),L("div",ki,[Fe(Lt,{lblPorDefecto:T(e).getTemporality,opciones:va.value,onlyLabel:!1,modelValue:Ft.value,"onUpdate:modelValue":l[2]||(l[2]=o=>Ft.value=o),onActionChange:La},null,8,["lblPorDefecto","opciones","modelValue"])])])])]),Ua(L("div",{id:"chart-main",ref_key:"chartElement",ref:F},[L("div",Ci,[L("span",Di,[l[3]||(l[3]=Ce("HMA10 ")),b.hma10?(P(),U("label",Mi,X(b.hma10),1)):z("",!0)]),L("span",xi,[l[4]||(l[4]=Ce("HMA20 ")),b.hma10?(P(),U("label",Ai,X(b.hma20),1)):z("",!0)]),L("span",Ei,[l[5]||(l[5]=Ce("EMA200 --- ")),b.ema200?(P(),U("label",$i,X(b.ema200),1)):z("",!0)])]),L("div",Ri,[b.price?(P(),U("span",Ti,[l[6]||(l[6]=L("p",null,"Price:",-1)),Fe(T(wi),{value:b.price},null,8,["value"]),L("b",null,"RSI "+X(ue.value),1)])):z("",!0),b.high?(P(),U("span",Pi,[l[7]||(l[7]=L("p",null,"High:",-1)),L("p",null,X(b.high),1)])):z("",!0),b.low?(P(),U("span",ji,[l[8]||(l[8]=L("p",null,"Low:",-1)),L("p",null,X(b.low),1)])):z("",!0),b.close?(P(),U("span",Fi,[l[9]||(l[9]=L("p",null,"Close:",-1)),L("p",null,X(b.close),1)])):z("",!0),b.rsi?(P(),U("span",Wi,[l[10]||(l[10]=L("p",null,"RSI",-1)),L("p",null,X(b.rsi),1)])):z("",!0),b.move?(P(),U("span",Ii,[l[11]||(l[11]=L("p",null,"move",-1)),L("p",null,X(b.move)+"%",1)])):z("",!0),b.ps?(P(),U("span",Ui,[l[12]||(l[12]=L("b",null,"PS ",-1)),L("p",null,X(b.ps)+"%",1)])):z("",!0)]),L("div",Bi,[l[13]||(l[13]=L("span",null,"Left time",-1)),Ce(" "+X(ya.value)+":"+X(It.value)+":"+X(Wt.value),1)])],512),[[Ba,!T(g).loading]]),T(e).chart.data.length>0&&!T(g).loading&&T(e).chart.indicators.rsi?(P(),Ct(oa,{key:0,ref_key:"chartRsi",ref:D},null,512)):z("",!0),!T(g).loading&&T(e).chart.data.length>0&&T(e).chart.indicators.macd?(P(),Ct(Gt,{key:1,chartInfoVisible:le.value,onResizeChart:Pe,onSyncCrosshair:qt,ref_key:"chartMacd",ref:V},null,8,["chartInfoVisible"])):z("",!0),Fe(Ha)],2))}},Oi=ha(Ni,[["__scopeId","data-v-87d2e25d"]]),Hi={class:"charts"},Xi={__name:"ChartView",setup(u,{expose:t}){const a=$t(),i=W(!1),s=()=>{i.value=!0,console.log("reloadChart"),setTimeout(function(){i.value=!1},100)},d=new Worker(new URL("/assets/claculateForCharts-BdmvpLvX.js",import.meta.url)),h=async()=>{d.postMessage({name:"searchData",type:a.chart.futures?"futures":"spot"}),d.onmessage=p=>{p.data&&console.log({recibe:p.data})}};return Et(()=>{h()}),t({isRefresh:i}),(p,g)=>(P(),U("main",Hi,[i.value?z("",!0):(P(),Ct(Oi,{key:0,onRefresh:s}))]))}},as=ha(Xi,[["__scopeId","data-v-c1e516f6"]]);export{as as default};
