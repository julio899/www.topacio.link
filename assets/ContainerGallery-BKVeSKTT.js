import{_ as le,s as re,r as w,u as X,v as ie,o as oe,a as d,b as g,d as l,e as K,t as T,f as M,x as ue,y as ce,z as F,S as q,A as de,W as ve,B as U,h as G,m as $,w as z,k as S,F as W,g as se,n as fe,c as ge,i as me}from"./index-BOhIgEpW.js";import{_ as pe}from"./Tmine2-DhPnLw4a.js";import{e as A}from"./Paginator.vue_vue_type_style_index_0_lang-CIT25ayj.js";import{_ as te}from"./Paginator.vue_vue_type_script_setup_true_lang-CpjzNCn0.js";const we="/img/astarOnlyLogo.svg",_e="/img/update-meta.svg",ye="/img/fly-svgrepo-com.svg",be="/img/claim_.svg",ke={name:"SendNFT",props:["show","idtarget"],emits:["closeModalSend"],setup(B,{emit:u}){const{show:y,idtarget:s}=re(B),v=w(!1),r=w(""),m=X();ie(()=>{r.value="",v.value=!1}),oe(()=>{v.value=!1,r.value=""});const b=()=>{r.value="",v.value=!1,u("closeModalSend",!0)};return{store:m,show:y,closeModal:b,confirmSend:async()=>{v.value=!0;const h=r.value.toString().trim().replaceAll("	",""),k=q.mixin({toast:!0,position:"top-end",showConfirmButton:!1,timer:3e3,timerProgressBar:!0,didOpen:p=>{p.addEventListener("mouseenter",q.stopTimer),p.addEventListener("mouseleave",q.resumeTimer)}});if(!de(h))return v.value=!1,b(),k.fire({icon:"error",title:"Wallet is no valid"});const C=s.value;u("transferNFT",{w:h,id:C})},loading:v,wallet:r}}},Ce={class:"modal-container"},Te={class:"Cabecera"},he={class:"Contenido"},Ne={key:0,class:"loader-interno"},Se={key:1,class:"group"},Le={class:"Bootonera"};function xe(B,u,y,s,v,r){return d(),g("section",{class:F({"modal-t":!0,"show-modal":s.show,"hide-modal":!s.show})},[l("div",Ce,[l("div",Te,[K(" SEND NFT ðŸ”– "+T(y.idtarget)+" ",1),l("button",{class:"close",onClick:u[0]||(u[0]=(...m)=>s.closeModal&&s.closeModal(...m))},"âœ–")]),l("div",he,[s.loading?(d(),g("div",Ne)):M("",!0),s.loading?M("",!0):(d(),g("div",Se,[ue(l("input",{type:"text","onUpdate:modelValue":u[1]||(u[1]=m=>s.wallet=m),required:""},null,512),[[ce,s.wallet]]),u[3]||(u[3]=l("span",{class:"highlight"},null,-1)),u[4]||(u[4]=l("span",{class:"bar"},null,-1)),u[5]||(u[5]=l("label",null,"Wallet destine",-1))]))]),l("div",Le,[s.loading?M("",!0):(d(),g("span",{key:0,class:"btn-send",onClick:u[2]||(u[2]=(...m)=>s.confirmSend&&s.confirmSend(...m))},"CONFIRM"))])])],2)}const Ie=le(ke,[["render",xe],["__scopeId","data-v-a1755a0e"]]),Pe={class:"header-card"},$e=["href"],Fe={class:"content-card-item-galery"},Me={key:0,class:"title-gem"},Ae={key:1,class:"footer-card"},Be={key:2,class:"snippet","data-title":"dot-flashing"},ne={__name:"nftItemGallery",props:["nftId","grid","target","k"],setup(B,{expose:u}){const y=new ve,s="amoy.polygonscan.com",v="0x37C0d841E4559eE0408B7deCDf928c2f797aF48b",r=a=>y.getDataNFT(a),m=()=>y.syncBalance(),b=a=>`https://${s}/nft/${v}/${a}`,E=()=>{},h=()=>{},k=a=>y.claimReward(a),C=()=>y.refreshTokens(),p=B;console.log({props:p});const o=w(p.nftId),L=w(!1),t=w(null),x=w(null),c=w(!1),I=w(!1),N=w(!1),i=X(),V=U(()=>t.value&&t.value.metadata&&t.value.metadata.attributes?t.value.metadata.attributes.flatMap(a=>({type:a.trait_type,value:a.value})):[]),H=U(()=>{var a,e,n;return(a=t==null?void 0:t.value)!=null&&a.metadata&&((n=(e=t==null?void 0:t.value)==null?void 0:e.metadata)!=null&&n.name)&&t.value.metadata.name.length>25?t.value.metadata.name.replace("Fragment ",""):t.value.metadata.name}),Y=()=>{N.value=!0},j=async({w:a,id:e})=>{console.log("toTransferNFT",{w:a,id:e});let n=null;console.time("transfer");try{n=await y.transferNFT(a,e)}catch(f){console.log({e:f,resp:n})}console.timeEnd("transfer"),console.log("transferNFT * ",{resp:n}),await m(),await h(),await C(),console.log({modalSend:x,resp:n}),!(n!=null&&n.blockNumber)||n===null?x.value=!1:N.value=!1},Q=async()=>{L.value=!0;const a=parseInt(o.value),e=await r(a);e!=null&&e.id&&e.id===o.value&&(t.value=e,i.web3.nftLoad[a]=e),await m(),await h(),setTimeout(()=>{L.value=!1},1e3)},P=U(()=>{const a=parseInt(o.value);return i.web3.nftLoad[a]!==void 0}),Z=async()=>{const a=parseInt(o.value);if(await k(a)===!0){await m(),await h(),console.log("* toClaim ok");const n=await r(a);n.id&&n.id===o.value&&a&&(t.value=n,i.web3.nftLoad[a]=n)}},ee=U(()=>{var f,R,D,O,_,J;const a=parseInt(o.value),e="cover";(R=(f=t==null?void 0:t.value)==null?void 0:f.metadata)!=null&&R.image&&console.log("* img",t.value.metadata.image);const n=(O=(D=t==null?void 0:t.value)==null?void 0:D.metadata)==null?void 0:O.image;return i.web3.nftLoad[a]!==void 0&&((J=(_=t==null?void 0:t.value)==null?void 0:_.metadata)!=null&&J.image)?`
	--crt:#fff;
    background-image: url(${n});
    background-position: center;
    background-repeat: no-repeat;
    background-size: ${e};`:""}),ae=a=>{const e=a.target,n=a.pageX-e.offsetLeft,f=a.pageY-e.offsetTop;e.style.setProperty("--x",n+"px"),e.style.setProperty("--y",f+"px")};return G(P,async a=>{if(a&&(console.log(a,"*existInLoad",i.web3.nftLoad[o.value]!==void 0,o.value,t.value),a&&!t.value)){const e=parseInt(o.value),n=await r(e);n.id&&n.id===o.value&&(t.value=n),console.log({resp:n})}}),G(()=>i.web3.blockNumber,async function(a){I.value=!0;const e=parseInt(o.value),n=await r(e);n!=null&&n.id&&n.id===o.value&&(t.value=n,i.web3.nftLoad[e]=n),I.value=!1}),G(()=>p.nftId,async function(a){var e;if(o.value=a,t.value=null,console.log("w",a,P.value,i.web3.nftLoad[a]),!P.value&&!i.web3.nftLoad[a]){const n=parseInt(o.value);console.log("*startSearch");const f=await r(n);f.id&&f.id===o.value&&(t.value=f,i.web3.nftLoad[n]=f),console.log("* meta",t.value,{data:f})}i.web3.nftLoad[a],((e=i.web3.nftLoad[a])==null?void 0:e.id)===a&&(t.value=i.web3.nftLoad[a])}),oe(async()=>{const a=parseInt(o.value),e=await r(a);console.log({resp:e,idAuxiliar:a},o.value),e&&o&&e.id&&e.id===o.value&&i.web3.nftLoad[a]&&(t.value=e,i.web3.nftLoad[a]=e),e&&!i.web3.nftLoad[o.value]&&(t.value=e,i.web3.nftLoad[o.value]=e)}),u({upReward:I,nftId:o,existInLoad:P,mainStore:i,getBgNft:ee,getLinkNftScan:b,moseMoveInCard:ae,toClaim:Z,loadRedresh:L,toRefresh:Q,showModalSedNft:N,toSend:Y,toTransferNFT:j,Popper:A,toVault:E,showDetails:c,getProperties:V,titleFormat:H}),(a,e)=>{var n,f,R,D,O;return d(),g(W,null,[l("div",{class:F({"nft-item":!0,"loader-bg":!P.value}),style:fe(ee.value),onMousemove:ae},[l("div",Pe,[l("a",{href:b(o.value),target:"_blank"},[K("# "+T(o.value)+" ",1),$(S(A),{content:"Testnet shibuya",arrow:!0,hover:!0},{default:z(()=>e[6]||(e[6]=[l("img",{class:"img-link-polygon",src:we,alt:"logo Astar"},null,-1)])),_:1})],8,$e),$(S(A),{content:a.$t("general.titles.nft_attributes"),arrow:!0,hover:!0},{default:z(()=>[l("i",{class:"fa-solid fa-circle-info icon-info",onClick:e[0]||(e[0]=_=>c.value=!c.value)})]),_:1},8,["content"]),$(S(A),{content:a.$t("general.titles.update_metadata"),arrow:!0,hover:!0},{default:z(()=>[l("img",{src:_e,class:F({"icon-update-meta":!0,"loading-refresh":L.value}),onClick:Q},null,2)]),_:1},8,["content"])]),l("div",{class:F({"details-attributes":!0,active:c.value}),onClick:e[4]||(e[4]=_=>c.value=!c.value)},[l("ul",{onClick:e[3]||(e[3]=_=>c.value=!c.value)},[(d(!0),g(W,null,se(V.value,_=>(d(),g("li",{onClick:e[1]||(e[1]=J=>c.value=!c.value),class:F({colorEpic:_.type=="Staking"&&_.value>=4,colorEpicRarity:_.value=="epic"})},T(_.type)+" : "+T(_.value),3))),256)),t.value&&((f=(n=t.value)==null?void 0:n.metadata)!=null&&f.name)?(d(),g("li",{key:0,onClick:e[2]||(e[2]=_=>c.value=!c.value)},T(H.value),1)):M("",!0)])],2),l("div",Fe,[$(S(A),{content:a.$t("general.titles.send_nft"),arrow:!0,hover:!0,placement:"top"},{default:z(()=>[l("img",{src:ye,onClick:Y})]),_:1},8,["content"])]),t.value&&((D=(R=t.value)==null?void 0:R.metadata)!=null&&D.name)&&!c.value?(d(),g("div",Me,T(H.value),1)):M("",!0),(O=t.value)!=null&&O.reward&&P.value&&!L.value?(d(),g("div",Ae,[l("label",{class:F({"nft-number nft-reward-tmine":!0,blink_me:I.value})},[e[7]||(e[7]=l("img",{src:pe,alt:"tmine logo",class:"img-logo-tmine"},null,-1)),K(" "+T(t.value.reward)+" TMINE ",1)],2),$(S(A),{content:a.$t("general.titles.claim_tmine"),hover:!0},{default:z(()=>[l("img",{src:be,onClick:Z,class:"icon-reward-claim"})]),_:1},8,["content"])])):M("",!0),!P.value||L.value?(d(),g("div",Be,e[8]||(e[8]=[l("div",{class:"stage"},[l("div",{class:"dot-flashing"})],-1)]))):M("",!0)],38),$(Ie,{show:N.value,idtarget:o.value,onCloseModalSend:e[5]||(e[5]=_=>N.value=!1),onTransferNFT:j,ref_key:"modalSend",ref:x},null,8,["show","idtarget"])],64)}}},Ee={key:0,class:"paginator"},Re={class:"info-floating"},De={key:1,class:"paginator"},Oe={__name:"ContainerGallery",setup(B,{expose:u}){const y=new me,s=X(),v=w(1),r=w(!1),m=w(null),b=w(5),E=t=>{v.value=t,C()},h=()=>{r.value=!r.value,r.value?b.value=10:b.value=5,p.value=C()},k=U(()=>C().elementosPagina),C=()=>{const t=JSON.parse(JSON.stringify(s.web3.nftTokensIds)),x=y.arrayPaginator(t,b.value,v.value);return m.value=x.totalPaginas,x},p=w(C()),o=()=>{v.value<m.value&&(v.value++,p.value=C()),console.log("nextPage",v.value)};return G(()=>s.web3.nftTokensIds,t=>{t&&(p.value=C())}),u({data:[],mainStore:s,currentPage:p,nextPage:o,nftItemGallery:ne,getCurrentTarget:k,multiGrid14:r,changeToMultigrid:h,Paginator:te,updatePage:E,amountPerPage:b}),(t,x)=>{var c,I,N;return d(),g(W,null,[l("section",{class:F({content:!0,"multi-grid-14":r.value,lessMinimal:k.value&&((c=k.value)==null?void 0:c.length)&&((I=k.value)==null?void 0:I.length)<=4,"minimal-size":r.value&&((N=k.value)==null?void 0:N.length)<=3})},[(d(!0),g(W,null,se(k.value,(i,V)=>(d(),ge(ne,{grid:r.value,target:k.value,"nft-id":i,k:V},null,8,["grid","target","nft-id","k"]))),256))],2),p.value&&p.value.paginaActual?(d(),g("section",Ee,[$(te,{currentPage:p.value,total:S(s).web3.nftTokensIds.length,amountPerPage:b.value,onUpdate:E,class:"body-paginator"},null,8,["currentPage","total","amountPerPage"]),l("section",Re,[l("div",null,"Holders: "+T(S(s).web3.holdersCount),1),l("div",null,"Nft balance: "+T(S(s).web3.nftBalance),1)])])):(d(),g("section",De))],64)}}},We=le(Oe,[["__scopeId","data-v-64a32df1"]]);export{We as C};
