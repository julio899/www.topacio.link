import{cn as A,r as R,cf as N,p as h,i as _}from"./index-GIQ73Ux7.js";const v="https://api.binance.com",C=new _,V=A("chart",()=>{const u=R(!1),t=N({symbols:"BTCUSDT",temporality:"15m",exchange:"binance",pairs:[],indicators:{divergences:!1,adx:!1,macd:!1,stochastic:!1,heikinAshi:!1,cci:!1,rsi:!1,bb:!1,hma10:!1,hma20:!1,hma55:!1,hma89:!1,hma233:!1,ema10:!1,ema20:!1,ema55:!1,ema89:!1,ema100:!1,ema200:!1,ema233:!1,sma10:!1,sma20:!1,sma55:!1,sma89:!1,sma100:!1,sma200:!1,sma233:!1,psar:!1,kernelChannel:!1,srDinamic:!1},data:[],futures:!0,menuOpen:!1}),S=h(()=>u),k=h(()=>t.indicators),I=h(()=>t.symbols),F=h(()=>t.temporality),T=h(()=>t.exchange),D=h(()=>t.data),x=h(()=>t.menuOpen);function M(l){t.symbols=new String(l).trim()}function $(){this.chart.futures=!this.chart.futures}async function j({symbol:l,temporality:c,cci:n}){const p=`${v}/api/v3/klines?symbol=${l}&interval=${c}`,y=await fetch(`${v}/api/v3/uiKlines?symbol=${l}&interval=${c}`).then(async a=>(await a.json()).flatMap(s=>({time:s[0],open:parseFloat(s[1]),high:parseFloat(s[2]),low:parseFloat(s[3]),close:parseFloat(s[4]),volume:parseFloat(s[5]),timeEnd:s[6],trades:s[7]}))).then(async a=>{if(a.length<n)return a;const m=a.flatMap(i=>i.close);let s=[],f=C.calcularCCI(a,n);return await C.calculoRSI(m).then(async i=>{var b,g;let r=f.length-1;for(var e=a.length-1;e>=0;e--){if(f[r]&&((b=a[e])!=null&&b.time)){if(a[e].cci=f[r],a[e].cci>100){const o="#00f5d4";a[e].color=o,a[e].borderColor=o,a[e].wickColor=o}if(a[e].cci<-100){const o="#ff006e";a[e].color=o,a[e].borderColor=o,a[e].wickColor=o}}if(i[r]&&((g=a[e])!=null&&g.time))a[e].rsi=i[r],s.push(a[e]);else break;r--}return await s.sort((o,d)=>o.time-d.time),s}),s});let w=y.length>0?y:[];return y.length===0&&(w=await fetch(p).then(async a=>(await a.json()).flatMap(s=>({time:s[0],open:parseFloat(s[1]),high:parseFloat(s[2]),low:parseFloat(s[3]),close:parseFloat(s[4]),volume:parseFloat(s[5]),timeEnd:s[6],trades:s[7]}))).then(async a=>{const m=a.flatMap(i=>i.close);let s=[],f=C.calcularCCI(a,n);return await C.calculoRSI(m).then(async i=>{var b,g;let r=f.length-1;for(var e=a.length-1;e>=0;e--){if(f[r]&&((b=a[e])!=null&&b.time)){if(a[e].cci=f[r],a[e].cci>100){const o="#00f5d4";a[e].color=o,a[e].borderColor=o,a[e].wickColor=o}if(a[e].cci<-100){const o="#ff006e";a[e].color=o,a[e].borderColor=o,a[e].wickColor=o}}if(i[r]&&((g=a[e])!=null&&g.time))a[e].rsi=i[r],s.push(a[e]);else break;r--}return await s.sort((o,d)=>o.time-d.time),s}),s})),w}async function E(){const c=await fetch("https://api.binance.com/api/v3/exchangeInfo").then(n=>n.json());return this.chart.pairs=c.symbols,t.pairs}async function B(){const l=t.futures?"https://fapi.binance.com/fapi/v1/exchangeInfo":"https://api.binance.com/api/v1/exchangeInfo",c=await fetch(l).then(n=>n.json());return this.chart.pairs=c.symbols.filter(n=>n.status==="TRADING"&&n.symbol.includes("USDT")),console.log({url:l,pairs:this.chart.pairs},this.chart.futures),t.pairs}async function U(l="BTCUSDT"){const c=new Headers;c.append("Content-Type","application/json");const n={method:"GET",headers:c};return await fetch(`https://fapi.binance.com/fapi/v1/depth?symbol=${l}`,n).then(p=>p.json()).catch(p=>console.log("error",p))}return{customOption:u,getcustomOption:S,isOpenMenu:x,chart:t,getIndicators:k,getData:D,getSymbol:I,getTemporality:F,getExchange:T,setSymbol:M,searchSymbols:B,searchSymbolsSpot:E,searchDataOrderBook:U,searchClandlesSpot:j,toogleCustomOptions:()=>{u.value=!u.value,u.value==!0?(t.indicators.bb=!0,t.indicators.hma10=!0,t.indicators.hma20=!0,t.indicators.divergences=!0,t.indicators.kernelChannel=!0,t.indicators.srDinamic=!0,t.indicators.macd=!0):(t.indicators.bb=!1,t.indicators.hma10=!1,t.indicators.hma20=!1,t.indicators.divergences=!1,t.indicators.kernelChannel=!1,t.indicators.srDinamic=!1,t.indicators.macd=!1)},toogleFutures:$}});export{V as u};
