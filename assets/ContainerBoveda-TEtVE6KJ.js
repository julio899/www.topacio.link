import{e as I,_ as Y}from"./Paginator.vue_vue_type_style_index_0_lang-DfAKK47U.js";import{_ as q,r as y,u as G,p as N,h as z,o as H,a as u,b as f,d,q as s,e as F,t as _,k as R,w as M,F as K,g as X,s as D,f as x,n as j,cd as i,c as O}from"./index-DS56sQHq.js";import"./iconify-CS7hVxrM.js";import{_ as J}from"./Tmine2-DhPnLw4a.js";const Q={class:"header-card"},U=["href"],Z={key:0,class:"detaills-gem"},ee={key:1,class:"title-gem-boveda"},ae={key:0,class:"footer-card"},te={class:"nft-number nft-reward-tmine"},oe={key:0,class:"snippet","data-title":"dot-flashing"},ne={__name:"nftItemBoveda",props:["nftId","grid","target","h","key"],setup(S,{expose:T}){const v="TSTONE",w=i("getDataNFT"),L=i("getLinkNftScan"),h=i("toVault"),B=i("claimVault");i("syncBalance"),i("syncTmineBalance"),i("claimReward"),i("refreshTokens");const A=i("getNFTVault");i("tmineAddAllowance");const b=S,o=y(b.nftId),c=y(!1),e=y(null);y(null);const p=y(null),l=G(),g=N(()=>{const a=parseInt(o.value);return l.web3.nftLoad[a]!==void 0}),V=N(()=>e.value.metadata&&e.value.metadata.attributes?e.value.metadata.attributes.flatMap(a=>({type:a.trait_type,value:a.value})):[]),C=N(()=>e.value.metadata&&e.value.metadata.name&&e.value.metadata.name.length>25?e.value.metadata.name.replace("Fragment ",""):e.value.metadata.name),E=N(()=>{var t,n,r,k;const a=parseInt(o.value);return(n=(t=e==null?void 0:e.value)==null?void 0:t.metadata)!=null&&n.image&&console.log("* img",e.value.metadata.image),l.web3.nftLoad[a]!==void 0&&((k=(r=e==null?void 0:e.value)==null?void 0:r.metadata)!=null&&k.image)?`
	--crt:#fff;
    background-image: url(${e.value.metadata.image});
    background-position: center;
    background-repeat: no-repeat;
    background-size: cover;
    display: flex;
    flex-flow: column;
    justify-content: space-between;
    `:""}),P=a=>{const t=a.target,n=a.pageX-t.offsetLeft,r=a.pageY-t.offsetTop;t.style.setProperty("--x",n+"px"),t.style.setProperty("--y",r+"px")};return z(g,async a=>{if(a&&(console.log(a,"*existInLoad",l.web3.nftLoad[o.value]!==void 0,o.value,e.value),a&&!e.value)){const t=parseInt(o.value),n=await w(t);n.id&&n.id===o.value&&(e.value=n),console.log({resp:n})}}),z(()=>b.nftId,async function(a){var t;if(o.value=a,e.value=null,console.log("w",a,g.value,l.web3.nftLoad[a]),!g.value&&!l.web3.nftLoad[a]){const n=parseInt(o.value);console.log("*startSearch");const r=await w(n);r.id&&r.id===o.value&&(e.value=r,l.web3.nftLoad[n]=r),console.log("* meta",e.value,{data:r})}l.web3.nftLoad[a],((t=l.web3.nftLoad[a])==null?void 0:t.id)===a&&(e.value=l.web3.nftLoad[a])}),H(async()=>{const a=parseInt(o.value),t=await w(a);p.value=await A(a),t.id&&t.id===o.value&&l.web3.nftLoad[a]&&(e.value=t,l.web3.nftLoad[a]=t),t&&!l.web3.nftLoad[o.value]&&(e.value=t,l.web3.nftLoad[o.value]=t)}),T({nftId:o,existInLoad:g,mainStore:l,getBgNft:E,getLinkNftScan:L,moseMoveInCard:P,loadRedresh:c,Popper:I,toVault:h,dataItem:p,claimVault:B,getProperties:V,titleFormat:C}),(a,t)=>{var n,r,k,$;return u(),f("div",{class:D({"nft-item-boveda":!0,"loader-bg":!g.value}),style:j(`height: ${b.h}px;`),onMousemove:P},[d("div",{class:"content-card",style:j(E.value)},[d("div",Q,[d("a",{href:s(L)(o.value),target:"_blank"},[F("# "+_(o.value)+" ",1),R(s(I),{content:"Examinar en Polygonscan",arrow:!0,hover:!0},{default:M(()=>t[1]||(t[1]=[d("img",{class:"img-link-polygon",src:Y,alt:"logo matic"},null,-1)])),_:1})],8,U)]),(r=(n=e.value)==null?void 0:n.metadata)!=null&&r.attributes?(u(),f("div",Z,[d("ul",null,[(u(!0),f(K,null,X(V.value,m=>(u(),f("li",{class:D({colorEpic:m.type=="Staking"&&m.value>=4,colorEpicRarity:m.value=="epic"})},_(m.type)+" : "+_(m.value),3))),256))])])):x("",!0),($=(k=e.value)==null?void 0:k.metadata)!=null&&$.name?(u(),f("div",ee,_(C.value),1)):x("",!0),R(s(I),{content:"Exatraer Fragmento",arrow:!1,hover:!0,zIndex:"10000"},{default:M(()=>{var m;return[(m=p.value)!=null&&m.priceW&&g.value&&!c.value?(u(),f("div",ae,[d("label",te,[d("img",{class:"img-logo-tmine",src:J,alt:"tmine logo",onClick:t[0]||(t[0]=re=>s(B)(o.value,p.value.priceW))}),F(" "+_(p.value.price)+" "+_(s(v)),1)])])):x("",!0)]}),_:1})],4),!g.value||c.value?(u(),f("div",oe,t[2]||(t[2]=[d("div",{class:"stage"},[d("div",{class:"dot-flashing"})],-1)]))):x("",!0)],38)}}},W=q(ne,[["__scopeId","data-v-eb522237"]]),le={class:"content container-items"},se={__name:"ContainerBoveda",setup(S,{expose:T}){const v=G(),w=y(!1),L=i("getNFTsBoveda");i("tmineCheckAllowanceBoveda");const h=i("incrementAllowanceInBoveda"),B=[];function A(o,c){return o=Math.ceil(o),c=Math.floor(c),Math.floor(Math.random()*(c-o+1))+o}const b=()=>A(280,500);return H(async()=>{await L(),console.log("tokens",v.web3.bovedaTokens)}),T({data:B,getHeight:b,nftItemBoveda:W,multiGrid14:w,Popper:I,incrementAllowanceInBoveda:h,mainStore:v}),(o,c)=>(u(),f("main",le,[s(v).connected&&!s(v).web3.bovedaAlloance||s(v).web3.bovedaAlloance==0?(u(),O(s(I),{key:0,content:o.$t("general.titles.increase_tmine_allowed_for_vault"),arrow:!1,hover:!0,zIndex:"10000"},{default:M(()=>[d("span",{class:"amountAlloance",onClick:c[0]||(c[0]=(...e)=>s(h)&&s(h)(...e))},[F(_(s(v).web3.bovedaAlloance),1),c[1]||(c[1]=d("i",{class:"fa-solid fa-chevron-up icon-alloance"},null,-1))])]),_:1},8,["content"])):x("",!0),(u(!0),f(K,null,X(s(v).web3.bovedaTokens,(e,p)=>(u(),O(W,{grid:w.value,target:s(v).web3.bovedaTokens,"nft-id":e,h:b(),key:p},null,8,["grid","target","nft-id","h"]))),128))]))}},ve=q(se,[["__scopeId","data-v-9e1fc22d"]]);export{ve as default};
