import{_ as re,s as ce,r as p,u as j,q as de,o as ie,a as v,b as m,d as l,e as Y,t as T,f as F,v as ve,x as fe,y as I,S as X,z as ge,W as me,A as D,h as q,l as L,w as z,k as C,F as H,g as ue,n as pe,M as V,m as we,c as _e,i as ye}from"./index-DQ5Cy1Qd.js";import{_ as be}from"./Tmine2-DhPnLw4a.js";import{e as A}from"./Paginator.vue_vue_type_style_index_0_lang-Cai5-xlS.js";import{_ as le}from"./Paginator.vue_vue_type_script_setup_true_lang-BLkLs-sD.js";const ke="/img/astarOnlyLogo.svg",he="/img/update-meta.svg",Te="/img/fly-svgrepo-com.svg",Ce="/img/claim_.svg",Se={name:"SendNFT",props:["show","idtarget"],emits:["closeModalSend"],setup(B,{emit:r}){const{show:S,idtarget:s}=ce(B),f=p(!1),c=p(""),i=j();de(()=>{c.value="",f.value=!1}),ie(()=>{f.value=!1,c.value=""});const y=()=>{c.value="",f.value=!1,r("closeModalSend",!0)};return{store:i,show:S,closeModal:y,confirmSend:async()=>{f.value=!0;const P=c.value.toString().trim().replaceAll("	",""),w=X.mixin({toast:!0,position:"top-end",showConfirmButton:!1,timer:3e3,timerProgressBar:!0,didOpen:b=>{b.addEventListener("mouseenter",X.stopTimer),b.addEventListener("mouseleave",X.resumeTimer)}});if(!ge(P))return f.value=!1,y(),w.fire({icon:"error",title:"Wallet is no valid"});const k=s.value;r("transferNFT",{w:P,id:k})},loading:f,wallet:c}}},Ne={class:"modal-container"},xe={class:"Cabecera"},Le={class:"Contenido"},Ie={key:0,class:"loader-interno"},Fe={key:1,class:"group"},Me={class:"Bootonera"};function Pe(B,r,S,s,f,c){return v(),m("section",{class:I({"modal-t":!0,"show-modal":s.show,"hide-modal":!s.show})},[l("div",Ne,[l("div",xe,[Y(" SEND NFT ðŸ”– "+T(S.idtarget)+" ",1),l("button",{class:"close",onClick:r[0]||(r[0]=(...i)=>s.closeModal&&s.closeModal(...i))},"âœ–")]),l("div",Le,[s.loading?(v(),m("div",Ie)):F("",!0),s.loading?F("",!0):(v(),m("div",Fe,[ve(l("input",{type:"text","onUpdate:modelValue":r[1]||(r[1]=i=>s.wallet=i),required:""},null,512),[[fe,s.wallet]]),r[3]||(r[3]=l("span",{class:"highlight"},null,-1)),r[4]||(r[4]=l("span",{class:"bar"},null,-1)),r[5]||(r[5]=l("label",null,"Wallet destine",-1))]))]),l("div",Me,[s.loading?F("",!0):(v(),m("span",{key:0,class:"btn-send",onClick:r[2]||(r[2]=(...i)=>s.confirmSend&&s.confirmSend(...i))},"CONFIRM"))])])],2)}const $e=re(Se,[["render",Pe],["__scopeId","data-v-a1755a0e"]]),Ae={class:"header-card"},Be=["href"],Ee={class:"content-card-item-galery"},Re={key:0,class:"title-gem"},We={key:1,class:"footer-card"},Oe={key:2,class:"snippet","data-title":"dot-flashing"},se={__name:"nftItemGallery",props:["nftId","grid","target","k"],setup(B,{expose:r}){const{proxy:S}=we(),s=new me,f="https://shibuya.blockscout.com",c="0x7E375Febac53d9B854e24019d7bc3bA6dFFCBc3E",i=t=>S.$MultiWalletWeb3.getDataNFT(t),y=()=>s.syncBalance(),M=t=>`${f}/token/${c}/instance/${t}`,P=()=>{},w=()=>{},k=()=>{var t=1,e=confetti.shapeFromText({text:"ðŸ’Ž",scalar:t});confetti({particleCount:100,spread:180,shapes:[e],scalar:t})},b=async t=>{await V.claimReward(t)===!0&&(k(),await i(t),G())},G=()=>V.refreshTokens(),U=B;console.log({props:U});const o=p(U.nftId),h=p(!1),a=p(null),E=p(null),d=p(!1),$=p(!1),N=p(!1),u=j(),Q=D(()=>a.value&&a.value.metadata&&a.value.metadata.attributes?a.value.metadata.attributes.flatMap(t=>({type:t.trait_type,value:t.value})):[]),J=D(()=>{var t,e,n;return(t=a==null?void 0:a.value)!=null&&t.metadata&&((n=(e=a==null?void 0:a.value)==null?void 0:e.metadata)!=null&&n.name)&&a.value.metadata.name.length>25?a.value.metadata.name.replace("Fragment ",""):a.value.metadata.name}),Z=()=>{N.value=!0},ee=async({w:t,id:e})=>{console.log("toTransferNFT",{w:t,id:e});let n=null;console.time("transfer");try{n=await V.transferNFT(t,e),console.log("transferNFT * ",{resp:n}),await V.refreshTokens()}catch(g){console.log({e:g,resp:n})}console.timeEnd("transfer"),await y(),await w(),await G(),console.log({modalSend:E,resp:n}),N.value=!1},te=async()=>{h.value=!0;const t=parseInt(o.value),e=await i(t);e!=null&&e.id&&e.id===o.value&&(a.value=e,u.web3.nftLoad[t]=e),await y(),await w(),setTimeout(()=>{h.value=!1},1e3)},x=D(()=>{const t=parseInt(o.value);return u.web3.nftLoad[t]!==void 0}),ae=async()=>{const t=parseInt(o.value);if(await b(t)===!0){await y(),await w(),console.log("* toClaim ok");const n=await i(t);n.id&&n.id===o.value&&t&&(a.value=n,u.web3.nftLoad[t]=n)}},ne=D(()=>{var g,R,W,O,_,K;const t=parseInt(o.value),e="cover";console.log({metadata:a}),(R=(g=a==null?void 0:a.value)==null?void 0:g.metadata)!=null&&R.image&&console.log("* img",a.value.metadata.image);const n=(O=(W=a==null?void 0:a.value)==null?void 0:W.metadata)==null?void 0:O.image;return u.web3.nftLoad[t]!==void 0&&((K=(_=a==null?void 0:a.value)==null?void 0:_.metadata)!=null&&K.image)?`
	--crt:#fff;
    background-image: url(${n});
    background-position: center;
    background-repeat: no-repeat;
    background-size: ${e};`:""}),oe=t=>{const e=t.target,n=t.pageX-e.offsetLeft,g=t.pageY-e.offsetTop;e.style.setProperty("--x",n+"px"),e.style.setProperty("--y",g+"px")};return q(x,async t=>{if(t&&(console.log(t,"*existInLoad",u.web3.nftLoad[o.value]!==void 0,o.value,a.value),t&&!a.value)){const e=parseInt(o.value),n=await i(e);n.id&&n.id===o.value&&(a.value=n),console.log({resp:n})}}),q(()=>u.web3.blockNumber,async function(t){$.value=!0;const e=parseInt(o.value),n=await i(e);n!=null&&n.id&&n.id===o.value&&(a.value=n,u.web3.nftLoad[e]=n),$.value=!1}),q(()=>U.nftId,async function(t){var e;if(o.value=t,a.value=null,console.log("w",t,x.value,u.web3.nftLoad[t]),!x.value&&!u.web3.nftLoad[t]){const n=parseInt(o.value);console.log("*startSearch");const g=await i(n);g.id&&g.id===o.value&&(a.value=g,u.web3.nftLoad[n]=g),console.log("* meta",a.value,{data:g})}u.web3.nftLoad[t],((e=u.web3.nftLoad[t])==null?void 0:e.id)===t&&(a.value=u.web3.nftLoad[t])}),ie(async()=>{const t=parseInt(o.value),e=await i(t);console.log({resp:e,idAuxiliar:t},o.value),e&&o&&e.id&&e.id===o.value&&u.web3.nftLoad[t]&&(a.value=e,u.web3.nftLoad[t]=e),e&&!u.web3.nftLoad[o.value]&&(a.value=e,u.web3.nftLoad[o.value]=e)}),r({upReward:$,nftId:o,existInLoad:x,mainStore:u,getBgNft:ne,getLinkNftScan:M,moseMoveInCard:oe,toClaim:ae,loadRedresh:h,toRefresh:te,showModalSedNft:N,toSend:Z,toTransferNFT:ee,Popper:A,toVault:P,showDetails:d,getProperties:Q,titleFormat:J}),(t,e)=>{var n,g,R,W,O;return v(),m(H,null,[l("div",{class:I({"nft-item":!0,"loader-bg":!x.value}),style:pe(ne.value),onMousemove:oe},[l("div",Ae,[l("a",{href:M(o.value),target:"_blank"},[Y("# "+T(o.value)+" ",1),L(C(A),{content:"Testnet shibuya",arrow:!0,hover:!0},{default:z(()=>e[6]||(e[6]=[l("img",{class:"img-link-polygon",src:ke,alt:"logo Astar"},null,-1)])),_:1})],8,Be),L(C(A),{content:t.$t("general.titles.nft_attributes"),arrow:!0,hover:!0},{default:z(()=>[l("i",{class:"fa-solid fa-circle-info icon-info",onClick:e[0]||(e[0]=_=>d.value=!d.value)})]),_:1},8,["content"]),L(C(A),{content:t.$t("general.titles.update_metadata"),arrow:!0,hover:!0},{default:z(()=>[l("img",{src:he,class:I({"icon-update-meta":!0,"loading-refresh":h.value}),onClick:te},null,2)]),_:1},8,["content"])]),l("div",{class:I({"details-attributes":!0,active:d.value}),onClick:e[4]||(e[4]=_=>d.value=!d.value)},[l("ul",{onClick:e[3]||(e[3]=_=>d.value=!d.value)},[(v(!0),m(H,null,ue(Q.value,_=>(v(),m("li",{onClick:e[1]||(e[1]=K=>d.value=!d.value),class:I({colorEpic:_.type=="Staking"&&_.value>=4,colorEpicRarity:_.value=="epic"})},T(_.type)+" : "+T(_.value),3))),256)),a.value&&((g=(n=a.value)==null?void 0:n.metadata)!=null&&g.name)?(v(),m("li",{key:0,onClick:e[2]||(e[2]=_=>d.value=!d.value)},T(J.value),1)):F("",!0)])],2),l("div",Ee,[L(C(A),{content:t.$t("general.titles.send_nft"),arrow:!0,hover:!0,placement:"top"},{default:z(()=>[l("img",{src:Te,onClick:Z})]),_:1},8,["content"])]),a.value&&((W=(R=a.value)==null?void 0:R.metadata)!=null&&W.name)&&!d.value?(v(),m("div",Re,T(J.value),1)):F("",!0),(O=a.value)!=null&&O.reward&&x.value&&!h.value?(v(),m("div",We,[l("label",{class:I({"nft-number nft-reward-tmine":!0,blink_me:$.value})},[e[7]||(e[7]=l("img",{src:be,alt:"tmine logo",class:"img-logo-tmine"},null,-1)),Y(" "+T(a.value.reward)+" TMINE ",1)],2),L(C(A),{content:t.$t("general.titles.claim_tmine"),hover:!0},{default:z(()=>[l("img",{src:Ce,onClick:ae,class:"icon-reward-claim"})]),_:1},8,["content"])])):F("",!0),!x.value||h.value?(v(),m("div",Oe,e[8]||(e[8]=[l("div",{class:"stage"},[l("div",{class:"dot-flashing"})],-1)]))):F("",!0)],38),L($e,{show:N.value,idtarget:o.value,onCloseModalSend:e[5]||(e[5]=_=>N.value=!1),onTransferNFT:ee,ref_key:"modalSend",ref:E},null,8,["show","idtarget"])],64)}}},ze={key:0,class:"paginator"},De={class:"info-floating"},Ge={key:1,class:"paginator"},Ue={__name:"ContainerGallery",setup(B,{expose:r}){const S=new ye,s=j(),f=p(1),c=p(!1),i=p(null),y=p(5),M=o=>{f.value=o,k()},P=()=>{c.value=!c.value,c.value?y.value=10:y.value=5,b.value=k()},w=D(()=>k().elementosPagina),k=()=>{const o=JSON.parse(JSON.stringify(s.web3.nftTokensIds)),h=S.arrayPaginator(o,y.value,f.value);return i.value=h.totalPaginas,h},b=p(k()),G=()=>{f.value<i.value&&(f.value++,b.value=k()),console.log("nextPage",f.value)};return q(()=>s.web3.nftTokensIds,o=>{o&&(b.value=k())}),r({data:[],mainStore:s,currentPage:b,nextPage:G,nftItemGallery:se,getCurrentTarget:w,multiGrid14:c,changeToMultigrid:P,Paginator:le,updatePage:M,amountPerPage:y}),(o,h)=>{var a,E,d;return v(),m(H,null,[l("section",{class:I({content:!0,"multi-grid-14":c.value,lessMinimal:w.value&&((a=w.value)==null?void 0:a.length)&&((E=w.value)==null?void 0:E.length)<=4,"minimal-size":c.value&&((d=w.value)==null?void 0:d.length)<=3})},[(v(!0),m(H,null,ue(w.value,($,N)=>(v(),_e(se,{grid:c.value,target:w.value,"nft-id":$,k:N},null,8,["grid","target","nft-id","k"]))),256))],2),b.value&&b.value.paginaActual?(v(),m("section",ze,[L(le,{currentPage:b.value,total:C(s).web3.nftTokensIds.length,amountPerPage:y.value,onUpdate:M,class:"body-paginator"},null,8,["currentPage","total","amountPerPage"]),l("section",De,[l("div",null,"Holders: "+T(C(s).web3.holdersCount),1),l("div",null,"Nft balance: "+T(C(s).web3.nftBalance),1)])])):(v(),m("section",Ge))],64)}}},Ke=re(Ue,[["__scopeId","data-v-64a32df1"]]);export{Ke as C};
