import{_ as K,j as k,q as Z,r as g,u as O,s as ee,o as Q,a as _,g as y,d as l,e as z,t as G,l as F,v as ae,x as te,y as B,S as E,z as ne,p as oe,b as se,A as V,f as R,k as S,m as N,w as $,B as le,F as D,C as re,c as ie,h as ce}from"./index-15d4b111.js";import{e as M,_ as de}from"./Paginator.vue_vue_type_style_index_0_lang-c9deeff2.js";import{_ as ue}from"./Tmine2-25d51798.js";import{_ as X}from"./Paginator.vue_vue_type_script_setup_true_lang-55e5ecec.js";const ve="/img/update-meta.svg",fe="/img/fly-svgrepo-com.svg",ge="/img/claim_.svg";const _e={name:"SendNFT",props:["show","idtarget"],emits:["closeModalSend"],setup(b,{emit:u}){const m=k("transferNFT"),{show:s,idtarget:p}=Z(b),i=g(!1),c=g(""),w=O();ee(()=>{c.value="",i.value=!1}),Q(()=>{i.value=!1,c.value="",console.log({transferNFT:m})});const x=()=>{c.value="",i.value=!1,u("closeModalSend",!0)};return{store:w,show:s,closeModal:x,confirmSend:async()=>{i.value=!0;const f=c.value.toString().trim().replaceAll("	",""),t=E.mixin({toast:!0,position:"top-end",showConfirmButton:!1,timer:3e3,timerProgressBar:!0,didOpen:n=>{n.addEventListener("mouseenter",E.stopTimer),n.addEventListener("mouseleave",E.resumeTimer)}});if(!ne(f))return i.value=!1,x(),t.fire({icon:"error",title:"Wallet is no valid"});const d=p.value;u("transferNFT",{w:f,id:d})},loading:i,wallet:c}}},U=b=>(oe("data-v-bf79e1a0"),b=b(),se(),b),me={class:"modal-container"},pe={class:"Cabecera"},we={class:"Contenido"},he={key:0,class:"loader-interno"},ye={key:1,class:"group"},be=U(()=>l("span",{class:"highlight"},null,-1)),Te=U(()=>l("span",{class:"bar"},null,-1)),ke=U(()=>l("label",null,"Wallet destine",-1)),xe={class:"Bootonera"};function Se(b,u,m,s,p,i){return _(),y("section",{class:B({"modal-t":!0,"show-modal":s.show,"hide-modal":!s.show})},[l("div",me,[l("div",pe,[z(" SEND NFT ðŸ”– "+G(m.idtarget)+" ",1),l("button",{class:"close",onClick:u[0]||(u[0]=(...c)=>s.closeModal&&s.closeModal(...c))},"âœ–")]),l("div",we,[s.loading?(_(),y("div",he)):F("",!0),s.loading?F("",!0):(_(),y("div",ye,[ae(l("input",{type:"text","onUpdate:modelValue":u[1]||(u[1]=c=>s.wallet=c),required:""},null,512),[[te,s.wallet]]),be,Te,ke]))]),l("div",xe,[s.loading?F("",!0):(_(),y("span",{key:0,class:"btn-send",onClick:u[2]||(u[2]=(...c)=>s.confirmSend&&s.confirmSend(...c))},"CONFIRM"))])])],2)}const Ne=K(_e,[["render",Se],["__scopeId","data-v-bf79e1a0"]]);const Ie={class:"header-card"},Ce=["href"],Le=l("img",{class:"img-link-polygon",src:de,alt:"logo matic"},null,-1),Pe={class:"content-card"},Me={key:0,class:"footer-card"},Fe={class:"nft-number nft-reward-tmine"},Be=l("img",{src:ue,alt:"tmine logo",class:"img-logo-tmine"},null,-1),Ae={key:1,class:"snippet","data-title":"dot-flashing"},$e=l("div",{class:"stage"},[l("div",{class:"dot-flashing"})],-1),Ee=[$e],Y={__name:"nftItemGallery",props:["nftId","grid","target"],setup(b,{expose:u}){const m=b,s=k("getDataNFT"),p=k("getLinkNftScan"),i=k("toVault"),c=k("syncBalance"),w=k("syncTmineBalance"),x=k("claimReward"),I=k("transferNFT"),f=k("refreshTokens"),t=g(m.nftId),d=g(!1),n=g(null),A=g(null),v=g(!1),r=O(),C=()=>{v.value=!0},L=async({w:e,id:a})=>{console.log("toTransferNFT",{w:e,id:a});const o=await I(e,a);await c(),await w(),await f(),console.log({modalSend:A,resp:o}),!(o!=null&&o.blockNumber)||o===null?A.value.loading=!1:v.value=!1},P=async()=>{d.value=!0;const e=parseInt(t.value),a=await s(e);a.id&&a.id===t.value&&(n.value=a,r.web3.nftLoad[e]=a),await c(),await w(),setTimeout(()=>{d.value=!1},2e3)},T=V(()=>{const e=parseInt(t.value);return r.web3.nftLoad[e]!==void 0}),j=async()=>{const e=parseInt(t.value);if(await x(e)===!0){await c(),await w(),console.log("* toClaim ok");const o=await s(e);o.id&&o.id===t.value&&e&&(n.value=o,r.web3.nftLoad[e]=o)}},q=V(()=>{var o,h,W,H;const e=parseInt(t.value),a=m.grid&&m.grid&&m.target.length>7?"cover":"150% 100%";return(h=(o=n==null?void 0:n.value)==null?void 0:o.metadata)!=null&&h.image&&console.log("* img",n.value.metadata.image),r.web3.nftLoad[e]!==void 0&&((H=(W=n==null?void 0:n.value)==null?void 0:W.metadata)!=null&&H.image)?`
	--crt:#fff;
    background-image: url(${n.value.metadata.image});
    background-position: center;
    background-repeat: no-repeat;
    background-size: ${a};`:""}),J=e=>{const a=e.target,o=e.pageX-a.offsetLeft,h=e.pageY-a.offsetTop;a.style.setProperty("--x",o+"px"),a.style.setProperty("--y",h+"px")};return R(T,async e=>{if(e&&(console.log(e,"*existInLoad",r.web3.nftLoad[t.value]!==void 0,t.value,n.value),e&&!n.value)){const a=parseInt(t.value),o=await s(a);o.id&&o.id===t.value&&(n.value=o),console.log({resp:o})}}),R(()=>m.nftId,async function(e){var a;if(t.value=e,n.value=null,console.log("w",e,T.value,r.web3.nftLoad[e]),!T.value&&!r.web3.nftLoad[e]){const o=parseInt(t.value);console.log("*startSearch");const h=await s(o);h.id&&h.id===t.value&&(n.value=h,r.web3.nftLoad[o]=h),console.log("* meta",n.value,{data:h})}r.web3.nftLoad[e],((a=r.web3.nftLoad[e])==null?void 0:a.id)===e&&(n.value=r.web3.nftLoad[e])}),Q(async()=>{const e=parseInt(t.value),a=await s(e);a.id&&a.id===t.value&&r.web3.nftLoad[e]&&(n.value=a,r.web3.nftLoad[e]=a),a&&!r.web3.nftLoad[t.value]&&(n.value=a,r.web3.nftLoad[t.value]=a)}),u({nftId:t,existInLoad:T,mainStore:r,getBgNft:q,getLinkNftScan:p,moseMoveInCard:J,toClaim:j,loadRedresh:d,toRefresh:P,showModalSedNft:v,toSend:C,toTransferNFT:L,Popper:M,toVault:i}),(e,a)=>{var o;return _(),y(D,null,[l("div",{class:B({"nft-item":!0,"loader-bg":!T.value}),style:le(q.value),onMousemove:J},[l("div",Ie,[l("a",{href:S(p)(t.value),target:"_blank"},[z("# "+G(t.value)+" ",1),N(S(M),{content:"Examinar en Polygonscan",arrow:!0,hover:!0},{default:$(()=>[Le]),_:1})],8,Ce),N(S(M),{content:"Actualizar Metadata",arrow:!0,hover:!0},{default:$(()=>[l("img",{src:ve,class:B({"icon-update-meta":!0,"loading-refresh":d.value}),onClick:P},null,2)]),_:1})]),l("div",Pe,[N(S(M),{content:"Enviar NFT",arrow:!0,hover:!0,placement:"top"},{default:$(()=>[l("img",{src:fe,onClick:C})]),_:1})]),(o=n.value)!=null&&o.reward&&T.value&&!d.value?(_(),y("div",Me,[l("label",Fe,[Be,z(" "+G(n.value.reward)+" TMINE ",1)]),N(S(M),{content:"Hacer Claim de TMINE",hover:!0},{default:$(()=>[l("img",{src:ge,onClick:j,class:"icon-reward-claim"})]),_:1})])):F("",!0),!T.value||d.value?(_(),y("div",Ae,Ee)):F("",!0)],38),N(Ne,{show:v.value,idtarget:t.value,onCloseModalSend:a[0]||(a[0]=h=>v.value=!1),onTransferNFT:L,ref_key:"modalSend",ref:A},null,8,["show","idtarget"])],64)}}};const ze={key:0,class:"paginator"},Ge={class:"slot-btn btn-grid"},Ve={key:1,class:"paginator"},Re={__name:"ContainerGallery",setup(b,{expose:u}){const m=new ce,s=O(),p=g(1),i=g(!1),c=g(null),w=g(5),x=v=>{p.value=v,t()},I=()=>{i.value=!i.value,i.value?w.value=10:w.value=5,d.value=t()},f=V(()=>t().elementosPagina),t=()=>{const v=JSON.parse(JSON.stringify(s.web3.nftTokensIds)),r=m.arrayPaginator(v,w.value,p.value);return c.value=r.totalPaginas,r},d=g(t()),n=()=>{p.value<c.value&&(p.value++,d.value=t()),console.log("nextPage",p.value)};return R(()=>s.web3.nftTokensIds,v=>{v&&(d.value=t())}),u({data:[],mainStore:s,currentPage:d,nextPage:n,nftItemGallery:Y,getCurrentTarget:f,multiGrid14:i,changeToMultigrid:I,Paginator:X,updatePage:x,amountPerPage:w}),(v,r)=>{var C,L,P;return _(),y(D,null,[l("section",{class:B({content:!0,"multi-grid-14":i.value,lessMinimal:f.value&&((C=f.value)==null?void 0:C.length)&&((L=f.value)==null?void 0:L.length)<=4,"minimal-size":i.value&&((P=f.value)==null?void 0:P.length)<=3})},[(_(!0),y(D,null,re(f.value,T=>(_(),ie(Y,{grid:i.value,target:f.value,"nft-id":T},null,8,["grid","target","nft-id"]))),256))],2),d.value&&d.value.paginaActual?(_(),y("section",ze,[l("span",Ge,[l("i",{class:B({"fas fa-th icon-grid":!0,active:i.value}),style:{color:"#ffffff"},onClick:I},null,2)]),N(X,{currentPage:d.value,total:S(s).web3.nftTokensIds.length,amountPerPage:w.value,onUpdate:x},null,8,["currentPage","total","amountPerPage"])])):(_(),y("section",Ve))],64)}}},qe=K(Re,[["__scopeId","data-v-755e7290"]]);export{qe as C};
