import{_ as R,j as r,r as p,u as W,A as L,f as P,o as G,a as i,g as c,d,k as g,e as $,t as w,m as z,w as E,F as H,C as X,l as B,B as j,y as q,p as J,b as K,c as O}from"./index-59dd1e42.js";import{e as F,_ as Q}from"./Paginator.vue_vue_type_style_index_0_lang-76517c4b.js";import{_ as U}from"./Tmine2-25d51798.js";const Y=_=>(J("data-v-6e17f2bf"),_=_(),K(),_),Z={class:"header-card"},ee=["href"],te=Y(()=>d("img",{class:"img-link-polygon",src:Q,alt:"logo matic"},null,-1)),ae={key:0,class:"detaills-gem"},ne={key:1,class:"title-gem"},oe={key:0,class:"footer-card"},se={class:"nft-number nft-reward-tmine"},le={key:0,class:"snippet","data-title":"dot-flashing"},re=Y(()=>d("div",{class:"stage"},[d("div",{class:"dot-flashing"})],-1)),ie=[re],ce={__name:"nftItemBoveda",props:["nftId","grid","target","h"],setup(_,{expose:N}){const v=_,m=r("getDataNFT"),x=r("getLinkNftScan"),T=r("toVault"),I=r("claimVault");r("syncBalance"),r("syncTmineBalance"),r("claimReward"),r("transferNFT"),r("refreshTokens");const k=r("getNFTVault");r("tmineAddAllowance");const a=p(v.nftId),u=p(!1),e=p(null);p(null);const h=p(null),s=W(),f=L(()=>{const t=parseInt(a.value);return s.web3.nftLoad[t]!==void 0}),S=L(()=>e.value.metadata&&e.value.metadata.attributes?e.value.metadata.attributes.flatMap(t=>({type:t.trait_type,value:t.value})):[]),C=L(()=>e.value.metadata&&e.value.metadata.name&&e.value.metadata.name.length>25?e.value.metadata.name.replace("Fragment ",""):e.value.metadata.name),M=L(()=>{var n,o,l,y;const t=parseInt(a.value);return(o=(n=e==null?void 0:e.value)==null?void 0:n.metadata)!=null&&o.image&&console.log("* img",e.value.metadata.image),s.web3.nftLoad[t]!==void 0&&((y=(l=e==null?void 0:e.value)==null?void 0:l.metadata)!=null&&y.image)?`
	--crt:#fff;
    background-image: url(${e.value.metadata.image});
    background-position: center;
    background-repeat: no-repeat;
    background-size: cover;
    display: flex;
    flex-flow: column;
    justify-content: space-between;
    `:""}),V=t=>{const n=t.target,o=t.pageX-n.offsetLeft,l=t.pageY-n.offsetTop;n.style.setProperty("--x",o+"px"),n.style.setProperty("--y",l+"px")};return P(f,async t=>{if(t&&(console.log(t,"*existInLoad",s.web3.nftLoad[a.value]!==void 0,a.value,e.value),t&&!e.value)){const n=parseInt(a.value),o=await m(n);o.id&&o.id===a.value&&(e.value=o),console.log({resp:o})}}),P(()=>v.nftId,async function(t){var n;if(a.value=t,e.value=null,console.log("w",t,f.value,s.web3.nftLoad[t]),!f.value&&!s.web3.nftLoad[t]){const o=parseInt(a.value);console.log("*startSearch");const l=await m(o);l.id&&l.id===a.value&&(e.value=l,s.web3.nftLoad[o]=l),console.log("* meta",e.value,{data:l})}s.web3.nftLoad[t],((n=s.web3.nftLoad[t])==null?void 0:n.id)===t&&(e.value=s.web3.nftLoad[t])}),G(async()=>{const t=parseInt(a.value),n=await m(t);h.value=await k(t),n.id&&n.id===a.value&&s.web3.nftLoad[t]&&(e.value=n,s.web3.nftLoad[t]=n),n&&!s.web3.nftLoad[a.value]&&(e.value=n,s.web3.nftLoad[a.value]=n)}),N({nftId:a,existInLoad:f,mainStore:s,getBgNft:M,getLinkNftScan:x,moseMoveInCard:V,loadRedresh:u,Popper:F,toVault:T,dataItem:h,claimVault:I,getProperties:S,titleFormat:C}),(t,n)=>{var o,l,y,A;return i(),c("div",{class:q({"nft-item":!0,"loader-bg":!f.value}),style:j(`height: ${v.h}px;`),onMousemove:V},[d("div",{class:"content-card",style:j(M.value)},[d("div",Z,[d("a",{href:g(x)(a.value),target:"_blank"},[$("# "+w(a.value)+" ",1),z(g(F),{content:"Examinar en Polygonscan",arrow:!0,hover:!0},{default:E(()=>[te]),_:1})],8,ee)]),(l=(o=e.value)==null?void 0:o.metadata)!=null&&l.attributes?(i(),c("div",ae,[(i(!0),c(H,null,X(S.value,b=>(i(),c("ul",null,[d("li",null,w(b.type)+" : "+w(b.value),1)]))),256))])):B("",!0),(A=(y=e.value)==null?void 0:y.metadata)!=null&&A.name?(i(),c("div",ne,w(C.value),1)):B("",!0),z(g(F),{content:"Exatraer Fragmento",arrow:!1,hover:!0,zIndex:"10000"},{default:E(()=>{var b;return[(b=h.value)!=null&&b.priceW&&f.value&&!u.value?(i(),c("div",oe,[d("label",se,[d("img",{class:"img-logo-tmine",src:U,alt:"tmine logo",onClick:n[0]||(n[0]=ve=>g(I)(a.value,h.value.priceW))}),$(" "+w(h.value.price)+" TMINE ",1)])])):B("",!0)]}),_:1})],4),!f.value||u.value?(i(),c("div",le,ie)):B("",!0)],38)}}},D=R(ce,[["__scopeId","data-v-6e17f2bf"]]);const de={class:"content container-items"},ue={__name:"ContainerBoveda",setup(_,{expose:N}){const v=W(),m=p(!1),x=r("getNFTsBoveda"),T=[];function I(a,u){return a=Math.ceil(a),u=Math.floor(u),Math.floor(Math.random()*(u-a+1))+a}const k=()=>I(280,500);return G(async()=>{await x(),console.log("tokens",v.web3.bovedaTokens)}),N({data:T,getHeight:k,nftItemBoveda:D,multiGrid14:m}),(a,u)=>(i(),c("main",de,[(i(!0),c(H,null,X(g(v).web3.bovedaTokens,e=>(i(),O(D,{grid:m.value,target:g(v).web3.bovedaTokens,"nft-id":e,h:k()},null,8,["grid","target","nft-id","h"]))),256))]))}},pe=R(ue,[["__scopeId","data-v-65224e95"]]);export{pe as default};
